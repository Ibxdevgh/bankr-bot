var ms=Object.defineProperty;var ws=(n,e,r)=>e in n?ms(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r;var Pn=(n,e,r)=>ws(n,typeof e!="symbol"?e+"":e,r);import{r as wi,b as et}from"./reown-Cxi39rOn.js";import{h as nn,a as vs,b as Me,i as gn,c as ce,d as bs,r as dr,s as xs,e as Es,f as Ms,g as Ss,j as jr}from"./wagmi-DukDWchA.js";import{a as pr,g as vi}from"./react-CvrAlPOO.js";const pu="data:image/svg+xml,%3csvg%20width='200'%20height='200'%20viewBox='0%200%20200%20200'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='200'%20height='200'%20fill='black'/%3e%3cg%20transform='translate(62.125,%2067)%20scale(0.75)'%3e%3cpath%20d='M100.48%2069.3817L83.8068%2086.8015C83.4444%2087.1799%2083.0058%2087.4816%2082.5185%2087.6878C82.0312%2087.894%2081.5055%2088.0003%2080.9743%2088H1.93563C1.55849%2088%201.18957%2087.8926%200.874202%2087.6912C0.558829%2087.4897%200.31074%2087.2029%200.160416%2086.8659C0.0100923%2086.529%20-0.0359181%2086.1566%200.0280382%2085.7945C0.0919944%2085.4324%200.263131%2085.0964%200.520422%2084.8278L17.2061%2067.408C17.5676%2067.0306%2018.0047%2066.7295%2018.4904%2066.5234C18.9762%2066.3172%2019.5002%2066.2104%2020.0301%2066.2095H99.0644C99.4415%2066.2095%2099.8104%2066.3169%20100.126%2066.5183C100.441%2066.7198%20100.689%2067.0067%20100.84%2067.3436C100.99%2067.6806%20101.036%2068.0529%20100.972%2068.415C100.908%2068.7771%20100.737%2069.1131%20100.48%2069.3817ZM83.8068%2034.3032C83.4444%2033.9248%2083.0058%2033.6231%2082.5185%2033.4169C82.0312%2033.2108%2081.5055%2033.1045%2080.9743%2033.1048H1.93563C1.55849%2033.1048%201.18957%2033.2121%200.874202%2033.4136C0.558829%2033.6151%200.31074%2033.9019%200.160416%2034.2388C0.0100923%2034.5758%20-0.0359181%2034.9482%200.0280382%2035.3103C0.0919944%2035.6723%200.263131%2036.0083%200.520422%2036.277L17.2061%2053.6968C17.5676%2054.0742%2018.0047%2054.3752%2018.4904%2054.5814C18.9762%2054.7875%2019.5002%2054.8944%2020.0301%2054.8952H99.0644C99.4415%2054.8952%2099.8104%2054.7879%20100.126%2054.5864C100.441%2054.3849%20100.689%2054.0981%20100.84%2053.7612C100.99%2053.4242%20101.036%2053.0518%20100.972%2052.6897C100.908%2052.3277%20100.737%2051.9917%20100.48%2051.723L83.8068%2034.3032ZM1.93563%2021.7905H80.9743C81.5055%2021.7907%2082.0312%2021.6845%2082.5185%2021.4783C83.0058%2021.2721%2083.4444%2020.9704%2083.8068%2020.592L100.48%203.17219C100.737%202.90357%20100.908%202.56758%20100.972%202.2055C101.036%201.84342%20100.99%201.47103%20100.84%201.13408C100.689%200.79713%20100.441%200.510296%20100.126%200.308823C99.8104%200.107349%2099.4415%201.24074e-05%2099.0644%200L20.0301%200C19.5002%200.000878397%2018.9762%200.107699%2018.4904%200.313848C18.0047%200.519998%2017.5676%200.821087%2017.2061%201.19848L0.524723%2018.6183C0.267681%2018.8866%200.0966198%2019.2223%200.0325185%2019.5839C-0.0315829%2019.9456%200.0140624%2020.3177%200.163856%2020.6545C0.31365%2020.9913%200.561081%2021.2781%200.875804%2021.4799C1.19053%2021.6817%201.55886%2021.7896%201.93563%2021.7905Z'%20fill='url(%23paint0_linear_174_4403)'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_174_4403'%20x1='8.52558'%20y1='90.0973'%20x2='88.9933'%20y2='-3.01622'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0.08'%20stop-color='%239945FF'/%3e%3cstop%20offset='0.3'%20stop-color='%238752F3'/%3e%3cstop%20offset='0.5'%20stop-color='%235497D5'/%3e%3cstop%20offset='0.6'%20stop-color='%2343B4CA'/%3e%3cstop%20offset='0.72'%20stop-color='%2328E0B9'/%3e%3cstop%20offset='0.97'%20stop-color='%2319FB9B'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",Bs={},As=Object.freeze(Object.defineProperty({__proto__:null,default:Bs},Symbol.toStringTag,{value:"Module"})),Is=pr(As);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gr=BigInt(0),ar=BigInt(1);function Se(n,e=""){if(typeof n!="boolean"){const r=e&&`"${e}"`;throw new Error(r+"expected boolean, got type="+typeof n)}return n}function ae(n,e,r=""){const t=gn(n),f=n==null?void 0:n.length,s=e!==void 0;if(!t||s&&f!==e){const c=r&&`"${r}" `,b=s?` of length ${e}`:"",g=t?`length=${f}`:`type=${typeof n}`;throw new Error(c+"expected Uint8Array"+b+", got "+g)}return n}function We(n){const e=n.toString(16);return e.length&1?"0"+e:e}function bi(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?gr:BigInt("0x"+n)}function yn(n){return bi(Me(n))}function Ve(n){return vs(n),bi(Me(Uint8Array.from(n).reverse()))}function yr(n,e){return nn(n.toString(16).padStart(e*2,"0"))}function xi(n,e){return yr(n,e).reverse()}function ct(n,e,r){let t;if(typeof e=="string")try{t=nn(e)}catch(s){throw new Error(n+" must be hex string or Uint8Array, cause: "+s)}else if(gn(e))t=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const f=t.length;if(typeof r=="number"&&f!==r)throw new Error(n+" of length "+r+" expected, got "+f);return t}function Yr(n){return Uint8Array.from(n)}const $n=n=>typeof n=="bigint"&&gr<=n;function _s(n,e,r){return $n(n)&&$n(e)&&$n(r)&&e<=n&&n<r}function ur(n,e,r,t){if(!_s(e,r,t))throw new Error("expected valid "+n+": "+r+" <= n < "+t+", got "+e)}function Ei(n){let e;for(e=0;n>gr;n>>=ar,e+=1);return e}const $e=n=>(ar<<BigInt(n))-ar;function ks(n,e,r){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const t=_=>new Uint8Array(_),f=_=>Uint8Array.of(_);let s=t(n),c=t(n),b=0;const g=()=>{s.fill(1),c.fill(0),b=0},A=(..._)=>r(c,s,..._),T=(_=t(0))=>{c=A(f(0),_),s=A(),_.length!==0&&(c=A(f(1),_),s=A())},F=()=>{if(b++>=1e3)throw new Error("drbg: tried 1000 values");let _=0;const N=[];for(;_<e;){s=A();const O=s.slice();N.push(O),_+=s.length}return ce(...N)};return(_,N)=>{g(),T(_);let O;for(;!(O=N(F()));)T();return g(),O}}function Ze(n,e,r={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function t(f,s,c){const b=n[f];if(c&&b===void 0)return;const g=typeof b;if(g!==s||b===null)throw new Error(`param "${f}" is invalid: expected ${s}, got ${g}`)}Object.entries(e).forEach(([f,s])=>t(f,s,!1)),Object.entries(r).forEach(([f,s])=>t(f,s,!0))}function rn(n){const e=new WeakMap;return(r,...t)=>{const f=e.get(r);if(f!==void 0)return f;const s=n(r,...t);return e.set(r,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const re=BigInt(0),Wt=BigInt(1),be=BigInt(2),Mi=BigInt(3),Si=BigInt(4),Bi=BigInt(5),Rs=BigInt(7),Ai=BigInt(8),Ls=BigInt(9),Ii=BigInt(16);function jt(n,e){const r=n%e;return r>=re?r:e+r}function ft(n,e,r){let t=n;for(;e-- >re;)t*=t,t%=r;return t}function Hr(n,e){if(n===re)throw new Error("invert: expected non-zero number");if(e<=re)throw new Error("invert: expected positive modulus, got "+e);let r=jt(n,e),t=e,f=re,s=Wt;for(;r!==re;){const b=t/r,g=t%r,A=f-s*b;t=r,r=g,f=s,s=A}if(t!==Wt)throw new Error("invert: does not exist");return jt(f,e)}function mr(n,e,r){if(!n.eql(n.sqr(e),r))throw new Error("Cannot find square root")}function _i(n,e){const r=(n.ORDER+Wt)/Si,t=n.pow(e,r);return mr(n,t,e),t}function Os(n,e){const r=(n.ORDER-Bi)/Ai,t=n.mul(e,be),f=n.pow(t,r),s=n.mul(e,f),c=n.mul(n.mul(s,be),f),b=n.mul(s,n.sub(c,n.ONE));return mr(n,b,e),b}function Us(n){const e=Be(n),r=ki(n),t=r(e,e.neg(e.ONE)),f=r(e,t),s=r(e,e.neg(t)),c=(n+Rs)/Ii;return(b,g)=>{let A=b.pow(g,c),T=b.mul(A,t);const F=b.mul(A,f),I=b.mul(A,s),_=b.eql(b.sqr(T),g),N=b.eql(b.sqr(F),g);A=b.cmov(A,T,_),T=b.cmov(I,F,N);const O=b.eql(b.sqr(T),g),z=b.cmov(A,T,O);return mr(b,z,g),z}}function ki(n){if(n<Mi)throw new Error("sqrt is not defined for small field");let e=n-Wt,r=0;for(;e%be===re;)e/=be,r++;let t=be;const f=Be(n);for(;Gr(f,t)===1;)if(t++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return _i;let s=f.pow(t,e);const c=(e+Wt)/be;return function(g,A){if(g.is0(A))return A;if(Gr(g,A)!==1)throw new Error("Cannot find square root");let T=r,F=g.mul(g.ONE,s),I=g.pow(A,e),_=g.pow(A,c);for(;!g.eql(I,g.ONE);){if(g.is0(I))return g.ZERO;let N=1,O=g.sqr(I);for(;!g.eql(O,g.ONE);)if(N++,O=g.sqr(O),N===T)throw new Error("Cannot find square root");const z=Wt<<BigInt(T-N-1),q=g.pow(F,z);T=N,F=g.sqr(q),I=g.mul(I,F),_=g.mul(_,q)}return _}}function Ts(n){return n%Si===Mi?_i:n%Ai===Bi?Os:n%Ii===Ls?Us(n):ki(n)}const Cs=(n,e)=>(jt(n,e)&Wt)===Wt,qs=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ns(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=qs.reduce((t,f)=>(t[f]="function",t),e);return Ze(n,r),n}function zs(n,e,r){if(r<re)throw new Error("invalid exponent, negatives unsupported");if(r===re)return n.ONE;if(r===Wt)return e;let t=n.ONE,f=e;for(;r>re;)r&Wt&&(t=n.mul(t,f)),f=n.sqr(f),r>>=Wt;return t}function Ri(n,e,r=!1){const t=new Array(e.length).fill(r?n.ZERO:void 0),f=e.reduce((c,b,g)=>n.is0(b)?c:(t[g]=c,n.mul(c,b)),n.ONE),s=n.inv(f);return e.reduceRight((c,b,g)=>n.is0(b)?c:(t[g]=n.mul(c,t[g]),n.mul(c,b)),s),t}function Gr(n,e){const r=(n.ORDER-Wt)/be,t=n.pow(e,r),f=n.eql(t,n.ONE),s=n.eql(t,n.ZERO),c=n.eql(t,n.neg(n.ONE));if(!f&&!s&&!c)throw new Error("invalid Legendre symbol result");return f?1:s?0:-1}function Li(n,e){e!==void 0&&bs(e);const r=e!==void 0?e:n.toString(2).length,t=Math.ceil(r/8);return{nBitLength:r,nByteLength:t}}function Be(n,e,r=!1,t={}){if(n<=re)throw new Error("invalid field: expected ORDER > 0, got "+n);let f,s,c=!1,b;if(typeof e=="object"&&e!=null){if(t.sqrt||r)throw new Error("cannot specify opts in two arguments");const I=e;I.BITS&&(f=I.BITS),I.sqrt&&(s=I.sqrt),typeof I.isLE=="boolean"&&(r=I.isLE),typeof I.modFromBytes=="boolean"&&(c=I.modFromBytes),b=I.allowedLengths}else typeof e=="number"&&(f=e),t.sqrt&&(s=t.sqrt);const{nBitLength:g,nByteLength:A}=Li(n,f);if(A>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let T;const F=Object.freeze({ORDER:n,isLE:r,BITS:g,BYTES:A,MASK:$e(g),ZERO:re,ONE:Wt,allowedLengths:b,create:I=>jt(I,n),isValid:I=>{if(typeof I!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof I);return re<=I&&I<n},is0:I=>I===re,isValidNot0:I=>!F.is0(I)&&F.isValid(I),isOdd:I=>(I&Wt)===Wt,neg:I=>jt(-I,n),eql:(I,_)=>I===_,sqr:I=>jt(I*I,n),add:(I,_)=>jt(I+_,n),sub:(I,_)=>jt(I-_,n),mul:(I,_)=>jt(I*_,n),pow:(I,_)=>zs(F,I,_),div:(I,_)=>jt(I*Hr(_,n),n),sqrN:I=>I*I,addN:(I,_)=>I+_,subN:(I,_)=>I-_,mulN:(I,_)=>I*_,inv:I=>Hr(I,n),sqrt:s||(I=>(T||(T=Ts(n)),T(F,I))),toBytes:I=>r?xi(I,A):yr(I,A),fromBytes:(I,_=!0)=>{if(b){if(!b.includes(I.length)||I.length>A)throw new Error("Field.fromBytes: expected "+b+" bytes, got "+I.length);const O=new Uint8Array(A);O.set(I,r?0:O.length-I.length),I=O}if(I.length!==A)throw new Error("Field.fromBytes: expected "+A+" bytes, got "+I.length);let N=r?Ve(I):yn(I);if(c&&(N=jt(N,n)),!_&&!F.isValid(N))throw new Error("invalid field element: outside of range 0..ORDER");return N},invertBatch:I=>Ri(F,I),cmov:(I,_,N)=>N?_:I});return Object.freeze(F)}function Oi(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function Ui(n){const e=Oi(n);return e+Math.ceil(e/2)}function Ks(n,e,r=!1){const t=n.length,f=Oi(e),s=Ui(e);if(t<16||t<s||t>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+t);const c=r?Ve(n):yn(n),b=jt(c,e-Wt)+Wt;return r?xi(b,f):yr(b,f)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ce=BigInt(0),xe=BigInt(1);function sn(n,e){const r=e.negate();return n?r:e}function Ee(n,e){const r=Ri(n.Fp,e.map(t=>t.Z));return e.map((t,f)=>n.fromAffine(t.toAffine(r[f])))}function Ti(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function Zn(n,e){Ti(n,e);const r=Math.ceil(e/n)+1,t=2**(n-1),f=2**n,s=$e(n),c=BigInt(n);return{windows:r,windowSize:t,mask:s,maxNumber:f,shiftBy:c}}function Wr(n,e,r){const{windowSize:t,mask:f,maxNumber:s,shiftBy:c}=r;let b=Number(n&f),g=n>>c;b>t&&(b-=s,g+=xe);const A=e*t,T=A+Math.abs(b)-1,F=b===0,I=b<0,_=e%2!==0;return{nextN:g,offset:T,isZero:F,isNeg:I,isNegF:_,offsetF:A}}function Fs(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((r,t)=>{if(!(r instanceof e))throw new Error("invalid point at index "+t)})}function Ds(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((r,t)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+t)})}const jn=new WeakMap,Ci=new WeakMap;function Yn(n){return Ci.get(n)||1}function Xr(n){if(n!==Ce)throw new Error("invalid wNAF")}class qi{constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,t=this.ZERO){let f=e;for(;r>Ce;)r&xe&&(t=t.add(f)),f=f.double(),r>>=xe;return t}precomputeWindow(e,r){const{windows:t,windowSize:f}=Zn(r,this.bits),s=[];let c=e,b=c;for(let g=0;g<t;g++){b=c,s.push(b);for(let A=1;A<f;A++)b=b.add(c),s.push(b);c=b.double()}return s}wNAF(e,r,t){if(!this.Fn.isValid(t))throw new Error("invalid scalar");let f=this.ZERO,s=this.BASE;const c=Zn(e,this.bits);for(let b=0;b<c.windows;b++){const{nextN:g,offset:A,isZero:T,isNeg:F,isNegF:I,offsetF:_}=Wr(t,b,c);t=g,T?s=s.add(sn(I,r[_])):f=f.add(sn(F,r[A]))}return Xr(t),{p:f,f:s}}wNAFUnsafe(e,r,t,f=this.ZERO){const s=Zn(e,this.bits);for(let c=0;c<s.windows&&t!==Ce;c++){const{nextN:b,offset:g,isZero:A,isNeg:T}=Wr(t,c,s);if(t=b,!A){const F=r[g];f=f.add(T?F.negate():F)}}return Xr(t),f}getPrecomputes(e,r,t){let f=jn.get(r);return f||(f=this.precomputeWindow(r,e),e!==1&&(typeof t=="function"&&(f=t(f)),jn.set(r,f))),f}cached(e,r,t){const f=Yn(e);return this.wNAF(f,this.getPrecomputes(f,e,t),r)}unsafe(e,r,t,f){const s=Yn(e);return s===1?this._unsafeLadder(e,r,f):this.wNAFUnsafe(s,this.getPrecomputes(s,e,t),r,f)}createCache(e,r){Ti(r,this.bits),Ci.set(e,r),jn.delete(e)}hasCache(e){return Yn(e)!==1}}function Vs(n,e,r,t){let f=e,s=n.ZERO,c=n.ZERO;for(;r>Ce||t>Ce;)r&xe&&(s=s.add(f)),t&xe&&(c=c.add(f)),f=f.double(),r>>=xe,t>>=xe;return{p1:s,p2:c}}function Ni(n,e,r,t){Fs(r,n),Ds(t,e);const f=r.length,s=t.length;if(f!==s)throw new Error("arrays of points and scalars must have equal length");const c=n.ZERO,b=Ei(BigInt(f));let g=1;b>12?g=b-3:b>4?g=b-2:b>0&&(g=2);const A=$e(g),T=new Array(Number(A)+1).fill(c),F=Math.floor((e.BITS-1)/g)*g;let I=c;for(let _=F;_>=0;_-=g){T.fill(c);for(let O=0;O<s;O++){const z=t[O],q=Number(z>>BigInt(_)&A);T[q]=T[q].add(r[O])}let N=c;for(let O=T.length-1,z=c;O>0;O--)z=z.add(T[O]),N=N.add(z);if(I=I.add(N),_!==0)for(let O=0;O<g;O++)I=I.double()}return I}function Jr(n,e,r){if(e){if(e.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Ns(e),e}else return Be(n,{isLE:r})}function zi(n,e,r={},t){if(t===void 0&&(t=n==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${n} CURVE object`);for(const g of["p","n","h"]){const A=e[g];if(!(typeof A=="bigint"&&A>Ce))throw new Error(`CURVE.${g} must be positive bigint`)}const f=Jr(e.p,r.Fp,t),s=Jr(e.n,r.Fn,t),b=["Gx","Gy","a",n==="weierstrass"?"b":"d"];for(const g of b)if(!f.isValid(e[g]))throw new Error(`CURVE.${g} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:f,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const me=BigInt(0),Ht=BigInt(1),Hn=BigInt(2),Ps=BigInt(8);function $s(n,e,r,t){const f=n.sqr(r),s=n.sqr(t),c=n.add(n.mul(e.a,f),s),b=n.add(n.ONE,n.mul(e.d,n.mul(f,s)));return n.eql(c,b)}function Zs(n,e={}){const r=zi("edwards",n,e,e.FpFnLE),{Fp:t,Fn:f}=r;let s=r.CURVE;const{h:c}=s;Ze(e,{},{uvRatio:"function"});const b=Hn<<BigInt(f.BYTES*8)-Ht,g=z=>t.create(z),A=e.uvRatio||((z,q)=>{try{return{isValid:!0,value:t.sqrt(t.div(z,q))}}catch{return{isValid:!1,value:me}}});if(!$s(t,s,s.Gx,s.Gy))throw new Error("bad curve params: generator point");function T(z,q,V=!1){const D=V?Ht:me;return ur("coordinate "+z,q,D,b),q}function F(z){if(!(z instanceof N))throw new Error("ExtendedPoint expected")}const I=rn((z,q)=>{const{X:V,Y:D,Z:G}=z,X=z.is0();q==null&&(q=X?Ps:t.inv(G));const H=g(V*q),tt=g(D*q),J=t.mul(G,q);if(X)return{x:me,y:Ht};if(J!==Ht)throw new Error("invZ was invalid");return{x:H,y:tt}}),_=rn(z=>{const{a:q,d:V}=s;if(z.is0())throw new Error("bad point: ZERO");const{X:D,Y:G,Z:X,T:H}=z,tt=g(D*D),J=g(G*G),M=g(X*X),S=g(M*M),L=g(tt*q),U=g(M*g(L+J)),h=g(S+g(V*g(tt*J)));if(U!==h)throw new Error("bad point: equation left != right (1)");const i=g(D*G),u=g(X*H);if(i!==u)throw new Error("bad point: equation left != right (2)");return!0});class N{constructor(q,V,D,G){this.X=T("x",q),this.Y=T("y",V),this.Z=T("z",D,!0),this.T=T("t",G),Object.freeze(this)}static CURVE(){return s}static fromAffine(q){if(q instanceof N)throw new Error("extended point not allowed");const{x:V,y:D}=q||{};return T("x",V),T("y",D),new N(V,D,Ht,g(V*D))}static fromBytes(q,V=!1){const D=t.BYTES,{a:G,d:X}=s;q=Yr(ae(q,D,"point")),Se(V,"zip215");const H=Yr(q),tt=q[D-1];H[D-1]=tt&-129;const J=Ve(H),M=V?b:t.ORDER;ur("point.y",J,me,M);const S=g(J*J),L=g(S-Ht),U=g(X*S-G);let{isValid:h,value:i}=A(L,U);if(!h)throw new Error("bad point: invalid y coordinate");const u=(i&Ht)===Ht,l=(tt&128)!==0;if(!V&&i===me&&l)throw new Error("bad point: x=0 and x_0=1");return l!==u&&(i=g(-i)),N.fromAffine({x:i,y:J})}static fromHex(q,V=!1){return N.fromBytes(ct("point",q),V)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(q=8,V=!0){return O.createCache(this,q),V||this.multiply(Hn),this}assertValidity(){_(this)}equals(q){F(q);const{X:V,Y:D,Z:G}=this,{X,Y:H,Z:tt}=q,J=g(V*tt),M=g(X*G),S=g(D*tt),L=g(H*G);return J===M&&S===L}is0(){return this.equals(N.ZERO)}negate(){return new N(g(-this.X),this.Y,this.Z,g(-this.T))}double(){const{a:q}=s,{X:V,Y:D,Z:G}=this,X=g(V*V),H=g(D*D),tt=g(Hn*g(G*G)),J=g(q*X),M=V+D,S=g(g(M*M)-X-H),L=J+H,U=L-tt,h=J-H,i=g(S*U),u=g(L*h),l=g(S*h),p=g(U*L);return new N(i,u,p,l)}add(q){F(q);const{a:V,d:D}=s,{X:G,Y:X,Z:H,T:tt}=this,{X:J,Y:M,Z:S,T:L}=q,U=g(G*J),h=g(X*M),i=g(tt*D*L),u=g(H*S),l=g((G+X)*(J+M)-U-h),p=u-i,m=u+i,v=g(h-V*U),E=g(l*p),y=g(m*v),o=g(l*v),a=g(p*m);return new N(E,y,a,o)}subtract(q){return this.add(q.negate())}multiply(q){if(!f.isValidNot0(q))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:V,f:D}=O.cached(this,q,G=>Ee(N,G));return Ee(N,[V,D])[0]}multiplyUnsafe(q,V=N.ZERO){if(!f.isValid(q))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return q===me?N.ZERO:this.is0()||q===Ht?this:O.unsafe(this,q,D=>Ee(N,D),V)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return O.unsafe(this,s.n).is0()}toAffine(q){return I(this,q)}clearCofactor(){return c===Ht?this:this.multiplyUnsafe(c)}toBytes(){const{x:q,y:V}=this.toAffine(),D=t.toBytes(V);return D[D.length-1]|=q&Ht?128:0,D}toHex(){return Me(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(q){return Ee(N,q)}static msm(q,V){return Ni(N,f,q,V)}_setWindowSize(q){this.precompute(q)}toRawBytes(){return this.toBytes()}}N.BASE=new N(s.Gx,s.Gy,Ht,g(s.Gx*s.Gy)),N.ZERO=new N(me,Ht,Ht,me),N.Fp=t,N.Fn=f;const O=new qi(N,f.BITS);return N.BASE.precompute(8),N}function js(n,e,r={}){if(typeof e!="function")throw new Error('"hash" function param is required');Ze(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:t}=r,{BASE:f,Fp:s,Fn:c}=n,b=r.randomBytes||dr,g=r.adjustScalarBytes||(M=>M),A=r.domain||((M,S,L)=>{if(Se(L,"phflag"),S.length||L)throw new Error("Contexts/pre-hash are not supported");return M});function T(M){return c.create(Ve(M))}function F(M){const S=D.secretKey;M=ct("private key",M,S);const L=ct("hashed private key",e(M),2*S),U=g(L.slice(0,S)),h=L.slice(S,2*S),i=T(U);return{head:U,prefix:h,scalar:i}}function I(M){const{head:S,prefix:L,scalar:U}=F(M),h=f.multiply(U),i=h.toBytes();return{head:S,prefix:L,scalar:U,point:h,pointBytes:i}}function _(M){return I(M).pointBytes}function N(M=Uint8Array.of(),...S){const L=ce(...S);return T(e(A(L,ct("context",M),!!t)))}function O(M,S,L={}){M=ct("message",M),t&&(M=t(M));const{prefix:U,scalar:h,pointBytes:i}=I(S),u=N(L.context,U,M),l=f.multiply(u).toBytes(),p=N(L.context,l,i,M),m=c.create(u+p*h);if(!c.isValid(m))throw new Error("sign failed: invalid s");const v=ce(l,c.toBytes(m));return ae(v,D.signature,"result")}const z={zip215:!0};function q(M,S,L,U=z){const{context:h,zip215:i}=U,u=D.signature;M=ct("signature",M,u),S=ct("message",S),L=ct("publicKey",L,D.publicKey),i!==void 0&&Se(i,"zip215"),t&&(S=t(S));const l=u/2,p=M.subarray(0,l),m=Ve(M.subarray(l,u));let v,E,y;try{v=n.fromBytes(L,i),E=n.fromBytes(p,i),y=f.multiplyUnsafe(m)}catch{return!1}if(!i&&v.isSmallOrder())return!1;const o=N(h,E.toBytes(),v.toBytes(),S);return E.add(v.multiplyUnsafe(o)).subtract(y).clearCofactor().is0()}const V=s.BYTES,D={secretKey:V,publicKey:V,signature:2*V,seed:V};function G(M=b(D.seed)){return ae(M,D.seed,"seed")}function X(M){const S=J.randomSecretKey(M);return{secretKey:S,publicKey:_(S)}}function H(M){return gn(M)&&M.length===c.BYTES}function tt(M,S){try{return!!n.fromBytes(M,S)}catch{return!1}}const J={getExtendedPublicKey:I,randomSecretKey:G,isValidSecretKey:H,isValidPublicKey:tt,toMontgomery(M){const{y:S}=n.fromBytes(M),L=D.publicKey,U=L===32;if(!U&&L!==57)throw new Error("only defined for 25519 and 448");const h=U?s.div(Ht+S,Ht-S):s.div(S-Ht,S+Ht);return s.toBytes(h)},toMontgomerySecret(M){const S=D.secretKey;ae(M,S);const L=e(M.subarray(0,S));return g(L).subarray(0,S)},randomPrivateKey:G,precompute(M=8,S=n.BASE){return S.precompute(M,!1)}};return Object.freeze({keygen:X,getPublicKey:_,sign:O,verify:q,utils:J,Point:n,lengths:D})}function Ys(n){const e={a:n.a,d:n.d,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},r=n.Fp,t=Be(e.n,n.nBitLength,!0),f={Fp:r,Fn:t,uvRatio:n.uvRatio},s={randomBytes:n.randomBytes,adjustScalarBytes:n.adjustScalarBytes,domain:n.domain,prehash:n.prehash,mapToCurve:n.mapToCurve};return{CURVE:e,curveOpts:f,hash:n.hash,eddsaOpts:s}}function Hs(n,e){const r=e.Point;return Object.assign({},e,{ExtendedPoint:r,CURVE:n,nBitLength:r.Fn.BITS,nByteLength:r.Fn.BYTES})}function Gs(n){const{CURVE:e,curveOpts:r,hash:t,eddsaOpts:f}=Ys(n),s=Zs(e,r),c=js(s,t,f);return Hs(n,c)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ws=BigInt(1),Qr=BigInt(2);BigInt(3);const Xs=BigInt(5),Js=BigInt(8),wr=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Ki={p:wr,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Js,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Qs(n){const e=BigInt(10),r=BigInt(20),t=BigInt(40),f=BigInt(80),s=wr,b=n*n%s*n%s,g=ft(b,Qr,s)*b%s,A=ft(g,Ws,s)*n%s,T=ft(A,Xs,s)*A%s,F=ft(T,e,s)*T%s,I=ft(F,r,s)*F%s,_=ft(I,t,s)*I%s,N=ft(_,f,s)*_%s,O=ft(N,f,s)*_%s,z=ft(O,e,s)*T%s;return{pow_p_5_8:ft(z,Qr,s)*n%s,b2:b}}function to(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const ti=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function eo(n,e){const r=wr,t=jt(e*e*e,r),f=jt(t*t*e,r),s=Qs(n*f).pow_p_5_8;let c=jt(n*t*s,r);const b=jt(e*c*c,r),g=c,A=jt(c*ti,r),T=b===n,F=b===jt(-n,r),I=b===jt(-n*ti,r);return T&&(c=g),(F||I)&&(c=A),Cs(c,r)&&(c=jt(-c,r)),{isValid:T||F,value:c}}const no=Be(Ki.p,{isLE:!0}),ro={...Ki,Fp:no,hash:xs,adjustScalarBytes:to,uvRatio:eo},je=Gs(ro);var tn={exports:{}},io=tn.exports,ei;function Fi(){return ei||(ei=1,(function(n){(function(e,r){function t(h,i){if(!h)throw new Error(i||"Assertion failed")}function f(h,i){h.super_=i;var u=function(){};u.prototype=i.prototype,h.prototype=new u,h.prototype.constructor=h}function s(h,i,u){if(s.isBN(h))return h;this.negative=0,this.words=null,this.length=0,this.red=null,h!==null&&((i==="le"||i==="be")&&(u=i,i=10),this._init(h||0,i||10,u||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var c;try{typeof window<"u"&&typeof window.Buffer<"u"?c=window.Buffer:c=Is.Buffer}catch{}s.isBN=function(i){return i instanceof s?!0:i!==null&&typeof i=="object"&&i.constructor.wordSize===s.wordSize&&Array.isArray(i.words)},s.max=function(i,u){return i.cmp(u)>0?i:u},s.min=function(i,u){return i.cmp(u)<0?i:u},s.prototype._init=function(i,u,l){if(typeof i=="number")return this._initNumber(i,u,l);if(typeof i=="object")return this._initArray(i,u,l);u==="hex"&&(u=16),t(u===(u|0)&&u>=2&&u<=36),i=i.toString().replace(/\s+/g,"");var p=0;i[0]==="-"&&(p++,this.negative=1),p<i.length&&(u===16?this._parseHex(i,p,l):(this._parseBase(i,u,p),l==="le"&&this._initArray(this.toArray(),u,l)))},s.prototype._initNumber=function(i,u,l){i<0&&(this.negative=1,i=-i),i<67108864?(this.words=[i&67108863],this.length=1):i<4503599627370496?(this.words=[i&67108863,i/67108864&67108863],this.length=2):(t(i<9007199254740992),this.words=[i&67108863,i/67108864&67108863,1],this.length=3),l==="le"&&this._initArray(this.toArray(),u,l)},s.prototype._initArray=function(i,u,l){if(t(typeof i.length=="number"),i.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(i.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var m,v,E=0;if(l==="be")for(p=i.length-1,m=0;p>=0;p-=3)v=i[p]|i[p-1]<<8|i[p-2]<<16,this.words[m]|=v<<E&67108863,this.words[m+1]=v>>>26-E&67108863,E+=24,E>=26&&(E-=26,m++);else if(l==="le")for(p=0,m=0;p<i.length;p+=3)v=i[p]|i[p+1]<<8|i[p+2]<<16,this.words[m]|=v<<E&67108863,this.words[m+1]=v>>>26-E&67108863,E+=24,E>=26&&(E-=26,m++);return this._strip()};function b(h,i){var u=h.charCodeAt(i);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;t(!1,"Invalid character in "+h)}function g(h,i,u){var l=b(h,u);return u-1>=i&&(l|=b(h,u-1)<<4),l}s.prototype._parseHex=function(i,u,l){this.length=Math.ceil((i.length-u)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var m=0,v=0,E;if(l==="be")for(p=i.length-1;p>=u;p-=2)E=g(i,u,p)<<m,this.words[v]|=E&67108863,m>=18?(m-=18,v+=1,this.words[v]|=E>>>26):m+=8;else{var y=i.length-u;for(p=y%2===0?u+1:u;p<i.length;p+=2)E=g(i,u,p)<<m,this.words[v]|=E&67108863,m>=18?(m-=18,v+=1,this.words[v]|=E>>>26):m+=8}this._strip()};function A(h,i,u,l){for(var p=0,m=0,v=Math.min(h.length,u),E=i;E<v;E++){var y=h.charCodeAt(E)-48;p*=l,y>=49?m=y-49+10:y>=17?m=y-17+10:m=y,t(y>=0&&m<l,"Invalid character"),p+=m}return p}s.prototype._parseBase=function(i,u,l){this.words=[0],this.length=1;for(var p=0,m=1;m<=67108863;m*=u)p++;p--,m=m/u|0;for(var v=i.length-l,E=v%p,y=Math.min(v,v-E)+l,o=0,a=l;a<y;a+=p)o=A(i,a,a+p,u),this.imuln(m),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(E!==0){var d=1;for(o=A(i,a,i.length,u),a=0;a<E;a++)d*=u;this.imuln(d),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this._strip()},s.prototype.copy=function(i){i.words=new Array(this.length);for(var u=0;u<this.length;u++)i.words[u]=this.words[u];i.length=this.length,i.negative=this.negative,i.red=this.red};function T(h,i){h.words=i.words,h.length=i.length,h.negative=i.negative,h.red=i.red}if(s.prototype._move=function(i){T(i,this)},s.prototype.clone=function(){var i=new s(null);return this.copy(i),i},s.prototype._expand=function(i){for(;this.length<i;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=F}catch{s.prototype.inspect=F}else s.prototype.inspect=F;function F(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var I=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(i,u){i=i||10,u=u|0||1;var l;if(i===16||i==="hex"){l="";for(var p=0,m=0,v=0;v<this.length;v++){var E=this.words[v],y=((E<<p|m)&16777215).toString(16);m=E>>>24-p&16777215,p+=2,p>=26&&(p-=26,v--),m!==0||v!==this.length-1?l=I[6-y.length]+y+l:l=y+l}for(m!==0&&(l=m.toString(16)+l);l.length%u!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}if(i===(i|0)&&i>=2&&i<=36){var o=_[i],a=N[i];l="";var d=this.clone();for(d.negative=0;!d.isZero();){var w=d.modrn(a).toString(i);d=d.idivn(a),d.isZero()?l=w+l:l=I[o-w.length]+w+l}for(this.isZero()&&(l="0"+l);l.length%u!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}t(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var i=this.words[0];return this.length===2?i+=this.words[1]*67108864:this.length===3&&this.words[2]===1?i+=4503599627370496+this.words[1]*67108864:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-i:i},s.prototype.toJSON=function(){return this.toString(16,2)},c&&(s.prototype.toBuffer=function(i,u){return this.toArrayLike(c,i,u)}),s.prototype.toArray=function(i,u){return this.toArrayLike(Array,i,u)};var O=function(i,u){return i.allocUnsafe?i.allocUnsafe(u):new i(u)};s.prototype.toArrayLike=function(i,u,l){this._strip();var p=this.byteLength(),m=l||Math.max(1,p);t(p<=m,"byte array longer than desired length"),t(m>0,"Requested array length <= 0");var v=O(i,m),E=u==="le"?"LE":"BE";return this["_toArrayLike"+E](v,p),v},s.prototype._toArrayLikeLE=function(i,u){for(var l=0,p=0,m=0,v=0;m<this.length;m++){var E=this.words[m]<<v|p;i[l++]=E&255,l<i.length&&(i[l++]=E>>8&255),l<i.length&&(i[l++]=E>>16&255),v===6?(l<i.length&&(i[l++]=E>>24&255),p=0,v=0):(p=E>>>24,v+=2)}if(l<i.length)for(i[l++]=p;l<i.length;)i[l++]=0},s.prototype._toArrayLikeBE=function(i,u){for(var l=i.length-1,p=0,m=0,v=0;m<this.length;m++){var E=this.words[m]<<v|p;i[l--]=E&255,l>=0&&(i[l--]=E>>8&255),l>=0&&(i[l--]=E>>16&255),v===6?(l>=0&&(i[l--]=E>>24&255),p=0,v=0):(p=E>>>24,v+=2)}if(l>=0)for(i[l--]=p;l>=0;)i[l--]=0},Math.clz32?s.prototype._countBits=function(i){return 32-Math.clz32(i)}:s.prototype._countBits=function(i){var u=i,l=0;return u>=4096&&(l+=13,u>>>=13),u>=64&&(l+=7,u>>>=7),u>=8&&(l+=4,u>>>=4),u>=2&&(l+=2,u>>>=2),l+u},s.prototype._zeroBits=function(i){if(i===0)return 26;var u=i,l=0;return(u&8191)===0&&(l+=13,u>>>=13),(u&127)===0&&(l+=7,u>>>=7),(u&15)===0&&(l+=4,u>>>=4),(u&3)===0&&(l+=2,u>>>=2),(u&1)===0&&l++,l},s.prototype.bitLength=function(){var i=this.words[this.length-1],u=this._countBits(i);return(this.length-1)*26+u};function z(h){for(var i=new Array(h.bitLength()),u=0;u<i.length;u++){var l=u/26|0,p=u%26;i[u]=h.words[l]>>>p&1}return i}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var i=0,u=0;u<this.length;u++){var l=this._zeroBits(this.words[u]);if(i+=l,l!==26)break}return i},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(i){return this.negative!==0?this.abs().inotn(i).iaddn(1):this.clone()},s.prototype.fromTwos=function(i){return this.testn(i-1)?this.notn(i).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(i){for(;this.length<i.length;)this.words[this.length++]=0;for(var u=0;u<i.length;u++)this.words[u]=this.words[u]|i.words[u];return this._strip()},s.prototype.ior=function(i){return t((this.negative|i.negative)===0),this.iuor(i)},s.prototype.or=function(i){return this.length>i.length?this.clone().ior(i):i.clone().ior(this)},s.prototype.uor=function(i){return this.length>i.length?this.clone().iuor(i):i.clone().iuor(this)},s.prototype.iuand=function(i){var u;this.length>i.length?u=i:u=this;for(var l=0;l<u.length;l++)this.words[l]=this.words[l]&i.words[l];return this.length=u.length,this._strip()},s.prototype.iand=function(i){return t((this.negative|i.negative)===0),this.iuand(i)},s.prototype.and=function(i){return this.length>i.length?this.clone().iand(i):i.clone().iand(this)},s.prototype.uand=function(i){return this.length>i.length?this.clone().iuand(i):i.clone().iuand(this)},s.prototype.iuxor=function(i){var u,l;this.length>i.length?(u=this,l=i):(u=i,l=this);for(var p=0;p<l.length;p++)this.words[p]=u.words[p]^l.words[p];if(this!==u)for(;p<u.length;p++)this.words[p]=u.words[p];return this.length=u.length,this._strip()},s.prototype.ixor=function(i){return t((this.negative|i.negative)===0),this.iuxor(i)},s.prototype.xor=function(i){return this.length>i.length?this.clone().ixor(i):i.clone().ixor(this)},s.prototype.uxor=function(i){return this.length>i.length?this.clone().iuxor(i):i.clone().iuxor(this)},s.prototype.inotn=function(i){t(typeof i=="number"&&i>=0);var u=Math.ceil(i/26)|0,l=i%26;this._expand(u),l>0&&u--;for(var p=0;p<u;p++)this.words[p]=~this.words[p]&67108863;return l>0&&(this.words[p]=~this.words[p]&67108863>>26-l),this._strip()},s.prototype.notn=function(i){return this.clone().inotn(i)},s.prototype.setn=function(i,u){t(typeof i=="number"&&i>=0);var l=i/26|0,p=i%26;return this._expand(l+1),u?this.words[l]=this.words[l]|1<<p:this.words[l]=this.words[l]&~(1<<p),this._strip()},s.prototype.iadd=function(i){var u;if(this.negative!==0&&i.negative===0)return this.negative=0,u=this.isub(i),this.negative^=1,this._normSign();if(this.negative===0&&i.negative!==0)return i.negative=0,u=this.isub(i),i.negative=1,u._normSign();var l,p;this.length>i.length?(l=this,p=i):(l=i,p=this);for(var m=0,v=0;v<p.length;v++)u=(l.words[v]|0)+(p.words[v]|0)+m,this.words[v]=u&67108863,m=u>>>26;for(;m!==0&&v<l.length;v++)u=(l.words[v]|0)+m,this.words[v]=u&67108863,m=u>>>26;if(this.length=l.length,m!==0)this.words[this.length]=m,this.length++;else if(l!==this)for(;v<l.length;v++)this.words[v]=l.words[v];return this},s.prototype.add=function(i){var u;return i.negative!==0&&this.negative===0?(i.negative=0,u=this.sub(i),i.negative^=1,u):i.negative===0&&this.negative!==0?(this.negative=0,u=i.sub(this),this.negative=1,u):this.length>i.length?this.clone().iadd(i):i.clone().iadd(this)},s.prototype.isub=function(i){if(i.negative!==0){i.negative=0;var u=this.iadd(i);return i.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(i),this.negative=1,this._normSign();var l=this.cmp(i);if(l===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,m;l>0?(p=this,m=i):(p=i,m=this);for(var v=0,E=0;E<m.length;E++)u=(p.words[E]|0)-(m.words[E]|0)+v,v=u>>26,this.words[E]=u&67108863;for(;v!==0&&E<p.length;E++)u=(p.words[E]|0)+v,v=u>>26,this.words[E]=u&67108863;if(v===0&&E<p.length&&p!==this)for(;E<p.length;E++)this.words[E]=p.words[E];return this.length=Math.max(this.length,E),p!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(i){return this.clone().isub(i)};function q(h,i,u){u.negative=i.negative^h.negative;var l=h.length+i.length|0;u.length=l,l=l-1|0;var p=h.words[0]|0,m=i.words[0]|0,v=p*m,E=v&67108863,y=v/67108864|0;u.words[0]=E;for(var o=1;o<l;o++){for(var a=y>>>26,d=y&67108863,w=Math.min(o,i.length-1),B=Math.max(0,o-h.length+1);B<=w;B++){var C=o-B|0;p=h.words[C]|0,m=i.words[B]|0,v=p*m+d,a+=v/67108864|0,d=v&67108863}u.words[o]=d|0,y=a|0}return y!==0?u.words[o]=y|0:u.length--,u._strip()}var V=function(i,u,l){var p=i.words,m=u.words,v=l.words,E=0,y,o,a,d=p[0]|0,w=d&8191,B=d>>>13,C=p[1]|0,$=C&8191,Y=C>>>13,it=p[2]|0,st=it&8191,at=it>>>13,De=p[3]|0,ht=De&8191,dt=De>>>13,Rr=p[4]|0,pt=Rr&8191,gt=Rr>>>13,Lr=p[5]|0,yt=Lr&8191,mt=Lr>>>13,Or=p[6]|0,wt=Or&8191,vt=Or>>>13,Ur=p[7]|0,bt=Ur&8191,xt=Ur>>>13,Tr=p[8]|0,Et=Tr&8191,Mt=Tr>>>13,Cr=p[9]|0,St=Cr&8191,Bt=Cr>>>13,qr=m[0]|0,At=qr&8191,It=qr>>>13,Nr=m[1]|0,_t=Nr&8191,kt=Nr>>>13,zr=m[2]|0,Rt=zr&8191,Lt=zr>>>13,Kr=m[3]|0,Ot=Kr&8191,Ut=Kr>>>13,Fr=m[4]|0,Tt=Fr&8191,Ct=Fr>>>13,Dr=m[5]|0,qt=Dr&8191,Nt=Dr>>>13,Vr=m[6]|0,zt=Vr&8191,Kt=Vr>>>13,Pr=m[7]|0,Ft=Pr&8191,Dt=Pr>>>13,$r=m[8]|0,Vt=$r&8191,Pt=$r>>>13,Zr=m[9]|0,$t=Zr&8191,Zt=Zr>>>13;l.negative=i.negative^u.negative,l.length=19,y=Math.imul(w,At),o=Math.imul(w,It),o=o+Math.imul(B,At)|0,a=Math.imul(B,It);var Sn=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,y=Math.imul($,At),o=Math.imul($,It),o=o+Math.imul(Y,At)|0,a=Math.imul(Y,It),y=y+Math.imul(w,_t)|0,o=o+Math.imul(w,kt)|0,o=o+Math.imul(B,_t)|0,a=a+Math.imul(B,kt)|0;var Bn=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,y=Math.imul(st,At),o=Math.imul(st,It),o=o+Math.imul(at,At)|0,a=Math.imul(at,It),y=y+Math.imul($,_t)|0,o=o+Math.imul($,kt)|0,o=o+Math.imul(Y,_t)|0,a=a+Math.imul(Y,kt)|0,y=y+Math.imul(w,Rt)|0,o=o+Math.imul(w,Lt)|0,o=o+Math.imul(B,Rt)|0,a=a+Math.imul(B,Lt)|0;var An=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(An>>>26)|0,An&=67108863,y=Math.imul(ht,At),o=Math.imul(ht,It),o=o+Math.imul(dt,At)|0,a=Math.imul(dt,It),y=y+Math.imul(st,_t)|0,o=o+Math.imul(st,kt)|0,o=o+Math.imul(at,_t)|0,a=a+Math.imul(at,kt)|0,y=y+Math.imul($,Rt)|0,o=o+Math.imul($,Lt)|0,o=o+Math.imul(Y,Rt)|0,a=a+Math.imul(Y,Lt)|0,y=y+Math.imul(w,Ot)|0,o=o+Math.imul(w,Ut)|0,o=o+Math.imul(B,Ot)|0,a=a+Math.imul(B,Ut)|0;var In=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(In>>>26)|0,In&=67108863,y=Math.imul(pt,At),o=Math.imul(pt,It),o=o+Math.imul(gt,At)|0,a=Math.imul(gt,It),y=y+Math.imul(ht,_t)|0,o=o+Math.imul(ht,kt)|0,o=o+Math.imul(dt,_t)|0,a=a+Math.imul(dt,kt)|0,y=y+Math.imul(st,Rt)|0,o=o+Math.imul(st,Lt)|0,o=o+Math.imul(at,Rt)|0,a=a+Math.imul(at,Lt)|0,y=y+Math.imul($,Ot)|0,o=o+Math.imul($,Ut)|0,o=o+Math.imul(Y,Ot)|0,a=a+Math.imul(Y,Ut)|0,y=y+Math.imul(w,Tt)|0,o=o+Math.imul(w,Ct)|0,o=o+Math.imul(B,Tt)|0,a=a+Math.imul(B,Ct)|0;var _n=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(_n>>>26)|0,_n&=67108863,y=Math.imul(yt,At),o=Math.imul(yt,It),o=o+Math.imul(mt,At)|0,a=Math.imul(mt,It),y=y+Math.imul(pt,_t)|0,o=o+Math.imul(pt,kt)|0,o=o+Math.imul(gt,_t)|0,a=a+Math.imul(gt,kt)|0,y=y+Math.imul(ht,Rt)|0,o=o+Math.imul(ht,Lt)|0,o=o+Math.imul(dt,Rt)|0,a=a+Math.imul(dt,Lt)|0,y=y+Math.imul(st,Ot)|0,o=o+Math.imul(st,Ut)|0,o=o+Math.imul(at,Ot)|0,a=a+Math.imul(at,Ut)|0,y=y+Math.imul($,Tt)|0,o=o+Math.imul($,Ct)|0,o=o+Math.imul(Y,Tt)|0,a=a+Math.imul(Y,Ct)|0,y=y+Math.imul(w,qt)|0,o=o+Math.imul(w,Nt)|0,o=o+Math.imul(B,qt)|0,a=a+Math.imul(B,Nt)|0;var kn=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(kn>>>26)|0,kn&=67108863,y=Math.imul(wt,At),o=Math.imul(wt,It),o=o+Math.imul(vt,At)|0,a=Math.imul(vt,It),y=y+Math.imul(yt,_t)|0,o=o+Math.imul(yt,kt)|0,o=o+Math.imul(mt,_t)|0,a=a+Math.imul(mt,kt)|0,y=y+Math.imul(pt,Rt)|0,o=o+Math.imul(pt,Lt)|0,o=o+Math.imul(gt,Rt)|0,a=a+Math.imul(gt,Lt)|0,y=y+Math.imul(ht,Ot)|0,o=o+Math.imul(ht,Ut)|0,o=o+Math.imul(dt,Ot)|0,a=a+Math.imul(dt,Ut)|0,y=y+Math.imul(st,Tt)|0,o=o+Math.imul(st,Ct)|0,o=o+Math.imul(at,Tt)|0,a=a+Math.imul(at,Ct)|0,y=y+Math.imul($,qt)|0,o=o+Math.imul($,Nt)|0,o=o+Math.imul(Y,qt)|0,a=a+Math.imul(Y,Nt)|0,y=y+Math.imul(w,zt)|0,o=o+Math.imul(w,Kt)|0,o=o+Math.imul(B,zt)|0,a=a+Math.imul(B,Kt)|0;var Rn=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,y=Math.imul(bt,At),o=Math.imul(bt,It),o=o+Math.imul(xt,At)|0,a=Math.imul(xt,It),y=y+Math.imul(wt,_t)|0,o=o+Math.imul(wt,kt)|0,o=o+Math.imul(vt,_t)|0,a=a+Math.imul(vt,kt)|0,y=y+Math.imul(yt,Rt)|0,o=o+Math.imul(yt,Lt)|0,o=o+Math.imul(mt,Rt)|0,a=a+Math.imul(mt,Lt)|0,y=y+Math.imul(pt,Ot)|0,o=o+Math.imul(pt,Ut)|0,o=o+Math.imul(gt,Ot)|0,a=a+Math.imul(gt,Ut)|0,y=y+Math.imul(ht,Tt)|0,o=o+Math.imul(ht,Ct)|0,o=o+Math.imul(dt,Tt)|0,a=a+Math.imul(dt,Ct)|0,y=y+Math.imul(st,qt)|0,o=o+Math.imul(st,Nt)|0,o=o+Math.imul(at,qt)|0,a=a+Math.imul(at,Nt)|0,y=y+Math.imul($,zt)|0,o=o+Math.imul($,Kt)|0,o=o+Math.imul(Y,zt)|0,a=a+Math.imul(Y,Kt)|0,y=y+Math.imul(w,Ft)|0,o=o+Math.imul(w,Dt)|0,o=o+Math.imul(B,Ft)|0,a=a+Math.imul(B,Dt)|0;var Ln=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,y=Math.imul(Et,At),o=Math.imul(Et,It),o=o+Math.imul(Mt,At)|0,a=Math.imul(Mt,It),y=y+Math.imul(bt,_t)|0,o=o+Math.imul(bt,kt)|0,o=o+Math.imul(xt,_t)|0,a=a+Math.imul(xt,kt)|0,y=y+Math.imul(wt,Rt)|0,o=o+Math.imul(wt,Lt)|0,o=o+Math.imul(vt,Rt)|0,a=a+Math.imul(vt,Lt)|0,y=y+Math.imul(yt,Ot)|0,o=o+Math.imul(yt,Ut)|0,o=o+Math.imul(mt,Ot)|0,a=a+Math.imul(mt,Ut)|0,y=y+Math.imul(pt,Tt)|0,o=o+Math.imul(pt,Ct)|0,o=o+Math.imul(gt,Tt)|0,a=a+Math.imul(gt,Ct)|0,y=y+Math.imul(ht,qt)|0,o=o+Math.imul(ht,Nt)|0,o=o+Math.imul(dt,qt)|0,a=a+Math.imul(dt,Nt)|0,y=y+Math.imul(st,zt)|0,o=o+Math.imul(st,Kt)|0,o=o+Math.imul(at,zt)|0,a=a+Math.imul(at,Kt)|0,y=y+Math.imul($,Ft)|0,o=o+Math.imul($,Dt)|0,o=o+Math.imul(Y,Ft)|0,a=a+Math.imul(Y,Dt)|0,y=y+Math.imul(w,Vt)|0,o=o+Math.imul(w,Pt)|0,o=o+Math.imul(B,Vt)|0,a=a+Math.imul(B,Pt)|0;var On=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(On>>>26)|0,On&=67108863,y=Math.imul(St,At),o=Math.imul(St,It),o=o+Math.imul(Bt,At)|0,a=Math.imul(Bt,It),y=y+Math.imul(Et,_t)|0,o=o+Math.imul(Et,kt)|0,o=o+Math.imul(Mt,_t)|0,a=a+Math.imul(Mt,kt)|0,y=y+Math.imul(bt,Rt)|0,o=o+Math.imul(bt,Lt)|0,o=o+Math.imul(xt,Rt)|0,a=a+Math.imul(xt,Lt)|0,y=y+Math.imul(wt,Ot)|0,o=o+Math.imul(wt,Ut)|0,o=o+Math.imul(vt,Ot)|0,a=a+Math.imul(vt,Ut)|0,y=y+Math.imul(yt,Tt)|0,o=o+Math.imul(yt,Ct)|0,o=o+Math.imul(mt,Tt)|0,a=a+Math.imul(mt,Ct)|0,y=y+Math.imul(pt,qt)|0,o=o+Math.imul(pt,Nt)|0,o=o+Math.imul(gt,qt)|0,a=a+Math.imul(gt,Nt)|0,y=y+Math.imul(ht,zt)|0,o=o+Math.imul(ht,Kt)|0,o=o+Math.imul(dt,zt)|0,a=a+Math.imul(dt,Kt)|0,y=y+Math.imul(st,Ft)|0,o=o+Math.imul(st,Dt)|0,o=o+Math.imul(at,Ft)|0,a=a+Math.imul(at,Dt)|0,y=y+Math.imul($,Vt)|0,o=o+Math.imul($,Pt)|0,o=o+Math.imul(Y,Vt)|0,a=a+Math.imul(Y,Pt)|0,y=y+Math.imul(w,$t)|0,o=o+Math.imul(w,Zt)|0,o=o+Math.imul(B,$t)|0,a=a+Math.imul(B,Zt)|0;var Un=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(Un>>>26)|0,Un&=67108863,y=Math.imul(St,_t),o=Math.imul(St,kt),o=o+Math.imul(Bt,_t)|0,a=Math.imul(Bt,kt),y=y+Math.imul(Et,Rt)|0,o=o+Math.imul(Et,Lt)|0,o=o+Math.imul(Mt,Rt)|0,a=a+Math.imul(Mt,Lt)|0,y=y+Math.imul(bt,Ot)|0,o=o+Math.imul(bt,Ut)|0,o=o+Math.imul(xt,Ot)|0,a=a+Math.imul(xt,Ut)|0,y=y+Math.imul(wt,Tt)|0,o=o+Math.imul(wt,Ct)|0,o=o+Math.imul(vt,Tt)|0,a=a+Math.imul(vt,Ct)|0,y=y+Math.imul(yt,qt)|0,o=o+Math.imul(yt,Nt)|0,o=o+Math.imul(mt,qt)|0,a=a+Math.imul(mt,Nt)|0,y=y+Math.imul(pt,zt)|0,o=o+Math.imul(pt,Kt)|0,o=o+Math.imul(gt,zt)|0,a=a+Math.imul(gt,Kt)|0,y=y+Math.imul(ht,Ft)|0,o=o+Math.imul(ht,Dt)|0,o=o+Math.imul(dt,Ft)|0,a=a+Math.imul(dt,Dt)|0,y=y+Math.imul(st,Vt)|0,o=o+Math.imul(st,Pt)|0,o=o+Math.imul(at,Vt)|0,a=a+Math.imul(at,Pt)|0,y=y+Math.imul($,$t)|0,o=o+Math.imul($,Zt)|0,o=o+Math.imul(Y,$t)|0,a=a+Math.imul(Y,Zt)|0;var Tn=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,y=Math.imul(St,Rt),o=Math.imul(St,Lt),o=o+Math.imul(Bt,Rt)|0,a=Math.imul(Bt,Lt),y=y+Math.imul(Et,Ot)|0,o=o+Math.imul(Et,Ut)|0,o=o+Math.imul(Mt,Ot)|0,a=a+Math.imul(Mt,Ut)|0,y=y+Math.imul(bt,Tt)|0,o=o+Math.imul(bt,Ct)|0,o=o+Math.imul(xt,Tt)|0,a=a+Math.imul(xt,Ct)|0,y=y+Math.imul(wt,qt)|0,o=o+Math.imul(wt,Nt)|0,o=o+Math.imul(vt,qt)|0,a=a+Math.imul(vt,Nt)|0,y=y+Math.imul(yt,zt)|0,o=o+Math.imul(yt,Kt)|0,o=o+Math.imul(mt,zt)|0,a=a+Math.imul(mt,Kt)|0,y=y+Math.imul(pt,Ft)|0,o=o+Math.imul(pt,Dt)|0,o=o+Math.imul(gt,Ft)|0,a=a+Math.imul(gt,Dt)|0,y=y+Math.imul(ht,Vt)|0,o=o+Math.imul(ht,Pt)|0,o=o+Math.imul(dt,Vt)|0,a=a+Math.imul(dt,Pt)|0,y=y+Math.imul(st,$t)|0,o=o+Math.imul(st,Zt)|0,o=o+Math.imul(at,$t)|0,a=a+Math.imul(at,Zt)|0;var Cn=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,y=Math.imul(St,Ot),o=Math.imul(St,Ut),o=o+Math.imul(Bt,Ot)|0,a=Math.imul(Bt,Ut),y=y+Math.imul(Et,Tt)|0,o=o+Math.imul(Et,Ct)|0,o=o+Math.imul(Mt,Tt)|0,a=a+Math.imul(Mt,Ct)|0,y=y+Math.imul(bt,qt)|0,o=o+Math.imul(bt,Nt)|0,o=o+Math.imul(xt,qt)|0,a=a+Math.imul(xt,Nt)|0,y=y+Math.imul(wt,zt)|0,o=o+Math.imul(wt,Kt)|0,o=o+Math.imul(vt,zt)|0,a=a+Math.imul(vt,Kt)|0,y=y+Math.imul(yt,Ft)|0,o=o+Math.imul(yt,Dt)|0,o=o+Math.imul(mt,Ft)|0,a=a+Math.imul(mt,Dt)|0,y=y+Math.imul(pt,Vt)|0,o=o+Math.imul(pt,Pt)|0,o=o+Math.imul(gt,Vt)|0,a=a+Math.imul(gt,Pt)|0,y=y+Math.imul(ht,$t)|0,o=o+Math.imul(ht,Zt)|0,o=o+Math.imul(dt,$t)|0,a=a+Math.imul(dt,Zt)|0;var qn=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(qn>>>26)|0,qn&=67108863,y=Math.imul(St,Tt),o=Math.imul(St,Ct),o=o+Math.imul(Bt,Tt)|0,a=Math.imul(Bt,Ct),y=y+Math.imul(Et,qt)|0,o=o+Math.imul(Et,Nt)|0,o=o+Math.imul(Mt,qt)|0,a=a+Math.imul(Mt,Nt)|0,y=y+Math.imul(bt,zt)|0,o=o+Math.imul(bt,Kt)|0,o=o+Math.imul(xt,zt)|0,a=a+Math.imul(xt,Kt)|0,y=y+Math.imul(wt,Ft)|0,o=o+Math.imul(wt,Dt)|0,o=o+Math.imul(vt,Ft)|0,a=a+Math.imul(vt,Dt)|0,y=y+Math.imul(yt,Vt)|0,o=o+Math.imul(yt,Pt)|0,o=o+Math.imul(mt,Vt)|0,a=a+Math.imul(mt,Pt)|0,y=y+Math.imul(pt,$t)|0,o=o+Math.imul(pt,Zt)|0,o=o+Math.imul(gt,$t)|0,a=a+Math.imul(gt,Zt)|0;var Nn=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,y=Math.imul(St,qt),o=Math.imul(St,Nt),o=o+Math.imul(Bt,qt)|0,a=Math.imul(Bt,Nt),y=y+Math.imul(Et,zt)|0,o=o+Math.imul(Et,Kt)|0,o=o+Math.imul(Mt,zt)|0,a=a+Math.imul(Mt,Kt)|0,y=y+Math.imul(bt,Ft)|0,o=o+Math.imul(bt,Dt)|0,o=o+Math.imul(xt,Ft)|0,a=a+Math.imul(xt,Dt)|0,y=y+Math.imul(wt,Vt)|0,o=o+Math.imul(wt,Pt)|0,o=o+Math.imul(vt,Vt)|0,a=a+Math.imul(vt,Pt)|0,y=y+Math.imul(yt,$t)|0,o=o+Math.imul(yt,Zt)|0,o=o+Math.imul(mt,$t)|0,a=a+Math.imul(mt,Zt)|0;var zn=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(zn>>>26)|0,zn&=67108863,y=Math.imul(St,zt),o=Math.imul(St,Kt),o=o+Math.imul(Bt,zt)|0,a=Math.imul(Bt,Kt),y=y+Math.imul(Et,Ft)|0,o=o+Math.imul(Et,Dt)|0,o=o+Math.imul(Mt,Ft)|0,a=a+Math.imul(Mt,Dt)|0,y=y+Math.imul(bt,Vt)|0,o=o+Math.imul(bt,Pt)|0,o=o+Math.imul(xt,Vt)|0,a=a+Math.imul(xt,Pt)|0,y=y+Math.imul(wt,$t)|0,o=o+Math.imul(wt,Zt)|0,o=o+Math.imul(vt,$t)|0,a=a+Math.imul(vt,Zt)|0;var Kn=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,y=Math.imul(St,Ft),o=Math.imul(St,Dt),o=o+Math.imul(Bt,Ft)|0,a=Math.imul(Bt,Dt),y=y+Math.imul(Et,Vt)|0,o=o+Math.imul(Et,Pt)|0,o=o+Math.imul(Mt,Vt)|0,a=a+Math.imul(Mt,Pt)|0,y=y+Math.imul(bt,$t)|0,o=o+Math.imul(bt,Zt)|0,o=o+Math.imul(xt,$t)|0,a=a+Math.imul(xt,Zt)|0;var Fn=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,y=Math.imul(St,Vt),o=Math.imul(St,Pt),o=o+Math.imul(Bt,Vt)|0,a=Math.imul(Bt,Pt),y=y+Math.imul(Et,$t)|0,o=o+Math.imul(Et,Zt)|0,o=o+Math.imul(Mt,$t)|0,a=a+Math.imul(Mt,Zt)|0;var Dn=(E+y|0)+((o&8191)<<13)|0;E=(a+(o>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,y=Math.imul(St,$t),o=Math.imul(St,Zt),o=o+Math.imul(Bt,$t)|0,a=Math.imul(Bt,Zt);var Vn=(E+y|0)+((o&8191)<<13)|0;return E=(a+(o>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,v[0]=Sn,v[1]=Bn,v[2]=An,v[3]=In,v[4]=_n,v[5]=kn,v[6]=Rn,v[7]=Ln,v[8]=On,v[9]=Un,v[10]=Tn,v[11]=Cn,v[12]=qn,v[13]=Nn,v[14]=zn,v[15]=Kn,v[16]=Fn,v[17]=Dn,v[18]=Vn,E!==0&&(v[19]=E,l.length++),l};Math.imul||(V=q);function D(h,i,u){u.negative=i.negative^h.negative,u.length=h.length+i.length;for(var l=0,p=0,m=0;m<u.length-1;m++){var v=p;p=0;for(var E=l&67108863,y=Math.min(m,i.length-1),o=Math.max(0,m-h.length+1);o<=y;o++){var a=m-o,d=h.words[a]|0,w=i.words[o]|0,B=d*w,C=B&67108863;v=v+(B/67108864|0)|0,C=C+E|0,E=C&67108863,v=v+(C>>>26)|0,p+=v>>>26,v&=67108863}u.words[m]=E,l=v,v=p}return l!==0?u.words[m]=l:u.length--,u._strip()}function G(h,i,u){return D(h,i,u)}s.prototype.mulTo=function(i,u){var l,p=this.length+i.length;return this.length===10&&i.length===10?l=V(this,i,u):p<63?l=q(this,i,u):p<1024?l=D(this,i,u):l=G(this,i,u),l},s.prototype.mul=function(i){var u=new s(null);return u.words=new Array(this.length+i.length),this.mulTo(i,u)},s.prototype.mulf=function(i){var u=new s(null);return u.words=new Array(this.length+i.length),G(this,i,u)},s.prototype.imul=function(i){return this.clone().mulTo(i,this)},s.prototype.imuln=function(i){var u=i<0;u&&(i=-i),t(typeof i=="number"),t(i<67108864);for(var l=0,p=0;p<this.length;p++){var m=(this.words[p]|0)*i,v=(m&67108863)+(l&67108863);l>>=26,l+=m/67108864|0,l+=v>>>26,this.words[p]=v&67108863}return l!==0&&(this.words[p]=l,this.length++),this.length=i===0?1:this.length,u?this.ineg():this},s.prototype.muln=function(i){return this.clone().imuln(i)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(i){var u=z(i);if(u.length===0)return new s(1);for(var l=this,p=0;p<u.length&&u[p]===0;p++,l=l.sqr());if(++p<u.length)for(var m=l.sqr();p<u.length;p++,m=m.sqr())u[p]!==0&&(l=l.mul(m));return l},s.prototype.iushln=function(i){t(typeof i=="number"&&i>=0);var u=i%26,l=(i-u)/26,p=67108863>>>26-u<<26-u,m;if(u!==0){var v=0;for(m=0;m<this.length;m++){var E=this.words[m]&p,y=(this.words[m]|0)-E<<u;this.words[m]=y|v,v=E>>>26-u}v&&(this.words[m]=v,this.length++)}if(l!==0){for(m=this.length-1;m>=0;m--)this.words[m+l]=this.words[m];for(m=0;m<l;m++)this.words[m]=0;this.length+=l}return this._strip()},s.prototype.ishln=function(i){return t(this.negative===0),this.iushln(i)},s.prototype.iushrn=function(i,u,l){t(typeof i=="number"&&i>=0);var p;u?p=(u-u%26)/26:p=0;var m=i%26,v=Math.min((i-m)/26,this.length),E=67108863^67108863>>>m<<m,y=l;if(p-=v,p=Math.max(0,p),y){for(var o=0;o<v;o++)y.words[o]=this.words[o];y.length=v}if(v!==0)if(this.length>v)for(this.length-=v,o=0;o<this.length;o++)this.words[o]=this.words[o+v];else this.words[0]=0,this.length=1;var a=0;for(o=this.length-1;o>=0&&(a!==0||o>=p);o--){var d=this.words[o]|0;this.words[o]=a<<26-m|d>>>m,a=d&E}return y&&a!==0&&(y.words[y.length++]=a),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(i,u,l){return t(this.negative===0),this.iushrn(i,u,l)},s.prototype.shln=function(i){return this.clone().ishln(i)},s.prototype.ushln=function(i){return this.clone().iushln(i)},s.prototype.shrn=function(i){return this.clone().ishrn(i)},s.prototype.ushrn=function(i){return this.clone().iushrn(i)},s.prototype.testn=function(i){t(typeof i=="number"&&i>=0);var u=i%26,l=(i-u)/26,p=1<<u;if(this.length<=l)return!1;var m=this.words[l];return!!(m&p)},s.prototype.imaskn=function(i){t(typeof i=="number"&&i>=0);var u=i%26,l=(i-u)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=l)return this;if(u!==0&&l++,this.length=Math.min(l,this.length),u!==0){var p=67108863^67108863>>>u<<u;this.words[this.length-1]&=p}return this._strip()},s.prototype.maskn=function(i){return this.clone().imaskn(i)},s.prototype.iaddn=function(i){return t(typeof i=="number"),t(i<67108864),i<0?this.isubn(-i):this.negative!==0?this.length===1&&(this.words[0]|0)<=i?(this.words[0]=i-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(i),this.negative=1,this):this._iaddn(i)},s.prototype._iaddn=function(i){this.words[0]+=i;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},s.prototype.isubn=function(i){if(t(typeof i=="number"),t(i<67108864),i<0)return this.iaddn(-i);if(this.negative!==0)return this.negative=0,this.iaddn(i),this.negative=1,this;if(this.words[0]-=i,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},s.prototype.addn=function(i){return this.clone().iaddn(i)},s.prototype.subn=function(i){return this.clone().isubn(i)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(i,u,l){var p=i.length+l,m;this._expand(p);var v,E=0;for(m=0;m<i.length;m++){v=(this.words[m+l]|0)+E;var y=(i.words[m]|0)*u;v-=y&67108863,E=(v>>26)-(y/67108864|0),this.words[m+l]=v&67108863}for(;m<this.length-l;m++)v=(this.words[m+l]|0)+E,E=v>>26,this.words[m+l]=v&67108863;if(E===0)return this._strip();for(t(E===-1),E=0,m=0;m<this.length;m++)v=-(this.words[m]|0)+E,E=v>>26,this.words[m]=v&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(i,u){var l=this.length-i.length,p=this.clone(),m=i,v=m.words[m.length-1]|0,E=this._countBits(v);l=26-E,l!==0&&(m=m.ushln(l),p.iushln(l),v=m.words[m.length-1]|0);var y=p.length-m.length,o;if(u!=="mod"){o=new s(null),o.length=y+1,o.words=new Array(o.length);for(var a=0;a<o.length;a++)o.words[a]=0}var d=p.clone()._ishlnsubmul(m,1,y);d.negative===0&&(p=d,o&&(o.words[y]=1));for(var w=y-1;w>=0;w--){var B=(p.words[m.length+w]|0)*67108864+(p.words[m.length+w-1]|0);for(B=Math.min(B/v|0,67108863),p._ishlnsubmul(m,B,w);p.negative!==0;)B--,p.negative=0,p._ishlnsubmul(m,1,w),p.isZero()||(p.negative^=1);o&&(o.words[w]=B)}return o&&o._strip(),p._strip(),u!=="div"&&l!==0&&p.iushrn(l),{div:o||null,mod:p}},s.prototype.divmod=function(i,u,l){if(t(!i.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var p,m,v;return this.negative!==0&&i.negative===0?(v=this.neg().divmod(i,u),u!=="mod"&&(p=v.div.neg()),u!=="div"&&(m=v.mod.neg(),l&&m.negative!==0&&m.iadd(i)),{div:p,mod:m}):this.negative===0&&i.negative!==0?(v=this.divmod(i.neg(),u),u!=="mod"&&(p=v.div.neg()),{div:p,mod:v.mod}):(this.negative&i.negative)!==0?(v=this.neg().divmod(i.neg(),u),u!=="div"&&(m=v.mod.neg(),l&&m.negative!==0&&m.isub(i)),{div:v.div,mod:m}):i.length>this.length||this.cmp(i)<0?{div:new s(0),mod:this}:i.length===1?u==="div"?{div:this.divn(i.words[0]),mod:null}:u==="mod"?{div:null,mod:new s(this.modrn(i.words[0]))}:{div:this.divn(i.words[0]),mod:new s(this.modrn(i.words[0]))}:this._wordDiv(i,u)},s.prototype.div=function(i){return this.divmod(i,"div",!1).div},s.prototype.mod=function(i){return this.divmod(i,"mod",!1).mod},s.prototype.umod=function(i){return this.divmod(i,"mod",!0).mod},s.prototype.divRound=function(i){var u=this.divmod(i);if(u.mod.isZero())return u.div;var l=u.div.negative!==0?u.mod.isub(i):u.mod,p=i.ushrn(1),m=i.andln(1),v=l.cmp(p);return v<0||m===1&&v===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},s.prototype.modrn=function(i){var u=i<0;u&&(i=-i),t(i<=67108863);for(var l=(1<<26)%i,p=0,m=this.length-1;m>=0;m--)p=(l*p+(this.words[m]|0))%i;return u?-p:p},s.prototype.modn=function(i){return this.modrn(i)},s.prototype.idivn=function(i){var u=i<0;u&&(i=-i),t(i<=67108863);for(var l=0,p=this.length-1;p>=0;p--){var m=(this.words[p]|0)+l*67108864;this.words[p]=m/i|0,l=m%i}return this._strip(),u?this.ineg():this},s.prototype.divn=function(i){return this.clone().idivn(i)},s.prototype.egcd=function(i){t(i.negative===0),t(!i.isZero());var u=this,l=i.clone();u.negative!==0?u=u.umod(i):u=u.clone();for(var p=new s(1),m=new s(0),v=new s(0),E=new s(1),y=0;u.isEven()&&l.isEven();)u.iushrn(1),l.iushrn(1),++y;for(var o=l.clone(),a=u.clone();!u.isZero();){for(var d=0,w=1;(u.words[0]&w)===0&&d<26;++d,w<<=1);if(d>0)for(u.iushrn(d);d-- >0;)(p.isOdd()||m.isOdd())&&(p.iadd(o),m.isub(a)),p.iushrn(1),m.iushrn(1);for(var B=0,C=1;(l.words[0]&C)===0&&B<26;++B,C<<=1);if(B>0)for(l.iushrn(B);B-- >0;)(v.isOdd()||E.isOdd())&&(v.iadd(o),E.isub(a)),v.iushrn(1),E.iushrn(1);u.cmp(l)>=0?(u.isub(l),p.isub(v),m.isub(E)):(l.isub(u),v.isub(p),E.isub(m))}return{a:v,b:E,gcd:l.iushln(y)}},s.prototype._invmp=function(i){t(i.negative===0),t(!i.isZero());var u=this,l=i.clone();u.negative!==0?u=u.umod(i):u=u.clone();for(var p=new s(1),m=new s(0),v=l.clone();u.cmpn(1)>0&&l.cmpn(1)>0;){for(var E=0,y=1;(u.words[0]&y)===0&&E<26;++E,y<<=1);if(E>0)for(u.iushrn(E);E-- >0;)p.isOdd()&&p.iadd(v),p.iushrn(1);for(var o=0,a=1;(l.words[0]&a)===0&&o<26;++o,a<<=1);if(o>0)for(l.iushrn(o);o-- >0;)m.isOdd()&&m.iadd(v),m.iushrn(1);u.cmp(l)>=0?(u.isub(l),p.isub(m)):(l.isub(u),m.isub(p))}var d;return u.cmpn(1)===0?d=p:d=m,d.cmpn(0)<0&&d.iadd(i),d},s.prototype.gcd=function(i){if(this.isZero())return i.abs();if(i.isZero())return this.abs();var u=this.clone(),l=i.clone();u.negative=0,l.negative=0;for(var p=0;u.isEven()&&l.isEven();p++)u.iushrn(1),l.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;l.isEven();)l.iushrn(1);var m=u.cmp(l);if(m<0){var v=u;u=l,l=v}else if(m===0||l.cmpn(1)===0)break;u.isub(l)}while(!0);return l.iushln(p)},s.prototype.invm=function(i){return this.egcd(i).a.umod(i)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(i){return this.words[0]&i},s.prototype.bincn=function(i){t(typeof i=="number");var u=i%26,l=(i-u)/26,p=1<<u;if(this.length<=l)return this._expand(l+1),this.words[l]|=p,this;for(var m=p,v=l;m!==0&&v<this.length;v++){var E=this.words[v]|0;E+=m,m=E>>>26,E&=67108863,this.words[v]=E}return m!==0&&(this.words[v]=m,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(i){var u=i<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var l;if(this.length>1)l=1;else{u&&(i=-i),t(i<=67108863,"Number is too big");var p=this.words[0]|0;l=p===i?0:p<i?-1:1}return this.negative!==0?-l|0:l},s.prototype.cmp=function(i){if(this.negative!==0&&i.negative===0)return-1;if(this.negative===0&&i.negative!==0)return 1;var u=this.ucmp(i);return this.negative!==0?-u|0:u},s.prototype.ucmp=function(i){if(this.length>i.length)return 1;if(this.length<i.length)return-1;for(var u=0,l=this.length-1;l>=0;l--){var p=this.words[l]|0,m=i.words[l]|0;if(p!==m){p<m?u=-1:p>m&&(u=1);break}}return u},s.prototype.gtn=function(i){return this.cmpn(i)===1},s.prototype.gt=function(i){return this.cmp(i)===1},s.prototype.gten=function(i){return this.cmpn(i)>=0},s.prototype.gte=function(i){return this.cmp(i)>=0},s.prototype.ltn=function(i){return this.cmpn(i)===-1},s.prototype.lt=function(i){return this.cmp(i)===-1},s.prototype.lten=function(i){return this.cmpn(i)<=0},s.prototype.lte=function(i){return this.cmp(i)<=0},s.prototype.eqn=function(i){return this.cmpn(i)===0},s.prototype.eq=function(i){return this.cmp(i)===0},s.red=function(i){return new L(i)},s.prototype.toRed=function(i){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),i.convertTo(this)._forceRed(i)},s.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(i){return this.red=i,this},s.prototype.forceRed=function(i){return t(!this.red,"Already a number in reduction context"),this._forceRed(i)},s.prototype.redAdd=function(i){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,i)},s.prototype.redIAdd=function(i){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,i)},s.prototype.redSub=function(i){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,i)},s.prototype.redISub=function(i){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,i)},s.prototype.redShl=function(i){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,i)},s.prototype.redMul=function(i){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.mul(this,i)},s.prototype.redIMul=function(i){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.imul(this,i)},s.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(i){return t(this.red&&!i.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,i)};var X={k256:null,p224:null,p192:null,p25519:null};function H(h,i){this.name=h,this.p=new s(i,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}H.prototype._tmp=function(){var i=new s(null);return i.words=new Array(Math.ceil(this.n/13)),i},H.prototype.ireduce=function(i){var u=i,l;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),l=u.bitLength();while(l>this.n);var p=l<this.n?-1:u.ucmp(this.p);return p===0?(u.words[0]=0,u.length=1):p>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},H.prototype.split=function(i,u){i.iushrn(this.n,0,u)},H.prototype.imulK=function(i){return i.imul(this.k)};function tt(){H.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}f(tt,H),tt.prototype.split=function(i,u){for(var l=4194303,p=Math.min(i.length,9),m=0;m<p;m++)u.words[m]=i.words[m];if(u.length=p,i.length<=9){i.words[0]=0,i.length=1;return}var v=i.words[9];for(u.words[u.length++]=v&l,m=10;m<i.length;m++){var E=i.words[m]|0;i.words[m-10]=(E&l)<<4|v>>>22,v=E}v>>>=22,i.words[m-10]=v,v===0&&i.length>10?i.length-=10:i.length-=9},tt.prototype.imulK=function(i){i.words[i.length]=0,i.words[i.length+1]=0,i.length+=2;for(var u=0,l=0;l<i.length;l++){var p=i.words[l]|0;u+=p*977,i.words[l]=u&67108863,u=p*64+(u/67108864|0)}return i.words[i.length-1]===0&&(i.length--,i.words[i.length-1]===0&&i.length--),i};function J(){H.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}f(J,H);function M(){H.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}f(M,H);function S(){H.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}f(S,H),S.prototype.imulK=function(i){for(var u=0,l=0;l<i.length;l++){var p=(i.words[l]|0)*19+u,m=p&67108863;p>>>=26,i.words[l]=m,u=p}return u!==0&&(i.words[i.length++]=u),i},s._prime=function(i){if(X[i])return X[i];var u;if(i==="k256")u=new tt;else if(i==="p224")u=new J;else if(i==="p192")u=new M;else if(i==="p25519")u=new S;else throw new Error("Unknown prime "+i);return X[i]=u,u};function L(h){if(typeof h=="string"){var i=s._prime(h);this.m=i.p,this.prime=i}else t(h.gtn(1),"modulus must be greater than 1"),this.m=h,this.prime=null}L.prototype._verify1=function(i){t(i.negative===0,"red works only with positives"),t(i.red,"red works only with red numbers")},L.prototype._verify2=function(i,u){t((i.negative|u.negative)===0,"red works only with positives"),t(i.red&&i.red===u.red,"red works only with red numbers")},L.prototype.imod=function(i){return this.prime?this.prime.ireduce(i)._forceRed(this):(T(i,i.umod(this.m)._forceRed(this)),i)},L.prototype.neg=function(i){return i.isZero()?i.clone():this.m.sub(i)._forceRed(this)},L.prototype.add=function(i,u){this._verify2(i,u);var l=i.add(u);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},L.prototype.iadd=function(i,u){this._verify2(i,u);var l=i.iadd(u);return l.cmp(this.m)>=0&&l.isub(this.m),l},L.prototype.sub=function(i,u){this._verify2(i,u);var l=i.sub(u);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},L.prototype.isub=function(i,u){this._verify2(i,u);var l=i.isub(u);return l.cmpn(0)<0&&l.iadd(this.m),l},L.prototype.shl=function(i,u){return this._verify1(i),this.imod(i.ushln(u))},L.prototype.imul=function(i,u){return this._verify2(i,u),this.imod(i.imul(u))},L.prototype.mul=function(i,u){return this._verify2(i,u),this.imod(i.mul(u))},L.prototype.isqr=function(i){return this.imul(i,i.clone())},L.prototype.sqr=function(i){return this.mul(i,i)},L.prototype.sqrt=function(i){if(i.isZero())return i.clone();var u=this.m.andln(3);if(t(u%2===1),u===3){var l=this.m.add(new s(1)).iushrn(2);return this.pow(i,l)}for(var p=this.m.subn(1),m=0;!p.isZero()&&p.andln(1)===0;)m++,p.iushrn(1);t(!p.isZero());var v=new s(1).toRed(this),E=v.redNeg(),y=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new s(2*o*o).toRed(this);this.pow(o,y).cmp(E)!==0;)o.redIAdd(E);for(var a=this.pow(o,p),d=this.pow(i,p.addn(1).iushrn(1)),w=this.pow(i,p),B=m;w.cmp(v)!==0;){for(var C=w,$=0;C.cmp(v)!==0;$++)C=C.redSqr();t($<B);var Y=this.pow(a,new s(1).iushln(B-$-1));d=d.redMul(Y),a=Y.redSqr(),w=w.redMul(a),B=$}return d},L.prototype.invm=function(i){var u=i._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},L.prototype.pow=function(i,u){if(u.isZero())return new s(1).toRed(this);if(u.cmpn(1)===0)return i.clone();var l=4,p=new Array(1<<l);p[0]=new s(1).toRed(this),p[1]=i;for(var m=2;m<p.length;m++)p[m]=this.mul(p[m-1],i);var v=p[0],E=0,y=0,o=u.bitLength()%26;for(o===0&&(o=26),m=u.length-1;m>=0;m--){for(var a=u.words[m],d=o-1;d>=0;d--){var w=a>>d&1;if(v!==p[0]&&(v=this.sqr(v)),w===0&&E===0){y=0;continue}E<<=1,E|=w,y++,!(y!==l&&(m!==0||d!==0))&&(v=this.mul(v,p[E]),y=0,E=0)}o=26}return v},L.prototype.convertTo=function(i){var u=i.umod(this.m);return u===i?u.clone():u},L.prototype.convertFrom=function(i){var u=i.clone();return u.red=null,u},s.mont=function(i){return new U(i)};function U(h){L.call(this,h),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}f(U,L),U.prototype.convertTo=function(i){return this.imod(i.ushln(this.shift))},U.prototype.convertFrom=function(i){var u=this.imod(i.mul(this.rinv));return u.red=null,u},U.prototype.imul=function(i,u){if(i.isZero()||u.isZero())return i.words[0]=0,i.length=1,i;var l=i.imul(u),p=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=l.isub(p).iushrn(this.shift),v=m;return m.cmp(this.m)>=0?v=m.isub(this.m):m.cmpn(0)<0&&(v=m.iadd(this.m)),v._forceRed(this)},U.prototype.mul=function(i,u){if(i.isZero()||u.isZero())return new s(0)._forceRed(this);var l=i.mul(u),p=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=l.isub(p).iushrn(this.shift),v=m;return m.cmp(this.m)>=0?v=m.isub(this.m):m.cmpn(0)<0&&(v=m.iadd(this.m)),v._forceRed(this)},U.prototype.invm=function(i){var u=this.imod(i._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(n,io)})(tn)),tn.exports}var so=Fi();const ni=vi(so);var Xe={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var ri;function oo(){return ri||(ri=1,(function(n,e){var r=wi(),t=r.Buffer;function f(c,b){for(var g in c)b[g]=c[g]}t.from&&t.alloc&&t.allocUnsafe&&t.allocUnsafeSlow?n.exports=r:(f(r,e),e.Buffer=s);function s(c,b,g){return t(c,b,g)}s.prototype=Object.create(t.prototype),f(t,s),s.from=function(c,b,g){if(typeof c=="number")throw new TypeError("Argument must not be a number");return t(c,b,g)},s.alloc=function(c,b,g){if(typeof c!="number")throw new TypeError("Argument must be a number");var A=t(c);return b!==void 0?typeof g=="string"?A.fill(b,g):A.fill(b):A.fill(0),A},s.allocUnsafe=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return t(c)},s.allocUnsafeSlow=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(c)}})(Xe,Xe.exports)),Xe.exports}var Gn,ii;function ao(){if(ii)return Gn;ii=1;var n=oo().Buffer;function e(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),f=0;f<t.length;f++)t[f]=255;for(var s=0;s<r.length;s++){var c=r.charAt(s),b=c.charCodeAt(0);if(t[b]!==255)throw new TypeError(c+" is ambiguous");t[b]=s}var g=r.length,A=r.charAt(0),T=Math.log(g)/Math.log(256),F=Math.log(256)/Math.log(g);function I(O){if((Array.isArray(O)||O instanceof Uint8Array)&&(O=n.from(O)),!n.isBuffer(O))throw new TypeError("Expected Buffer");if(O.length===0)return"";for(var z=0,q=0,V=0,D=O.length;V!==D&&O[V]===0;)V++,z++;for(var G=(D-V)*F+1>>>0,X=new Uint8Array(G);V!==D;){for(var H=O[V],tt=0,J=G-1;(H!==0||tt<q)&&J!==-1;J--,tt++)H+=256*X[J]>>>0,X[J]=H%g>>>0,H=H/g>>>0;if(H!==0)throw new Error("Non-zero carry");q=tt,V++}for(var M=G-q;M!==G&&X[M]===0;)M++;for(var S=A.repeat(z);M<G;++M)S+=r.charAt(X[M]);return S}function _(O){if(typeof O!="string")throw new TypeError("Expected String");if(O.length===0)return n.alloc(0);for(var z=0,q=0,V=0;O[z]===A;)q++,z++;for(var D=(O.length-z)*T+1>>>0,G=new Uint8Array(D);z<O.length;){var X=O.charCodeAt(z);if(X>255)return;var H=t[X];if(H===255)return;for(var tt=0,J=D-1;(H!==0||tt<V)&&J!==-1;J--,tt++)H+=g*G[J]>>>0,G[J]=H%256>>>0,H=H/256>>>0;if(H!==0)throw new Error("Non-zero carry");V=tt,z++}for(var M=D-V;M!==D&&G[M]===0;)M++;var S=n.allocUnsafe(q+(D-M));S.fill(0,0,q);for(var L=q;M!==D;)S[L++]=G[M++];return S}function N(O){var z=_(O);if(z)return z;throw new Error("Non-base"+g+" character")}return{encode:I,decodeUnsafe:_,decode:N}}return Gn=e,Gn}var Wn,si;function Di(){if(si)return Wn;si=1;var n=ao(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return Wn=n(e),Wn}var uo=Di();const ee=vi(uo);var rt={};function pe(n,e,r){return e<=n&&n<=r}function mn(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function fo(n){for(var e=String(n),r=e.length,t=0,f=[];t<r;){var s=e.charCodeAt(t);if(s<55296||s>57343)f.push(s);else if(56320<=s&&s<=57343)f.push(65533);else if(55296<=s&&s<=56319)if(t===r-1)f.push(65533);else{var c=n.charCodeAt(t+1);if(56320<=c&&c<=57343){var b=s&1023,g=c&1023;f.push(65536+(b<<10)+g),t+=1}else f.push(65533)}t+=1}return f}function co(n){for(var e="",r=0;r<n.length;++r){var t=n[r];t<=65535?e+=String.fromCharCode(t):(t-=65536,e+=String.fromCharCode((t>>10)+55296,(t&1023)+56320))}return e}var on=-1;function vr(n){this.tokens=[].slice.call(n)}vr.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():on},prepend:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.push(e.shift());else this.tokens.push(n)}};var qe=-1;function Xn(n,e){if(n)throw TypeError("Decoder error");return e||65533}var an="utf-8";function un(n,e){if(!(this instanceof un))return new un(n,e);if(n=n!==void 0?String(n).toLowerCase():an,n!==an)throw new Error("Encoding not supported. Only utf-8 is supported");e=mn(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}un.prototype={decode:function(e,r){var t;typeof e=="object"&&e instanceof ArrayBuffer?t=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):t=new Uint8Array(0),r=mn(r),this._streaming||(this._decoder=new lo({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!r.stream;for(var f=new vr(t),s=[],c;!f.endOfStream()&&(c=this._decoder.handler(f,f.read()),c!==qe);)c!==null&&(Array.isArray(c)?s.push.apply(s,c):s.push(c));if(!this._streaming){do{if(c=this._decoder.handler(f,f.read()),c===qe)break;c!==null&&(Array.isArray(c)?s.push.apply(s,c):s.push(c))}while(!f.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),co(s)}};function fn(n,e){if(!(this instanceof fn))return new fn(n,e);if(n=n!==void 0?String(n).toLowerCase():an,n!==an)throw new Error("Encoding not supported. Only utf-8 is supported");e=mn(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}fn.prototype={encode:function(e,r){e=e?String(e):"",r=mn(r),this._streaming||(this._encoder=new ho(this._options)),this._streaming=!!r.stream;for(var t=[],f=new vr(fo(e)),s;!f.endOfStream()&&(s=this._encoder.handler(f,f.read()),s!==qe);)Array.isArray(s)?t.push.apply(t,s):t.push(s);if(!this._streaming){for(;s=this._encoder.handler(f,f.read()),s!==qe;)Array.isArray(s)?t.push.apply(t,s):t.push(s);this._encoder=null}return new Uint8Array(t)}};function lo(n){var e=n.fatal,r=0,t=0,f=0,s=128,c=191;this.handler=function(b,g){if(g===on&&f!==0)return f=0,Xn(e);if(g===on)return qe;if(f===0){if(pe(g,0,127))return g;if(pe(g,194,223))f=1,r=g-192;else if(pe(g,224,239))g===224&&(s=160),g===237&&(c=159),f=2,r=g-224;else if(pe(g,240,244))g===240&&(s=144),g===244&&(c=143),f=3,r=g-240;else return Xn(e);return r=r<<6*f,null}if(!pe(g,s,c))return r=f=t=0,s=128,c=191,b.prepend(g),Xn(e);if(s=128,c=191,t+=1,r+=g-128<<6*(f-t),t!==f)return null;var A=r;return r=f=t=0,A}}function ho(n){n.fatal,this.handler=function(e,r){if(r===on)return qe;if(pe(r,0,127))return r;var t,f;pe(r,128,2047)?(t=1,f=192):pe(r,2048,65535)?(t=2,f=224):pe(r,65536,1114111)&&(t=3,f=240);for(var s=[(r>>6*t)+f];t>0;){var c=r>>6*(t-1);s.push(128|c&63),t-=1}return s}}const po=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:un,TextEncoder:fn},Symbol.toStringTag,{value:"Module"})),go=pr(po);var oi;function yo(){if(oi)return rt;oi=1;var n=rt&&rt.__createBinding||(Object.create?(function(M,S,L,U){U===void 0&&(U=L),Object.defineProperty(M,U,{enumerable:!0,get:function(){return S[L]}})}):(function(M,S,L,U){U===void 0&&(U=L),M[U]=S[L]})),e=rt&&rt.__setModuleDefault||(Object.create?(function(M,S){Object.defineProperty(M,"default",{enumerable:!0,value:S})}):function(M,S){M.default=S}),r=rt&&rt.__decorate||function(M,S,L,U){var h=arguments.length,i=h<3?S:U===null?U=Object.getOwnPropertyDescriptor(S,L):U,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(M,S,L,U);else for(var l=M.length-1;l>=0;l--)(u=M[l])&&(i=(h<3?u(i):h>3?u(S,L,i):u(S,L))||i);return h>3&&i&&Object.defineProperty(S,L,i),i},t=rt&&rt.__importStar||function(M){if(M&&M.__esModule)return M;var S={};if(M!=null)for(var L in M)L!=="default"&&Object.hasOwnProperty.call(M,L)&&n(S,M,L);return e(S,M),S},f=rt&&rt.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(rt,"__esModule",{value:!0}),rt.deserializeUnchecked=rt.deserialize=rt.serialize=rt.BinaryReader=rt.BinaryWriter=rt.BorshError=rt.baseDecode=rt.baseEncode=void 0;const s=f(Fi()),c=f(Di()),b=t(go),g=typeof TextDecoder!="function"?b.TextDecoder:TextDecoder,A=new g("utf-8",{fatal:!0});function T(M){return typeof M=="string"&&(M=Buffer.from(M,"utf8")),c.default.encode(Buffer.from(M))}rt.baseEncode=T;function F(M){return Buffer.from(c.default.decode(M))}rt.baseDecode=F;const I=1024;class _ extends Error{constructor(S){super(S),this.fieldPath=[],this.originalMessage=S}addToFieldPath(S){this.fieldPath.splice(0,0,S),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}rt.BorshError=_;class N{constructor(){this.buf=Buffer.alloc(I),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(I)]))}writeU8(S){this.maybeResize(),this.buf.writeUInt8(S,this.length),this.length+=1}writeU16(S){this.maybeResize(),this.buf.writeUInt16LE(S,this.length),this.length+=2}writeU32(S){this.maybeResize(),this.buf.writeUInt32LE(S,this.length),this.length+=4}writeU64(S){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(S).toArray("le",8)))}writeU128(S){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(S).toArray("le",16)))}writeU256(S){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(S).toArray("le",32)))}writeU512(S){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(S).toArray("le",64)))}writeBuffer(S){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),S,Buffer.alloc(I)]),this.length+=S.length}writeString(S){this.maybeResize();const L=Buffer.from(S,"utf8");this.writeU32(L.length),this.writeBuffer(L)}writeFixedArray(S){this.writeBuffer(Buffer.from(S))}writeArray(S,L){this.maybeResize(),this.writeU32(S.length);for(const U of S)this.maybeResize(),L(U)}toArray(){return this.buf.subarray(0,this.length)}}rt.BinaryWriter=N;function O(M,S,L){const U=L.value;L.value=function(...h){try{return U.apply(this,h)}catch(i){if(i instanceof RangeError){const u=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(u)>=0)throw new _("Reached the end of buffer when deserializing")}throw i}}}class z{constructor(S){this.buf=S,this.offset=0}readU8(){const S=this.buf.readUInt8(this.offset);return this.offset+=1,S}readU16(){const S=this.buf.readUInt16LE(this.offset);return this.offset+=2,S}readU32(){const S=this.buf.readUInt32LE(this.offset);return this.offset+=4,S}readU64(){const S=this.readBuffer(8);return new s.default(S,"le")}readU128(){const S=this.readBuffer(16);return new s.default(S,"le")}readU256(){const S=this.readBuffer(32);return new s.default(S,"le")}readU512(){const S=this.readBuffer(64);return new s.default(S,"le")}readBuffer(S){if(this.offset+S>this.buf.length)throw new _(`Expected buffer length ${S} isn't within bounds`);const L=this.buf.slice(this.offset,this.offset+S);return this.offset+=S,L}readString(){const S=this.readU32(),L=this.readBuffer(S);try{return A.decode(L)}catch(U){throw new _(`Error decoding UTF-8 string: ${U}`)}}readFixedArray(S){return new Uint8Array(this.readBuffer(S))}readArray(S){const L=this.readU32(),U=Array();for(let h=0;h<L;++h)U.push(S());return U}}r([O],z.prototype,"readU8",null),r([O],z.prototype,"readU16",null),r([O],z.prototype,"readU32",null),r([O],z.prototype,"readU64",null),r([O],z.prototype,"readU128",null),r([O],z.prototype,"readU256",null),r([O],z.prototype,"readU512",null),r([O],z.prototype,"readString",null),r([O],z.prototype,"readFixedArray",null),r([O],z.prototype,"readArray",null),rt.BinaryReader=z;function q(M){return M.charAt(0).toUpperCase()+M.slice(1)}function V(M,S,L,U,h){try{if(typeof U=="string")h[`write${q(U)}`](L);else if(U instanceof Array)if(typeof U[0]=="number"){if(L.length!==U[0])throw new _(`Expecting byte array of length ${U[0]}, but got ${L.length} bytes`);h.writeFixedArray(L)}else if(U.length===2&&typeof U[1]=="number"){if(L.length!==U[1])throw new _(`Expecting byte array of length ${U[1]}, but got ${L.length} bytes`);for(let i=0;i<U[1];i++)V(M,null,L[i],U[0],h)}else h.writeArray(L,i=>{V(M,S,i,U[0],h)});else if(U.kind!==void 0)switch(U.kind){case"option":{L==null?h.writeU8(0):(h.writeU8(1),V(M,S,L,U.type,h));break}case"map":{h.writeU32(L.size),L.forEach((i,u)=>{V(M,S,u,U.key,h),V(M,S,i,U.value,h)});break}default:throw new _(`FieldType ${U} unrecognized`)}else D(M,L,h)}catch(i){throw i instanceof _&&i.addToFieldPath(S),i}}function D(M,S,L){if(typeof S.borshSerialize=="function"){S.borshSerialize(L);return}const U=M.get(S.constructor);if(!U)throw new _(`Class ${S.constructor.name} is missing in schema`);if(U.kind==="struct")U.fields.map(([h,i])=>{V(M,h,S[h],i,L)});else if(U.kind==="enum"){const h=S[U.field];for(let i=0;i<U.values.length;++i){const[u,l]=U.values[i];if(u===h){L.writeU8(i),V(M,u,S[u],l,L);break}}}else throw new _(`Unexpected schema kind: ${U.kind} for ${S.constructor.name}`)}function G(M,S,L=N){const U=new L;return D(M,S,U),U.toArray()}rt.serialize=G;function X(M,S,L,U){try{if(typeof L=="string")return U[`read${q(L)}`]();if(L instanceof Array){if(typeof L[0]=="number")return U.readFixedArray(L[0]);if(typeof L[1]=="number"){const h=[];for(let i=0;i<L[1];i++)h.push(X(M,null,L[0],U));return h}else return U.readArray(()=>X(M,S,L[0],U))}if(L.kind==="option")return U.readU8()?X(M,S,L.type,U):void 0;if(L.kind==="map"){let h=new Map;const i=U.readU32();for(let u=0;u<i;u++){const l=X(M,S,L.key,U),p=X(M,S,L.value,U);h.set(l,p)}return h}return H(M,L,U)}catch(h){throw h instanceof _&&h.addToFieldPath(S),h}}function H(M,S,L){if(typeof S.borshDeserialize=="function")return S.borshDeserialize(L);const U=M.get(S);if(!U)throw new _(`Class ${S.name} is missing in schema`);if(U.kind==="struct"){const h={};for(const[i,u]of M.get(S).fields)h[i]=X(M,i,u,L);return new S(h)}if(U.kind==="enum"){const h=L.readU8();if(h>=U.values.length)throw new _(`Enum index: ${h} is out of range`);const[i,u]=U.values[h],l=X(M,i,u,L);return new S({[i]:l})}throw new _(`Unexpected schema kind: ${U.kind} for ${S.constructor.name}`)}function tt(M,S,L,U=z){const h=new U(L),i=H(M,S,h);if(h.offset<L.length)throw new _(`Unexpected ${L.length-h.offset} bytes after deserialized data`);return i}rt.deserialize=tt;function J(M,S,L,U=z){const h=new U(L);return H(M,S,h)}return rt.deserializeUnchecked=J,rt}var Jn=yo(),R={},ai;function mo(){if(ai)return R;ai=1,Object.defineProperty(R,"__esModule",{value:!0}),R.s16=R.s8=R.nu64be=R.u48be=R.u40be=R.u32be=R.u24be=R.u16be=R.nu64=R.u48=R.u40=R.u32=R.u24=R.u16=R.u8=R.offset=R.greedy=R.Constant=R.UTF8=R.CString=R.Blob=R.Boolean=R.BitField=R.BitStructure=R.VariantLayout=R.Union=R.UnionLayoutDiscriminator=R.UnionDiscriminator=R.Structure=R.Sequence=R.DoubleBE=R.Double=R.FloatBE=R.Float=R.NearInt64BE=R.NearInt64=R.NearUInt64BE=R.NearUInt64=R.IntBE=R.Int=R.UIntBE=R.UInt=R.OffsetLayout=R.GreedyCount=R.ExternalLayout=R.bindConstructorLayout=R.nameWithProperty=R.Layout=R.uint8ArrayToBuffer=R.checkUint8Array=void 0,R.constant=R.utf8=R.cstr=R.blob=R.unionLayoutDiscriminator=R.union=R.seq=R.bits=R.struct=R.f64be=R.f64=R.f32be=R.f32=R.ns64be=R.s48be=R.s40be=R.s32be=R.s24be=R.s16be=R.ns64=R.s48=R.s40=R.s32=R.s24=void 0;const n=wi();function e(o){if(!(o instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}R.checkUint8Array=e;function r(o){return e(o),n.Buffer.from(o.buffer,o.byteOffset,o.length)}R.uint8ArrayToBuffer=r;let t=class{constructor(a,d){if(!Number.isInteger(a))throw new TypeError("span must be an integer");this.span=a,this.property=d}makeDestinationObject(){return{}}getSpan(a,d){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(a){const d=Object.create(this.constructor.prototype);return Object.assign(d,this),d.property=a,d}fromArray(a){}};R.Layout=t;function f(o,a){return a.property?o+"["+a.property+"]":o}R.nameWithProperty=f;function s(o,a){if(typeof o!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(o,"layout_"))throw new Error("Class is already bound to a layout");if(!(a&&a instanceof t))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(a,"boundConstructor_"))throw new Error("layout is already bound to a constructor");o.layout_=a,a.boundConstructor_=o,a.makeDestinationObject=(()=>new o),Object.defineProperty(o.prototype,"encode",{value(d,w){return a.encode(this,d,w)},writable:!0}),Object.defineProperty(o,"decode",{value(d,w){return a.decode(d,w)},writable:!0})}R.bindConstructorLayout=s;class c extends t{isCount(){throw new Error("ExternalLayout is abstract")}}R.ExternalLayout=c;class b extends c{constructor(a=1,d){if(!Number.isInteger(a)||0>=a)throw new TypeError("elementSpan must be a (positive) integer");super(-1,d),this.elementSpan=a}isCount(){return!0}decode(a,d=0){e(a);const w=a.length-d;return Math.floor(w/this.elementSpan)}encode(a,d,w){return 0}}R.GreedyCount=b;class g extends c{constructor(a,d=0,w){if(!(a instanceof t))throw new TypeError("layout must be a Layout");if(!Number.isInteger(d))throw new TypeError("offset must be integer or undefined");super(a.span,w||a.property),this.layout=a,this.offset=d}isCount(){return this.layout instanceof A||this.layout instanceof T}decode(a,d=0){return this.layout.decode(a,d+this.offset)}encode(a,d,w=0){return this.layout.encode(a,d,w+this.offset)}}R.OffsetLayout=g;class A extends t{constructor(a,d){if(super(a,d),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(a,d=0){return r(a).readUIntLE(d,this.span)}encode(a,d,w=0){return r(d).writeUIntLE(a,w,this.span),this.span}}R.UInt=A;class T extends t{constructor(a,d){if(super(a,d),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(a,d=0){return r(a).readUIntBE(d,this.span)}encode(a,d,w=0){return r(d).writeUIntBE(a,w,this.span),this.span}}R.UIntBE=T;class F extends t{constructor(a,d){if(super(a,d),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(a,d=0){return r(a).readIntLE(d,this.span)}encode(a,d,w=0){return r(d).writeIntLE(a,w,this.span),this.span}}R.Int=F;class I extends t{constructor(a,d){if(super(a,d),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(a,d=0){return r(a).readIntBE(d,this.span)}encode(a,d,w=0){return r(d).writeIntBE(a,w,this.span),this.span}}R.IntBE=I;const _=Math.pow(2,32);function N(o){const a=Math.floor(o/_),d=o-a*_;return{hi32:a,lo32:d}}function O(o,a){return o*_+a}class z extends t{constructor(a){super(8,a)}decode(a,d=0){const w=r(a),B=w.readUInt32LE(d),C=w.readUInt32LE(d+4);return O(C,B)}encode(a,d,w=0){const B=N(a),C=r(d);return C.writeUInt32LE(B.lo32,w),C.writeUInt32LE(B.hi32,w+4),8}}R.NearUInt64=z;class q extends t{constructor(a){super(8,a)}decode(a,d=0){const w=r(a),B=w.readUInt32BE(d),C=w.readUInt32BE(d+4);return O(B,C)}encode(a,d,w=0){const B=N(a),C=r(d);return C.writeUInt32BE(B.hi32,w),C.writeUInt32BE(B.lo32,w+4),8}}R.NearUInt64BE=q;class V extends t{constructor(a){super(8,a)}decode(a,d=0){const w=r(a),B=w.readUInt32LE(d),C=w.readInt32LE(d+4);return O(C,B)}encode(a,d,w=0){const B=N(a),C=r(d);return C.writeUInt32LE(B.lo32,w),C.writeInt32LE(B.hi32,w+4),8}}R.NearInt64=V;class D extends t{constructor(a){super(8,a)}decode(a,d=0){const w=r(a),B=w.readInt32BE(d),C=w.readUInt32BE(d+4);return O(B,C)}encode(a,d,w=0){const B=N(a),C=r(d);return C.writeInt32BE(B.hi32,w),C.writeUInt32BE(B.lo32,w+4),8}}R.NearInt64BE=D;class G extends t{constructor(a){super(4,a)}decode(a,d=0){return r(a).readFloatLE(d)}encode(a,d,w=0){return r(d).writeFloatLE(a,w),4}}R.Float=G;class X extends t{constructor(a){super(4,a)}decode(a,d=0){return r(a).readFloatBE(d)}encode(a,d,w=0){return r(d).writeFloatBE(a,w),4}}R.FloatBE=X;class H extends t{constructor(a){super(8,a)}decode(a,d=0){return r(a).readDoubleLE(d)}encode(a,d,w=0){return r(d).writeDoubleLE(a,w),8}}R.Double=H;class tt extends t{constructor(a){super(8,a)}decode(a,d=0){return r(a).readDoubleBE(d)}encode(a,d,w=0){return r(d).writeDoubleBE(a,w),8}}R.DoubleBE=tt;class J extends t{constructor(a,d,w){if(!(a instanceof t))throw new TypeError("elementLayout must be a Layout");if(!(d instanceof c&&d.isCount()||Number.isInteger(d)&&0<=d))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let B=-1;!(d instanceof c)&&0<a.span&&(B=d*a.span),super(B,w),this.elementLayout=a,this.count=d}getSpan(a,d=0){if(0<=this.span)return this.span;let w=0,B=this.count;if(B instanceof c&&(B=B.decode(a,d)),0<this.elementLayout.span)w=B*this.elementLayout.span;else{let C=0;for(;C<B;)w+=this.elementLayout.getSpan(a,d+w),++C}return w}decode(a,d=0){const w=[];let B=0,C=this.count;for(C instanceof c&&(C=C.decode(a,d));B<C;)w.push(this.elementLayout.decode(a,d)),d+=this.elementLayout.getSpan(a,d),B+=1;return w}encode(a,d,w=0){const B=this.elementLayout,C=a.reduce(($,Y)=>$+B.encode(Y,d,w+$),0);return this.count instanceof c&&this.count.encode(a.length,d,w),C}}R.Sequence=J;class M extends t{constructor(a,d,w){if(!(Array.isArray(a)&&a.reduce((C,$)=>C&&$ instanceof t,!0)))throw new TypeError("fields must be array of Layout instances");typeof d=="boolean"&&w===void 0&&(w=d,d=void 0);for(const C of a)if(0>C.span&&C.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let B=-1;try{B=a.reduce((C,$)=>C+$.getSpan(),0)}catch{}super(B,d),this.fields=a,this.decodePrefixes=!!w}getSpan(a,d=0){if(0<=this.span)return this.span;let w=0;try{w=this.fields.reduce((B,C)=>{const $=C.getSpan(a,d);return d+=$,B+$},0)}catch{throw new RangeError("indeterminate span")}return w}decode(a,d=0){e(a);const w=this.makeDestinationObject();for(const B of this.fields)if(B.property!==void 0&&(w[B.property]=B.decode(a,d)),d+=B.getSpan(a,d),this.decodePrefixes&&a.length===d)break;return w}encode(a,d,w=0){const B=w;let C=0,$=0;for(const Y of this.fields){let it=Y.span;if($=0<it?it:0,Y.property!==void 0){const st=a[Y.property];st!==void 0&&($=Y.encode(st,d,w),0>it&&(it=Y.getSpan(d,w)))}C=w,w+=it}return C+$-B}fromArray(a){const d=this.makeDestinationObject();for(const w of this.fields)w.property!==void 0&&0<a.length&&(d[w.property]=a.shift());return d}layoutFor(a){if(typeof a!="string")throw new TypeError("property must be string");for(const d of this.fields)if(d.property===a)return d}offsetOf(a){if(typeof a!="string")throw new TypeError("property must be string");let d=0;for(const w of this.fields){if(w.property===a)return d;0>w.span?d=-1:0<=d&&(d+=w.span)}}}R.Structure=M;class S{constructor(a){this.property=a}decode(a,d){throw new Error("UnionDiscriminator is abstract")}encode(a,d,w){throw new Error("UnionDiscriminator is abstract")}}R.UnionDiscriminator=S;class L extends S{constructor(a,d){if(!(a instanceof c&&a.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(d||a.property||"variant"),this.layout=a}decode(a,d){return this.layout.decode(a,d)}encode(a,d,w){return this.layout.encode(a,d,w)}}R.UnionLayoutDiscriminator=L;class U extends t{constructor(a,d,w){let B;if(a instanceof A||a instanceof T)B=new L(new g(a));else if(a instanceof c&&a.isCount())B=new L(a);else if(a instanceof S)B=a;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(d===void 0&&(d=null),!(d===null||d instanceof t))throw new TypeError("defaultLayout must be null or a Layout");if(d!==null){if(0>d.span)throw new Error("defaultLayout must have constant span");d.property===void 0&&(d=d.replicate("content"))}let C=-1;d&&(C=d.span,0<=C&&(a instanceof A||a instanceof T)&&(C+=B.layout.span)),super(C,w),this.discriminator=B,this.usesPrefixDiscriminator=a instanceof A||a instanceof T,this.defaultLayout=d,this.registry={};let $=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(Y){return $(Y)},this.configGetSourceVariant=function(Y){$=Y.bind(this)}}getSpan(a,d=0){if(0<=this.span)return this.span;const w=this.getVariant(a,d);if(!w)throw new Error("unable to determine span for unrecognized variant");return w.getSpan(a,d)}defaultGetSourceVariant(a){if(Object.prototype.hasOwnProperty.call(a,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(a,this.defaultLayout.property))return;const d=this.registry[a[this.discriminator.property]];if(d&&(!d.layout||d.property&&Object.prototype.hasOwnProperty.call(a,d.property)))return d}else for(const d in this.registry){const w=this.registry[d];if(w.property&&Object.prototype.hasOwnProperty.call(a,w.property))return w}throw new Error("unable to infer src variant")}decode(a,d=0){let w;const B=this.discriminator,C=B.decode(a,d),$=this.registry[C];if($===void 0){const Y=this.defaultLayout;let it=0;this.usesPrefixDiscriminator&&(it=B.layout.span),w=this.makeDestinationObject(),w[B.property]=C,w[Y.property]=Y.decode(a,d+it)}else w=$.decode(a,d);return w}encode(a,d,w=0){const B=this.getSourceVariant(a);if(B===void 0){const C=this.discriminator,$=this.defaultLayout;let Y=0;return this.usesPrefixDiscriminator&&(Y=C.layout.span),C.encode(a[C.property],d,w),Y+$.encode(a[$.property],d,w+Y)}return B.encode(a,d,w)}addVariant(a,d,w){const B=new h(this,a,d,w);return this.registry[a]=B,B}getVariant(a,d=0){let w;return a instanceof Uint8Array?w=this.discriminator.decode(a,d):w=a,this.registry[w]}}R.Union=U;class h extends t{constructor(a,d,w,B){if(!(a instanceof U))throw new TypeError("union must be a Union");if(!Number.isInteger(d)||0>d)throw new TypeError("variant must be a (non-negative) integer");if(typeof w=="string"&&B===void 0&&(B=w,w=null),w){if(!(w instanceof t))throw new TypeError("layout must be a Layout");if(a.defaultLayout!==null&&0<=w.span&&w.span>a.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof B!="string")throw new TypeError("variant must have a String property")}let C=a.span;0>a.span&&(C=w?w.span:0,0<=C&&a.usesPrefixDiscriminator&&(C+=a.discriminator.layout.span)),super(C,B),this.union=a,this.variant=d,this.layout=w||null}getSpan(a,d=0){if(0<=this.span)return this.span;let w=0;this.union.usesPrefixDiscriminator&&(w=this.union.discriminator.layout.span);let B=0;return this.layout&&(B=this.layout.getSpan(a,d+w)),w+B}decode(a,d=0){const w=this.makeDestinationObject();if(this!==this.union.getVariant(a,d))throw new Error("variant mismatch");let B=0;return this.union.usesPrefixDiscriminator&&(B=this.union.discriminator.layout.span),this.layout?w[this.property]=this.layout.decode(a,d+B):this.property?w[this.property]=!0:this.union.usesPrefixDiscriminator&&(w[this.union.discriminator.property]=this.variant),w}encode(a,d,w=0){let B=0;if(this.union.usesPrefixDiscriminator&&(B=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(a,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,d,w);let C=B;if(this.layout&&(this.layout.encode(a[this.property],d,w+B),C+=this.layout.getSpan(d,w+B),0<=this.union.span&&C>this.union.span))throw new Error("encoded variant overruns containing union");return C}fromArray(a){if(this.layout)return this.layout.fromArray(a)}}R.VariantLayout=h;function i(o){return 0>o&&(o+=4294967296),o}class u extends t{constructor(a,d,w){if(!(a instanceof A||a instanceof T))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof d=="string"&&w===void 0&&(w=d,d=!1),4<a.span)throw new RangeError("word cannot exceed 32 bits");super(a.span,w),this.word=a,this.msb=!!d,this.fields=[];let B=0;this._packedSetValue=function(C){return B=i(C),this},this._packedGetValue=function(){return B}}decode(a,d=0){const w=this.makeDestinationObject(),B=this.word.decode(a,d);this._packedSetValue(B);for(const C of this.fields)C.property!==void 0&&(w[C.property]=C.decode(a));return w}encode(a,d,w=0){const B=this.word.decode(d,w);this._packedSetValue(B);for(const C of this.fields)if(C.property!==void 0){const $=a[C.property];$!==void 0&&C.encode($)}return this.word.encode(this._packedGetValue(),d,w)}addField(a,d){const w=new l(this,a,d);return this.fields.push(w),w}addBoolean(a){const d=new p(this,a);return this.fields.push(d),d}fieldFor(a){if(typeof a!="string")throw new TypeError("property must be string");for(const d of this.fields)if(d.property===a)return d}}R.BitStructure=u;class l{constructor(a,d,w){if(!(a instanceof u))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(d)||0>=d)throw new TypeError("bits must be positive integer");const B=8*a.span,C=a.fields.reduce(($,Y)=>$+Y.bits,0);if(d+C>B)throw new Error("bits too long for span remainder ("+(B-C)+" of "+B+" remain)");this.container=a,this.bits=d,this.valueMask=(1<<d)-1,d===32&&(this.valueMask=4294967295),this.start=C,this.container.msb&&(this.start=B-C-d),this.wordMask=i(this.valueMask<<this.start),this.property=w}decode(a,d){const w=this.container._packedGetValue();return i(w&this.wordMask)>>>this.start}encode(a){if(typeof a!="number"||!Number.isInteger(a)||a!==i(a&this.valueMask))throw new TypeError(f("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const d=this.container._packedGetValue(),w=i(a<<this.start);this.container._packedSetValue(i(d&~this.wordMask)|w)}}R.BitField=l;class p extends l{constructor(a,d){super(a,1,d)}decode(a,d){return!!super.decode(a,d)}encode(a){typeof a=="boolean"&&(a=+a),super.encode(a)}}R.Boolean=p;class m extends t{constructor(a,d){if(!(a instanceof c&&a.isCount()||Number.isInteger(a)&&0<=a))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let w=-1;a instanceof c||(w=a),super(w,d),this.length=a}getSpan(a,d){let w=this.span;return 0>w&&(w=this.length.decode(a,d)),w}decode(a,d=0){let w=this.span;return 0>w&&(w=this.length.decode(a,d)),r(a).slice(d,d+w)}encode(a,d,w){let B=this.length;if(this.length instanceof c&&(B=a.length),!(a instanceof Uint8Array&&B===a.length))throw new TypeError(f("Blob.encode",this)+" requires (length "+B+") Uint8Array as src");if(w+B>d.length)throw new RangeError("encoding overruns Uint8Array");const C=r(a);return r(d).write(C.toString("hex"),w,B,"hex"),this.length instanceof c&&this.length.encode(B,d,w),B}}R.Blob=m;class v extends t{constructor(a){super(-1,a)}getSpan(a,d=0){e(a);let w=d;for(;w<a.length&&a[w]!==0;)w+=1;return 1+w-d}decode(a,d=0){const w=this.getSpan(a,d);return r(a).slice(d,d+w-1).toString("utf-8")}encode(a,d,w=0){typeof a!="string"&&(a=String(a));const B=n.Buffer.from(a,"utf8"),C=B.length;if(w+C>d.length)throw new RangeError("encoding overruns Buffer");const $=r(d);return B.copy($,w),$[w+C]=0,C+1}}R.CString=v;class E extends t{constructor(a,d){if(typeof a=="string"&&d===void 0&&(d=a,a=void 0),a===void 0)a=-1;else if(!Number.isInteger(a))throw new TypeError("maxSpan must be an integer");super(-1,d),this.maxSpan=a}getSpan(a,d=0){return e(a),a.length-d}decode(a,d=0){const w=this.getSpan(a,d);if(0<=this.maxSpan&&this.maxSpan<w)throw new RangeError("text length exceeds maxSpan");return r(a).slice(d,d+w).toString("utf-8")}encode(a,d,w=0){typeof a!="string"&&(a=String(a));const B=n.Buffer.from(a,"utf8"),C=B.length;if(0<=this.maxSpan&&this.maxSpan<C)throw new RangeError("text length exceeds maxSpan");if(w+C>d.length)throw new RangeError("encoding overruns Buffer");return B.copy(r(d),w),C}}R.UTF8=E;class y extends t{constructor(a,d){super(0,d),this.value=a}decode(a,d){return this.value}encode(a,d,w){return 0}}return R.Constant=y,R.greedy=((o,a)=>new b(o,a)),R.offset=((o,a,d)=>new g(o,a,d)),R.u8=(o=>new A(1,o)),R.u16=(o=>new A(2,o)),R.u24=(o=>new A(3,o)),R.u32=(o=>new A(4,o)),R.u40=(o=>new A(5,o)),R.u48=(o=>new A(6,o)),R.nu64=(o=>new z(o)),R.u16be=(o=>new T(2,o)),R.u24be=(o=>new T(3,o)),R.u32be=(o=>new T(4,o)),R.u40be=(o=>new T(5,o)),R.u48be=(o=>new T(6,o)),R.nu64be=(o=>new q(o)),R.s8=(o=>new F(1,o)),R.s16=(o=>new F(2,o)),R.s24=(o=>new F(3,o)),R.s32=(o=>new F(4,o)),R.s40=(o=>new F(5,o)),R.s48=(o=>new F(6,o)),R.ns64=(o=>new V(o)),R.s16be=(o=>new I(2,o)),R.s24be=(o=>new I(3,o)),R.s32be=(o=>new I(4,o)),R.s40be=(o=>new I(5,o)),R.s48be=(o=>new I(6,o)),R.ns64be=(o=>new D(o)),R.f32=(o=>new G(o)),R.f32be=(o=>new X(o)),R.f64=(o=>new H(o)),R.f64be=(o=>new tt(o)),R.struct=((o,a,d)=>new M(o,a,d)),R.bits=((o,a,d)=>new u(o,a,d)),R.seq=((o,a,d)=>new J(o,a,d)),R.union=((o,a,d)=>new U(o,a,d)),R.unionLayoutDiscriminator=((o,a)=>new L(o,a)),R.blob=((o,a)=>new m(o,a)),R.cstr=(o=>new v(o)),R.utf8=((o,a)=>new E(o,a)),R.constant=((o,a)=>new y(o,a)),R}var x=mo(),wo=8078e3,vo=8078001,bo=8078004,xo=8078005,Eo=8078006,Mo=8078011;function Vi(n){return Array.isArray(n)?"%5B"+n.map(Vi).join("%2C%20")+"%5D":typeof n=="bigint"?`${n}n`:encodeURIComponent(String(n!=null&&Object.getPrototypeOf(n)===null?{...n}:n))}function So([n,e]){return`${n}=${Vi(e)}`}function Bo(n){const e=Object.entries(n).map(So).join("&");return btoa(e)}function Ao(n,e={}){{let r=`Solana error #${n}; Decode this error by running \`npx @solana/errors decode -- ${n}`;return Object.keys(e).length&&(r+=` '${Bo(e)}'`),`${r}\``}}var Oe=class extends Error{constructor(...[e,r]){let t,f;if(r){const{cause:c,...b}=r;c&&(f={cause:c}),Object.keys(b).length>0&&(t=b)}const s=Ao(e,t);super(s,f);Pn(this,"cause",this.cause);Pn(this,"context");this.context={__code:e,...t},this.name="SolanaError"}};function Io(n,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(n)}function _o(n){return Object.freeze({...n,encode:e=>{const r=new Uint8Array(Io(e,n));return n.write(e,r,0),r}})}function ko(n){return Object.freeze({...n,decode:(e,r=0)=>n.read(e,r)[0]})}function ke(n){return"fixedSize"in n&&typeof n.fixedSize=="number"}function Ro(n,e){if(ke(n)!==ke(e))throw new Oe(bo);if(ke(n)&&ke(e)&&n.fixedSize!==e.fixedSize)throw new Oe(xo,{decoderFixedSize:e.fixedSize,encoderFixedSize:n.fixedSize});if(!ke(n)&&!ke(e)&&n.maxSize!==e.maxSize)throw new Oe(Eo,{decoderMaxSize:e.maxSize,encoderMaxSize:n.maxSize});return{...e,...n,decode:e.decode,encode:n.encode,read:e.read,write:n.write}}function Lo(n,e,r=0){if(e.length-r<=0)throw new Oe(wo,{codecDescription:n})}function Oo(n,e,r,t=0){const f=r.length-t;if(f<e)throw new Oe(vo,{bytesLength:f,codecDescription:n,expected:e})}function Uo(n,e,r,t){if(t<e||t>r)throw new Oe(Mo,{codecDescription:n,max:r,min:e,value:t})}function Pi(n){return(n==null?void 0:n.endian)!==1}function To(n){return _o({fixedSize:n.size,write(e,r,t){n.range&&Uo(n.name,n.range[0],n.range[1],e);const f=new ArrayBuffer(n.size);return n.set(new DataView(f),e,Pi(n.config)),r.set(new Uint8Array(f),t),t+n.size}})}function Co(n){return ko({fixedSize:n.size,read(e,r=0){Lo(n.name,e,r),Oo(n.name,n.size,e,r);const t=new DataView(qo(e,r,n.size));return[n.get(t,Pi(n.config)),r+n.size]}})}function qo(n,e,r){const t=n.byteOffset+(e??0),f=r??n.byteLength;return n.buffer.slice(t,t+f)}var No=(n={})=>To({config:n,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,r,t)=>e.setBigUint64(0,BigInt(r),t),size:8}),zo=(n={})=>Co({config:n,get:(e,r)=>e.getBigUint64(0,r),name:"u64",size:8}),Ko=(n={})=>Ro(No(n),zo(n));class Fo extends TypeError{constructor(e,r){let t;const{message:f,explanation:s,...c}=e,{path:b}=e,g=b.length===0?f:`At path: ${b.join(".")} -- ${f}`;super(s??g),s!=null&&(this.cause=g),Object.assign(this,c),this.name=this.constructor.name,this.failures=()=>t??(t=[e,...r()])}}function Do(n){return Ye(n)&&typeof n[Symbol.iterator]=="function"}function Ye(n){return typeof n=="object"&&n!=null}function cn(n){return Ye(n)&&!Array.isArray(n)}function ue(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function Vo(n){const{done:e,value:r}=n.next();return e?void 0:r}function Po(n,e,r,t){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:f,branch:s}=e,{type:c}=r,{refinement:b,message:g=`Expected a value of type \`${c}\`${b?` with refinement \`${b}\``:""}, but received: \`${ue(t)}\``}=n;return{value:t,type:c,refinement:b,key:f[f.length-1],path:f,branch:s,...n,message:g}}function*ui(n,e,r,t){Do(n)||(n=[n]);for(const f of n){const s=Po(f,e,r,t);s&&(yield s)}}function*br(n,e,r={}){const{path:t=[],branch:f=[n],coerce:s=!1,mask:c=!1}=r,b={path:t,branch:f,mask:c};s&&(n=e.coercer(n,b));let g="valid";for(const A of e.validator(n,b))A.explanation=r.message,g="not_valid",yield[A,void 0];for(let[A,T,F]of e.entries(n,b)){const I=br(T,F,{path:A===void 0?t:[...t,A],branch:A===void 0?f:[...f,T],coerce:s,mask:c,message:r.message});for(const _ of I)_[0]?(g=_[0].refinement!=null?"not_refined":"not_valid",yield[_[0],void 0]):s&&(T=_[1],A===void 0?n=T:n instanceof Map?n.set(A,T):n instanceof Set?n.add(T):Ye(n)&&(T!==void 0||A in n)&&(n[A]=T))}if(g!=="not_valid")for(const A of e.refiner(n,b))A.explanation=r.message,g="not_refined",yield[A,void 0];g==="valid"&&(yield[void 0,n])}let he=class{constructor(e){const{type:r,schema:t,validator:f,refiner:s,coercer:c=g=>g,entries:b=function*(){}}=e;this.type=r,this.schema=t,this.entries=b,this.coercer=c,f?this.validator=(g,A)=>{const T=f(g,A);return ui(T,A,this,g)}:this.validator=()=>[],s?this.refiner=(g,A)=>{const T=s(g,A);return ui(T,A,this,g)}:this.refiner=()=>[]}assert(e,r){return $o(e,this,r)}create(e,r){return Pe(e,this,r)}is(e){return $i(e,this)}mask(e,r){return Zo(e,this,r)}validate(e,r={}){return He(e,this,r)}};function $o(n,e,r){const t=He(n,e,{message:r});if(t[0])throw t[0]}function Pe(n,e,r){const t=He(n,e,{coerce:!0,message:r});if(t[0])throw t[0];return t[1]}function Zo(n,e,r){const t=He(n,e,{coerce:!0,mask:!0,message:r});if(t[0])throw t[0];return t[1]}function $i(n,e){return!He(n,e)[0]}function He(n,e,r={}){const t=br(n,e,r),f=Vo(t);return f[0]?[new Fo(f[0],function*(){for(const c of t)c[0]&&(yield c[0])}),void 0]:[void 0,f[1]]}function Ae(n,e){return new he({type:n,schema:null,validator:e})}function jo(){return Ae("any",()=>!0)}function Z(n){return new he({type:"array",schema:n,*entries(e){if(n&&Array.isArray(e))for(const[r,t]of e.entries())yield[r,t,n]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${ue(e)}`}})}function le(){return Ae("boolean",n=>typeof n=="boolean")}function xr(n){return Ae("instance",e=>e instanceof n||`Expected a \`${n.name}\` instance, but received: ${ue(e)}`)}function ut(n){const e=ue(n),r=typeof n;return new he({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?n:null,validator(t){return t===n||`Expected the literal \`${e}\`, but received: ${ue(t)}`}})}function Yo(){return Ae("never",()=>!1)}function j(n){return new he({...n,validator:(e,r)=>e===null||n.validator(e,r),refiner:(e,r)=>e===null||n.refiner(e,r)})}function k(){return Ae("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${ue(n)}`)}function W(n){return new he({...n,validator:(e,r)=>e===void 0||n.validator(e,r),refiner:(e,r)=>e===void 0||n.refiner(e,r)})}function Zi(n,e){return new he({type:"record",schema:null,*entries(r){if(Ye(r))for(const t in r){const f=r[t];yield[t,t,n],yield[t,f,e]}},validator(r){return cn(r)||`Expected an object, but received: ${ue(r)}`},coercer(r){return cn(r)?{...r}:r}})}function P(){return Ae("string",n=>typeof n=="string"||`Expected a string, but received: ${ue(n)}`)}function Er(n){const e=Yo();return new he({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const t=Math.max(n.length,r.length);for(let f=0;f<t;f++)yield[f,r[f],n[f]||e]}},validator(r){return Array.isArray(r)||`Expected an array, but received: ${ue(r)}`},coercer(r){return Array.isArray(r)?r.slice():r}})}function K(n){const e=Object.keys(n);return new he({type:"type",schema:n,*entries(r){if(Ye(r))for(const t of e)yield[t,r[t],n[t]]},validator(r){return cn(r)||`Expected an object, but received: ${ue(r)}`},coercer(r){return cn(r)?{...r}:r}})}function ne(n){const e=n.map(r=>r.type).join(" | ");return new he({type:"union",schema:null,coercer(r,t){for(const f of n){const[s,c]=f.validate(r,{coerce:!0,mask:t.mask});if(!s)return c}return r},validator(r,t){const f=[];for(const s of n){const[...c]=br(r,s,t),[b]=c;if(b[0])for(const[g]of c)g&&f.push(g);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${ue(r)}`,...f]}})}function Ke(){return Ae("unknown",()=>!0)}function Ge(n,e,r){return new he({...n,coercer:(t,f)=>$i(t,e)?n.coercer(r(t,f),f):n.coercer(t,f)})}var Je,Ho=new Uint8Array(16);function ji(){if(!Je&&(Je=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Je))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Je(Ho)}const Go=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function wn(n){return typeof n=="string"&&Go.test(n)}var Gt=[];for(var Qn=0;Qn<256;++Qn)Gt.push((Qn+256).toString(16).substr(1));function vn(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(Gt[n[e+0]]+Gt[n[e+1]]+Gt[n[e+2]]+Gt[n[e+3]]+"-"+Gt[n[e+4]]+Gt[n[e+5]]+"-"+Gt[n[e+6]]+Gt[n[e+7]]+"-"+Gt[n[e+8]]+Gt[n[e+9]]+"-"+Gt[n[e+10]]+Gt[n[e+11]]+Gt[n[e+12]]+Gt[n[e+13]]+Gt[n[e+14]]+Gt[n[e+15]]).toLowerCase();if(!wn(r))throw TypeError("Stringified UUID is invalid");return r}var fi,tr,er=0,nr=0;function Wo(n,e,r){var t=e&&r||0,f=e||new Array(16);n=n||{};var s=n.node||fi,c=n.clockseq!==void 0?n.clockseq:tr;if(s==null||c==null){var b=n.random||(n.rng||ji)();s==null&&(s=fi=[b[0]|1,b[1],b[2],b[3],b[4],b[5]]),c==null&&(c=tr=(b[6]<<8|b[7])&16383)}var g=n.msecs!==void 0?n.msecs:Date.now(),A=n.nsecs!==void 0?n.nsecs:nr+1,T=g-er+(A-nr)/1e4;if(T<0&&n.clockseq===void 0&&(c=c+1&16383),(T<0||g>er)&&n.nsecs===void 0&&(A=0),A>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");er=g,nr=A,tr=c,g+=122192928e5;var F=((g&268435455)*1e4+A)%4294967296;f[t++]=F>>>24&255,f[t++]=F>>>16&255,f[t++]=F>>>8&255,f[t++]=F&255;var I=g/4294967296*1e4&268435455;f[t++]=I>>>8&255,f[t++]=I&255,f[t++]=I>>>24&15|16,f[t++]=I>>>16&255,f[t++]=c>>>8|128,f[t++]=c&255;for(var _=0;_<6;++_)f[t+_]=s[_];return e||vn(f)}function Yi(n){if(!wn(n))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(n.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(n.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(n.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(n.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(n.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function Xo(n){n=unescape(encodeURIComponent(n));for(var e=[],r=0;r<n.length;++r)e.push(n.charCodeAt(r));return e}var Jo="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Qo="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Hi(n,e,r){function t(f,s,c,b){if(typeof f=="string"&&(f=Xo(f)),typeof s=="string"&&(s=Yi(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var g=new Uint8Array(16+f.length);if(g.set(s),g.set(f,s.length),g=r(g),g[6]=g[6]&15|e,g[8]=g[8]&63|128,c){b=b||0;for(var A=0;A<16;++A)c[b+A]=g[A];return c}return vn(g)}try{t.name=n}catch{}return t.DNS=Jo,t.URL=Qo,t}function ta(n){if(typeof n=="string"){var e=unescape(encodeURIComponent(n));n=new Uint8Array(e.length);for(var r=0;r<e.length;++r)n[r]=e.charCodeAt(r)}return ea(na(ra(n),n.length*8))}function ea(n){for(var e=[],r=n.length*32,t="0123456789abcdef",f=0;f<r;f+=8){var s=n[f>>5]>>>f%32&255,c=parseInt(t.charAt(s>>>4&15)+t.charAt(s&15),16);e.push(c)}return e}function Gi(n){return(n+64>>>9<<4)+14+1}function na(n,e){n[e>>5]|=128<<e%32,n[Gi(e)-1]=e;for(var r=1732584193,t=-271733879,f=-1732584194,s=271733878,c=0;c<n.length;c+=16){var b=r,g=t,A=f,T=s;r=Xt(r,t,f,s,n[c],7,-680876936),s=Xt(s,r,t,f,n[c+1],12,-389564586),f=Xt(f,s,r,t,n[c+2],17,606105819),t=Xt(t,f,s,r,n[c+3],22,-1044525330),r=Xt(r,t,f,s,n[c+4],7,-176418897),s=Xt(s,r,t,f,n[c+5],12,1200080426),f=Xt(f,s,r,t,n[c+6],17,-1473231341),t=Xt(t,f,s,r,n[c+7],22,-45705983),r=Xt(r,t,f,s,n[c+8],7,1770035416),s=Xt(s,r,t,f,n[c+9],12,-1958414417),f=Xt(f,s,r,t,n[c+10],17,-42063),t=Xt(t,f,s,r,n[c+11],22,-1990404162),r=Xt(r,t,f,s,n[c+12],7,1804603682),s=Xt(s,r,t,f,n[c+13],12,-40341101),f=Xt(f,s,r,t,n[c+14],17,-1502002290),t=Xt(t,f,s,r,n[c+15],22,1236535329),r=Jt(r,t,f,s,n[c+1],5,-165796510),s=Jt(s,r,t,f,n[c+6],9,-1069501632),f=Jt(f,s,r,t,n[c+11],14,643717713),t=Jt(t,f,s,r,n[c],20,-373897302),r=Jt(r,t,f,s,n[c+5],5,-701558691),s=Jt(s,r,t,f,n[c+10],9,38016083),f=Jt(f,s,r,t,n[c+15],14,-660478335),t=Jt(t,f,s,r,n[c+4],20,-405537848),r=Jt(r,t,f,s,n[c+9],5,568446438),s=Jt(s,r,t,f,n[c+14],9,-1019803690),f=Jt(f,s,r,t,n[c+3],14,-187363961),t=Jt(t,f,s,r,n[c+8],20,1163531501),r=Jt(r,t,f,s,n[c+13],5,-1444681467),s=Jt(s,r,t,f,n[c+2],9,-51403784),f=Jt(f,s,r,t,n[c+7],14,1735328473),t=Jt(t,f,s,r,n[c+12],20,-1926607734),r=Qt(r,t,f,s,n[c+5],4,-378558),s=Qt(s,r,t,f,n[c+8],11,-2022574463),f=Qt(f,s,r,t,n[c+11],16,1839030562),t=Qt(t,f,s,r,n[c+14],23,-35309556),r=Qt(r,t,f,s,n[c+1],4,-1530992060),s=Qt(s,r,t,f,n[c+4],11,1272893353),f=Qt(f,s,r,t,n[c+7],16,-155497632),t=Qt(t,f,s,r,n[c+10],23,-1094730640),r=Qt(r,t,f,s,n[c+13],4,681279174),s=Qt(s,r,t,f,n[c],11,-358537222),f=Qt(f,s,r,t,n[c+3],16,-722521979),t=Qt(t,f,s,r,n[c+6],23,76029189),r=Qt(r,t,f,s,n[c+9],4,-640364487),s=Qt(s,r,t,f,n[c+12],11,-421815835),f=Qt(f,s,r,t,n[c+15],16,530742520),t=Qt(t,f,s,r,n[c+2],23,-995338651),r=te(r,t,f,s,n[c],6,-198630844),s=te(s,r,t,f,n[c+7],10,1126891415),f=te(f,s,r,t,n[c+14],15,-1416354905),t=te(t,f,s,r,n[c+5],21,-57434055),r=te(r,t,f,s,n[c+12],6,1700485571),s=te(s,r,t,f,n[c+3],10,-1894986606),f=te(f,s,r,t,n[c+10],15,-1051523),t=te(t,f,s,r,n[c+1],21,-2054922799),r=te(r,t,f,s,n[c+8],6,1873313359),s=te(s,r,t,f,n[c+15],10,-30611744),f=te(f,s,r,t,n[c+6],15,-1560198380),t=te(t,f,s,r,n[c+13],21,1309151649),r=te(r,t,f,s,n[c+4],6,-145523070),s=te(s,r,t,f,n[c+11],10,-1120210379),f=te(f,s,r,t,n[c+2],15,718787259),t=te(t,f,s,r,n[c+9],21,-343485551),r=we(r,b),t=we(t,g),f=we(f,A),s=we(s,T)}return[r,t,f,s]}function ra(n){if(n.length===0)return[];for(var e=n.length*8,r=new Uint32Array(Gi(e)),t=0;t<e;t+=8)r[t>>5]|=(n[t/8]&255)<<t%32;return r}function we(n,e){var r=(n&65535)+(e&65535),t=(n>>16)+(e>>16)+(r>>16);return t<<16|r&65535}function ia(n,e){return n<<e|n>>>32-e}function bn(n,e,r,t,f,s){return we(ia(we(we(e,n),we(t,s)),f),r)}function Xt(n,e,r,t,f,s,c){return bn(e&r|~e&t,n,e,f,s,c)}function Jt(n,e,r,t,f,s,c){return bn(e&t|r&~t,n,e,f,s,c)}function Qt(n,e,r,t,f,s,c){return bn(e^r^t,n,e,f,s,c)}function te(n,e,r,t,f,s,c){return bn(r^(e|~t),n,e,f,s,c)}var sa=Hi("v3",48,ta);function oa(n,e,r){n=n||{};var t=n.random||(n.rng||ji)();if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,e){r=r||0;for(var f=0;f<16;++f)e[r+f]=t[f];return e}return vn(t)}function aa(n,e,r,t){switch(n){case 0:return e&r^~e&t;case 1:return e^r^t;case 2:return e&r^e&t^r&t;case 3:return e^r^t}}function rr(n,e){return n<<e|n>>>32-e}function ua(n){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=[];for(var f=0;f<t.length;++f)n.push(t.charCodeAt(f))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var s=n.length/4+2,c=Math.ceil(s/16),b=new Array(c),g=0;g<c;++g){for(var A=new Uint32Array(16),T=0;T<16;++T)A[T]=n[g*64+T*4]<<24|n[g*64+T*4+1]<<16|n[g*64+T*4+2]<<8|n[g*64+T*4+3];b[g]=A}b[c-1][14]=(n.length-1)*8/Math.pow(2,32),b[c-1][14]=Math.floor(b[c-1][14]),b[c-1][15]=(n.length-1)*8&4294967295;for(var F=0;F<c;++F){for(var I=new Uint32Array(80),_=0;_<16;++_)I[_]=b[F][_];for(var N=16;N<80;++N)I[N]=rr(I[N-3]^I[N-8]^I[N-14]^I[N-16],1);for(var O=r[0],z=r[1],q=r[2],V=r[3],D=r[4],G=0;G<80;++G){var X=Math.floor(G/20),H=rr(O,5)+aa(X,z,q,V)+D+e[X]+I[G]>>>0;D=V,V=q,q=rr(z,30)>>>0,z=O,O=H}r[0]=r[0]+O>>>0,r[1]=r[1]+z>>>0,r[2]=r[2]+q>>>0,r[3]=r[3]+V>>>0,r[4]=r[4]+D>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var fa=Hi("v5",80,ua);const ca="00000000-0000-0000-0000-000000000000";function la(n){if(!wn(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const ha=Object.freeze(Object.defineProperty({__proto__:null,NIL:ca,parse:Yi,stringify:vn,v1:Wo,v3:sa,v4:oa,v5:fa,validate:wn,version:la},Symbol.toStringTag,{value:"Module"})),Wi=pr(ha);var ir,ci;function da(){if(ci)return ir;ci=1;const n=Wi.v4;return ir=function(r,t,f,s){if(typeof r!="string")throw new TypeError(r+" must be a string");s=s||{};const c=typeof s.version=="number"?s.version:2;if(c!==1&&c!==2)throw new TypeError(c+" must be 1 or 2");const b={method:r};if(c===2&&(b.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");b.params=t}if(typeof f>"u"){const g=typeof s.generator=="function"?s.generator:function(){return n()};b.id=g(b,s)}else c===2&&f===null?s.notificationIdNull&&(b.id=null):b.id=f;return b},ir}var sr,li;function pa(){if(li)return sr;li=1;const n=Wi.v4,e=da(),r=function(t,f){if(!(this instanceof r))return new r(t,f);f||(f={}),this.options={reviver:typeof f.reviver<"u"?f.reviver:null,replacer:typeof f.replacer<"u"?f.replacer:null,generator:typeof f.generator<"u"?f.generator:function(){return n()},version:typeof f.version<"u"?f.version:2,notificationIdNull:typeof f.notificationIdNull=="boolean"?f.notificationIdNull:!1},this.callServer=t};return sr=r,r.prototype.request=function(t,f,s,c){const b=this;let g=null;const A=Array.isArray(t)&&typeof f=="function";if(this.options.version===1&&A)throw new TypeError("JSON-RPC 1.0 does not support batching");if(A||!A&&t&&typeof t=="object"&&typeof f=="function")c=f,g=t;else{typeof s=="function"&&(c=s,s=void 0);const I=typeof c=="function";try{g=e(t,f,s,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(_){if(I)return c(_);throw _}if(!I)return g}let F;try{F=JSON.stringify(g,this.options.replacer)}catch(I){return c(I)}return this.callServer(F,function(I,_){b._parseResponse(I,_,c)}),g},r.prototype._parseResponse=function(t,f,s){if(t){s(t);return}if(!f)return s();let c;try{c=JSON.parse(f,this.options.reviver)}catch(b){return s(b)}if(s.length===3)if(Array.isArray(c)){const b=function(A){return typeof A.error<"u"},g=function(A){return!b(A)};return s(null,c.filter(b),c.filter(g))}else return s(null,c.error,c.result);s(null,c)},sr}pa();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hi=(n,e)=>(n+(n>=0?e:-e)/Xi)/e;function ga(n,e,r){const[[t,f],[s,c]]=e,b=hi(c*n,r),g=hi(-f*n,r);let A=n-b*t-g*s,T=-b*f-g*c;const F=A<ye,I=T<ye;F&&(A=-A),I&&(T=-T);const _=$e(Math.ceil(Ei(r)/2))+Ue;if(A<ye||A>=_||T<ye||T>=_)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:F,k1:A,k2neg:I,k2:T}}function fr(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function or(n,e){const r={};for(let t of Object.keys(e))r[t]=n[t]===void 0?e[t]:n[t];return Se(r.lowS,"lowS"),Se(r.prehash,"prehash"),r.format!==void 0&&fr(r.format),r}class ya extends Error{constructor(e=""){super(e)}}const de={Err:ya,_tlv:{encode:(n,e)=>{const{Err:r}=de;if(n<0||n>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const t=e.length/2,f=We(t);if(f.length/2&128)throw new r("tlv.encode: long form length too big");const s=t>127?We(f.length/2|128):"";return We(n)+s+f+e},decode(n,e){const{Err:r}=de;let t=0;if(n<0||n>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[t++]!==n)throw new r("tlv.decode: wrong tlv");const f=e[t++],s=!!(f&128);let c=0;if(!s)c=f;else{const g=f&127;if(!g)throw new r("tlv.decode(long): indefinite length not supported");if(g>4)throw new r("tlv.decode(long): byte length is too big");const A=e.subarray(t,t+g);if(A.length!==g)throw new r("tlv.decode: length bytes not complete");if(A[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const T of A)c=c<<8|T;if(t+=g,c<128)throw new r("tlv.decode(long): not minimal encoding")}const b=e.subarray(t,t+c);if(b.length!==c)throw new r("tlv.decode: wrong value length");return{v:b,l:e.subarray(t+c)}}},_int:{encode(n){const{Err:e}=de;if(n<ye)throw new e("integer: negative integers are not allowed");let r=We(n);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(n){const{Err:e}=de;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return yn(n)}},toSig(n){const{Err:e,_int:r,_tlv:t}=de,f=ct("signature",n),{v:s,l:c}=t.decode(48,f);if(c.length)throw new e("invalid signature: left bytes after parsing");const{v:b,l:g}=t.decode(2,s),{v:A,l:T}=t.decode(2,g);if(T.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(b),s:r.decode(A)}},hexFromSig(n){const{_tlv:e,_int:r}=de,t=e.encode(2,r.encode(n.r)),f=e.encode(2,r.encode(n.s)),s=t+f;return e.encode(48,s)}},ye=BigInt(0),Ue=BigInt(1),Xi=BigInt(2),Qe=BigInt(3),ma=BigInt(4);function Re(n,e){const{BYTES:r}=n;let t;if(typeof e=="bigint")t=e;else{let f=ct("private key",e);try{t=n.fromBytes(f)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof e}`)}}if(!n.isValidNot0(t))throw new Error("invalid private key: out of range [1..N-1]");return t}function wa(n,e={}){const r=zi("weierstrass",n,e),{Fp:t,Fn:f}=r;let s=r.CURVE;const{h:c,n:b}=s;Ze(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:g}=e;if(g&&(!t.is0(s.a)||typeof g.beta!="bigint"||!Array.isArray(g.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const A=Qi(t,f);function T(){if(!t.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function F(U,h,i){const{x:u,y:l}=h.toAffine(),p=t.toBytes(u);if(Se(i,"isCompressed"),i){T();const m=!t.isOdd(l);return ce(Ji(m),p)}else return ce(Uint8Array.of(4),p,t.toBytes(l))}function I(U){ae(U,void 0,"Point");const{publicKey:h,publicKeyUncompressed:i}=A,u=U.length,l=U[0],p=U.subarray(1);if(u===h&&(l===2||l===3)){const m=t.fromBytes(p);if(!t.isValid(m))throw new Error("bad point: is not on curve, wrong x");const v=O(m);let E;try{E=t.sqrt(v)}catch(a){const d=a instanceof Error?": "+a.message:"";throw new Error("bad point: is not on curve, sqrt error"+d)}T();const y=t.isOdd(E);return(l&1)===1!==y&&(E=t.neg(E)),{x:m,y:E}}else if(u===i&&l===4){const m=t.BYTES,v=t.fromBytes(p.subarray(0,m)),E=t.fromBytes(p.subarray(m,m*2));if(!z(v,E))throw new Error("bad point: is not on curve");return{x:v,y:E}}else throw new Error(`bad point: got length ${u}, expected compressed=${h} or uncompressed=${i}`)}const _=e.toBytes||F,N=e.fromBytes||I;function O(U){const h=t.sqr(U),i=t.mul(h,U);return t.add(t.add(i,t.mul(U,s.a)),s.b)}function z(U,h){const i=t.sqr(h),u=O(U);return t.eql(i,u)}if(!z(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const q=t.mul(t.pow(s.a,Qe),ma),V=t.mul(t.sqr(s.b),BigInt(27));if(t.is0(t.add(q,V)))throw new Error("bad curve params: a or b");function D(U,h,i=!1){if(!t.isValid(h)||i&&t.is0(h))throw new Error(`bad point coordinate ${U}`);return h}function G(U){if(!(U instanceof M))throw new Error("ProjectivePoint expected")}function X(U){if(!g||!g.basises)throw new Error("no endo");return ga(U,g.basises,f.ORDER)}const H=rn((U,h)=>{const{X:i,Y:u,Z:l}=U;if(t.eql(l,t.ONE))return{x:i,y:u};const p=U.is0();h==null&&(h=p?t.ONE:t.inv(l));const m=t.mul(i,h),v=t.mul(u,h),E=t.mul(l,h);if(p)return{x:t.ZERO,y:t.ZERO};if(!t.eql(E,t.ONE))throw new Error("invZ was invalid");return{x:m,y:v}}),tt=rn(U=>{if(U.is0()){if(e.allowInfinityPoint&&!t.is0(U.Y))return;throw new Error("bad point: ZERO")}const{x:h,y:i}=U.toAffine();if(!t.isValid(h)||!t.isValid(i))throw new Error("bad point: x or y not field elements");if(!z(h,i))throw new Error("bad point: equation left != right");if(!U.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function J(U,h,i,u,l){return i=new M(t.mul(i.X,U),i.Y,i.Z),h=sn(u,h),i=sn(l,i),h.add(i)}class M{constructor(h,i,u){this.X=D("x",h),this.Y=D("y",i,!0),this.Z=D("z",u),Object.freeze(this)}static CURVE(){return s}static fromAffine(h){const{x:i,y:u}=h||{};if(!h||!t.isValid(i)||!t.isValid(u))throw new Error("invalid affine point");if(h instanceof M)throw new Error("projective point not allowed");return t.is0(i)&&t.is0(u)?M.ZERO:new M(i,u,t.ONE)}static fromBytes(h){const i=M.fromAffine(N(ae(h,void 0,"point")));return i.assertValidity(),i}static fromHex(h){return M.fromBytes(ct("pointHex",h))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(h=8,i=!0){return L.createCache(this,h),i||this.multiply(Qe),this}assertValidity(){tt(this)}hasEvenY(){const{y:h}=this.toAffine();if(!t.isOdd)throw new Error("Field doesn't support isOdd");return!t.isOdd(h)}equals(h){G(h);const{X:i,Y:u,Z:l}=this,{X:p,Y:m,Z:v}=h,E=t.eql(t.mul(i,v),t.mul(p,l)),y=t.eql(t.mul(u,v),t.mul(m,l));return E&&y}negate(){return new M(this.X,t.neg(this.Y),this.Z)}double(){const{a:h,b:i}=s,u=t.mul(i,Qe),{X:l,Y:p,Z:m}=this;let v=t.ZERO,E=t.ZERO,y=t.ZERO,o=t.mul(l,l),a=t.mul(p,p),d=t.mul(m,m),w=t.mul(l,p);return w=t.add(w,w),y=t.mul(l,m),y=t.add(y,y),v=t.mul(h,y),E=t.mul(u,d),E=t.add(v,E),v=t.sub(a,E),E=t.add(a,E),E=t.mul(v,E),v=t.mul(w,v),y=t.mul(u,y),d=t.mul(h,d),w=t.sub(o,d),w=t.mul(h,w),w=t.add(w,y),y=t.add(o,o),o=t.add(y,o),o=t.add(o,d),o=t.mul(o,w),E=t.add(E,o),d=t.mul(p,m),d=t.add(d,d),o=t.mul(d,w),v=t.sub(v,o),y=t.mul(d,a),y=t.add(y,y),y=t.add(y,y),new M(v,E,y)}add(h){G(h);const{X:i,Y:u,Z:l}=this,{X:p,Y:m,Z:v}=h;let E=t.ZERO,y=t.ZERO,o=t.ZERO;const a=s.a,d=t.mul(s.b,Qe);let w=t.mul(i,p),B=t.mul(u,m),C=t.mul(l,v),$=t.add(i,u),Y=t.add(p,m);$=t.mul($,Y),Y=t.add(w,B),$=t.sub($,Y),Y=t.add(i,l);let it=t.add(p,v);return Y=t.mul(Y,it),it=t.add(w,C),Y=t.sub(Y,it),it=t.add(u,l),E=t.add(m,v),it=t.mul(it,E),E=t.add(B,C),it=t.sub(it,E),o=t.mul(a,Y),E=t.mul(d,C),o=t.add(E,o),E=t.sub(B,o),o=t.add(B,o),y=t.mul(E,o),B=t.add(w,w),B=t.add(B,w),C=t.mul(a,C),Y=t.mul(d,Y),B=t.add(B,C),C=t.sub(w,C),C=t.mul(a,C),Y=t.add(Y,C),w=t.mul(B,Y),y=t.add(y,w),w=t.mul(it,Y),E=t.mul($,E),E=t.sub(E,w),w=t.mul($,B),o=t.mul(it,o),o=t.add(o,w),new M(E,y,o)}subtract(h){return this.add(h.negate())}is0(){return this.equals(M.ZERO)}multiply(h){const{endo:i}=e;if(!f.isValidNot0(h))throw new Error("invalid scalar: out of range");let u,l;const p=m=>L.cached(this,m,v=>Ee(M,v));if(i){const{k1neg:m,k1:v,k2neg:E,k2:y}=X(h),{p:o,f:a}=p(v),{p:d,f:w}=p(y);l=a.add(w),u=J(i.beta,o,d,m,E)}else{const{p:m,f:v}=p(h);u=m,l=v}return Ee(M,[u,l])[0]}multiplyUnsafe(h){const{endo:i}=e,u=this;if(!f.isValid(h))throw new Error("invalid scalar: out of range");if(h===ye||u.is0())return M.ZERO;if(h===Ue)return u;if(L.hasCache(this))return this.multiply(h);if(i){const{k1neg:l,k1:p,k2neg:m,k2:v}=X(h),{p1:E,p2:y}=Vs(M,u,p,v);return J(i.beta,E,y,l,m)}else return L.unsafe(u,h)}multiplyAndAddUnsafe(h,i,u){const l=this.multiplyUnsafe(i).add(h.multiplyUnsafe(u));return l.is0()?void 0:l}toAffine(h){return H(this,h)}isTorsionFree(){const{isTorsionFree:h}=e;return c===Ue?!0:h?h(M,this):L.unsafe(this,b).is0()}clearCofactor(){const{clearCofactor:h}=e;return c===Ue?this:h?h(M,this):this.multiplyUnsafe(c)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}toBytes(h=!0){return Se(h,"isCompressed"),this.assertValidity(),_(M,this,h)}toHex(h=!0){return Me(this.toBytes(h))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(h=!0){return this.toBytes(h)}_setWindowSize(h){this.precompute(h)}static normalizeZ(h){return Ee(M,h)}static msm(h,i){return Ni(M,f,h,i)}static fromPrivateKey(h){return M.BASE.multiply(Re(f,h))}}M.BASE=new M(s.Gx,s.Gy,t.ONE),M.ZERO=new M(t.ZERO,t.ONE,t.ZERO),M.Fp=t,M.Fn=f;const S=f.BITS,L=new qi(M,e.endo?Math.ceil(S/2):S);return M.BASE.precompute(8),M}function Ji(n){return Uint8Array.of(n?2:3)}function Qi(n,e){return{secretKey:e.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function va(n,e={}){const{Fn:r}=n,t=e.randomBytes||dr,f=Object.assign(Qi(n.Fp,r),{seed:Ui(r.ORDER)});function s(_){try{return!!Re(r,_)}catch{return!1}}function c(_,N){const{publicKey:O,publicKeyUncompressed:z}=f;try{const q=_.length;return N===!0&&q!==O||N===!1&&q!==z?!1:!!n.fromBytes(_)}catch{return!1}}function b(_=t(f.seed)){return Ks(ae(_,f.seed,"seed"),r.ORDER)}function g(_,N=!0){return n.BASE.multiply(Re(r,_)).toBytes(N)}function A(_){const N=b(_);return{secretKey:N,publicKey:g(N)}}function T(_){if(typeof _=="bigint")return!1;if(_ instanceof n)return!0;const{secretKey:N,publicKey:O,publicKeyUncompressed:z}=f;if(r.allowedLengths||N===O)return;const q=ct("key",_).length;return q===O||q===z}function F(_,N,O=!0){if(T(_)===!0)throw new Error("first arg must be private key");if(T(N)===!1)throw new Error("second arg must be public key");const z=Re(r,_);return n.fromHex(N).multiply(z).toBytes(O)}return Object.freeze({getPublicKey:g,getSharedSecret:F,keygen:A,Point:n,utils:{isValidSecretKey:s,isValidPublicKey:c,randomSecretKey:b,isValidPrivateKey:s,randomPrivateKey:b,normPrivateKeyToScalar:_=>Re(r,_),precompute(_=8,N=n.BASE){return N.precompute(_,!1)}},lengths:f})}function ba(n,e,r={}){Es(e),Ze(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const t=r.randomBytes||dr,f=r.hmac||((i,...u)=>Ms(e,i,ce(...u))),{Fp:s,Fn:c}=n,{ORDER:b,BITS:g}=c,{keygen:A,getPublicKey:T,getSharedSecret:F,utils:I,lengths:_}=va(n,r),N={prehash:!1,lowS:typeof r.lowS=="boolean"?r.lowS:!1,format:void 0,extraEntropy:!1},O="compact";function z(i){const u=b>>Ue;return i>u}function q(i,u){if(!c.isValidNot0(u))throw new Error(`invalid signature ${i}: out of range 1..Point.Fn.ORDER`);return u}function V(i,u){fr(u);const l=_.signature,p=u==="compact"?l:u==="recovered"?l+1:void 0;return ae(i,p,`${u} signature`)}class D{constructor(u,l,p){this.r=q("r",u),this.s=q("s",l),p!=null&&(this.recovery=p),Object.freeze(this)}static fromBytes(u,l=O){V(u,l);let p;if(l==="der"){const{r:y,s:o}=de.toSig(ae(u));return new D(y,o)}l==="recovered"&&(p=u[0],l="compact",u=u.subarray(1));const m=c.BYTES,v=u.subarray(0,m),E=u.subarray(m,m*2);return new D(c.fromBytes(v),c.fromBytes(E),p)}static fromHex(u,l){return this.fromBytes(nn(u),l)}addRecoveryBit(u){return new D(this.r,this.s,u)}recoverPublicKey(u){const l=s.ORDER,{r:p,s:m,recovery:v}=this;if(v==null||![0,1,2,3].includes(v))throw new Error("recovery id invalid");if(b*Xi<l&&v>1)throw new Error("recovery id is ambiguous for h>1 curve");const y=v===2||v===3?p+b:p;if(!s.isValid(y))throw new Error("recovery id 2 or 3 invalid");const o=s.toBytes(y),a=n.fromBytes(ce(Ji((v&1)===0),o)),d=c.inv(y),w=X(ct("msgHash",u)),B=c.create(-w*d),C=c.create(m*d),$=n.BASE.multiplyUnsafe(B).add(a.multiplyUnsafe(C));if($.is0())throw new Error("point at infinify");return $.assertValidity(),$}hasHighS(){return z(this.s)}toBytes(u=O){if(fr(u),u==="der")return nn(de.hexFromSig(this));const l=c.toBytes(this.r),p=c.toBytes(this.s);if(u==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return ce(Uint8Array.of(this.recovery),l,p)}return ce(l,p)}toHex(u){return Me(this.toBytes(u))}assertValidity(){}static fromCompact(u){return D.fromBytes(ct("sig",u),"compact")}static fromDER(u){return D.fromBytes(ct("sig",u),"der")}normalizeS(){return this.hasHighS()?new D(this.r,c.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Me(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Me(this.toBytes("compact"))}}const G=r.bits2int||function(u){if(u.length>8192)throw new Error("input is too large");const l=yn(u),p=u.length*8-g;return p>0?l>>BigInt(p):l},X=r.bits2int_modN||function(u){return c.create(G(u))},H=$e(g);function tt(i){return ur("num < 2^"+g,i,ye,H),c.toBytes(i)}function J(i,u){return ae(i,void 0,"message"),u?ae(e(i),void 0,"prehashed message"):i}function M(i,u,l){if(["recovered","canonical"].some(B=>B in l))throw new Error("sign() legacy options not supported");const{lowS:p,prehash:m,extraEntropy:v}=or(l,N);i=J(i,m);const E=X(i),y=Re(c,u),o=[tt(y),tt(E)];if(v!=null&&v!==!1){const B=v===!0?t(_.secretKey):v;o.push(ct("extraEntropy",B))}const a=ce(...o),d=E;function w(B){const C=G(B);if(!c.isValidNot0(C))return;const $=c.inv(C),Y=n.BASE.multiply(C).toAffine(),it=c.create(Y.x);if(it===ye)return;const st=c.create($*c.create(d+it*y));if(st===ye)return;let at=(Y.x===it?0:2)|Number(Y.y&Ue),De=st;return p&&z(st)&&(De=c.neg(st),at^=1),new D(it,De,at)}return{seed:a,k2sig:w}}function S(i,u,l={}){i=ct("message",i);const{seed:p,k2sig:m}=M(i,u,l);return ks(e.outputLen,c.BYTES,f)(p,m)}function L(i){let u;const l=typeof i=="string"||gn(i),p=!l&&i!==null&&typeof i=="object"&&typeof i.r=="bigint"&&typeof i.s=="bigint";if(!l&&!p)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(p)u=new D(i.r,i.s);else if(l){try{u=D.fromBytes(ct("sig",i),"der")}catch(m){if(!(m instanceof de.Err))throw m}if(!u)try{u=D.fromBytes(ct("sig",i),"compact")}catch{return!1}}return u||!1}function U(i,u,l,p={}){const{lowS:m,prehash:v,format:E}=or(p,N);if(l=ct("publicKey",l),u=J(ct("message",u),v),"strict"in p)throw new Error("options.strict was renamed to lowS");const y=E===void 0?L(i):D.fromBytes(ct("sig",i),E);if(y===!1)return!1;try{const o=n.fromBytes(l);if(m&&y.hasHighS())return!1;const{r:a,s:d}=y,w=X(u),B=c.inv(d),C=c.create(w*B),$=c.create(a*B),Y=n.BASE.multiplyUnsafe(C).add(o.multiplyUnsafe($));return Y.is0()?!1:c.create(Y.x)===a}catch{return!1}}function h(i,u,l={}){const{prehash:p}=or(l,N);return u=J(u,p),D.fromBytes(i,"recovered").recoverPublicKey(u).toBytes()}return Object.freeze({keygen:A,getPublicKey:T,getSharedSecret:F,utils:I,lengths:_,Point:n,sign:S,verify:U,recoverPublicKey:h,Signature:D,hash:e})}function xa(n){const e={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},r=n.Fp;let t=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(c=>Math.ceil(c/2)))):void 0;const f=Be(e.n,{BITS:n.nBitLength,allowedLengths:t,modFromBytes:n.wrapPrivateKey}),s={Fp:r,Fn:f,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:e,curveOpts:s}}function Ea(n){const{CURVE:e,curveOpts:r}=xa(n),t={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:e,curveOpts:r,hash:n.hash,ecdsaOpts:t}}function Ma(n,e){const r=e.Point;return Object.assign({},e,{ProjectivePoint:r,CURVE:Object.assign({},n,Li(r.Fn.ORDER,r.Fn.BITS))})}function Sa(n){const{CURVE:e,curveOpts:r,hash:t,ecdsaOpts:f}=Ea(n),s=wa(e,r),c=ba(s,t,f);return Ma(n,c)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ba(n,e){const r=t=>Sa({...n,hash:t});return{...r(e),create:r}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Mr={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Aa={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},di=BigInt(2);function Ia(n){const e=Mr.p,r=BigInt(3),t=BigInt(6),f=BigInt(11),s=BigInt(22),c=BigInt(23),b=BigInt(44),g=BigInt(88),A=n*n*n%e,T=A*A*n%e,F=ft(T,r,e)*T%e,I=ft(F,r,e)*T%e,_=ft(I,di,e)*A%e,N=ft(_,f,e)*_%e,O=ft(N,s,e)*N%e,z=ft(O,b,e)*O%e,q=ft(z,g,e)*z%e,V=ft(q,b,e)*O%e,D=ft(V,r,e)*T%e,G=ft(D,c,e)*N%e,X=ft(G,t,e)*A%e,H=ft(X,di,e);if(!cr.eql(cr.sqr(H),n))throw new Error("Cannot find square root");return H}const cr=Be(Mr.p,{sqrt:Ia}),_a=Ba({...Mr,Fp:cr,lowS:!0,endo:Aa},Ss);je.utils.randomPrivateKey;je.getPublicKey;function pi(n){try{return je.ExtendedPoint.fromHex(n),!0}catch{return!1}}const ts=(n,e)=>je.sign(n,e.slice(0,32)),ka=je.verify,Sr=n=>et.Buffer.isBuffer(n)?n:n instanceof Uint8Array?et.Buffer.from(n.buffer,n.byteOffset,n.byteLength):et.Buffer.from(n);class Ra{constructor(e){Object.assign(this,e)}encode(){return et.Buffer.from(Jn.serialize(en,this))}static decode(e){return Jn.deserialize(en,this,e)}static decodeUnchecked(e){return Jn.deserializeUnchecked(en,this,e)}}const en=new Map;var es;const La=32,ve=32;function Oa(n){return n._bn!==void 0}let gi=1;class Q extends Ra{constructor(e){if(super({}),this._bn=void 0,Oa(e))this._bn=e._bn;else{if(typeof e=="string"){const r=ee.decode(e);if(r.length!=ve)throw new Error("Invalid public key input");this._bn=new ni(r)}else this._bn=new ni(e);if(this._bn.byteLength()>ve)throw new Error("Invalid public key input")}}static unique(){const e=new Q(gi);return gi+=1,new Q(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return ee.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(et.Buffer);if(e.length===ve)return e;const r=et.Buffer.alloc(32);return e.copy(r,32-e.length),r}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,r,t){const f=et.Buffer.concat([e.toBuffer(),et.Buffer.from(r),t.toBuffer()]),s=jr(f);return new Q(s)}static createProgramAddressSync(e,r){let t=et.Buffer.alloc(0);e.forEach(function(s){if(s.length>La)throw new TypeError("Max seed length exceeded");t=et.Buffer.concat([t,Sr(s)])}),t=et.Buffer.concat([t,r.toBuffer(),et.Buffer.from("ProgramDerivedAddress")]);const f=jr(t);if(pi(f))throw new Error("Invalid seeds, address must fall off the curve");return new Q(f)}static async createProgramAddress(e,r){return this.createProgramAddressSync(e,r)}static findProgramAddressSync(e,r){let t=255,f;for(;t!=0;){try{const s=e.concat(et.Buffer.from([t]));f=this.createProgramAddressSync(s,r)}catch(s){if(s instanceof TypeError)throw s;t--;continue}return[f,t]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,r){return this.findProgramAddressSync(e,r)}static isOnCurve(e){const r=new Q(e);return pi(r.toBytes())}}es=Q;Q.default=new es("11111111111111111111111111111111");en.set(Q,{kind:"struct",fields:[["_bn","u256"]]});new Q("BPFLoader1111111111111111111111111111111111");const Te=1232,Br=127,ln=64;class hn{constructor(e,r){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=r}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const r of this.keySegments()){if(e<r.length)return r[e];e-=r.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const t=new Map;this.keySegments().flat().forEach((s,c)=>{t.set(s.toBase58(),c)});const f=s=>{const c=t.get(s.toBase58());if(c===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return c};return e.map(s=>({programIdIndex:f(s.programId),accountKeyIndexes:s.keys.map(c=>f(c.pubkey)),data:s.data}))}}const nt=(n="publicKey")=>x.blob(32,n),Ua=(n="signature")=>x.blob(64,n),Le=(n="string")=>{const e=x.struct([x.u32("length"),x.u32("lengthPadding"),x.blob(x.offset(x.u32(),-8),"chars")],n),r=e.decode.bind(e),t=e.encode.bind(e),f=e;return f.decode=(s,c)=>r(s,c).chars.toString(),f.encode=(s,c,b)=>{const g={chars:et.Buffer.from(s,"utf8")};return t(g,c,b)},f.alloc=s=>x.u32().span+x.u32().span+et.Buffer.from(s,"utf8").length,f},Ta=(n="authorized")=>x.struct([nt("staker"),nt("withdrawer")],n),Ca=(n="lockup")=>x.struct([x.ns64("unixTimestamp"),x.ns64("epoch"),nt("custodian")],n),qa=(n="voteInit")=>x.struct([nt("nodePubkey"),nt("authorizedVoter"),nt("authorizedWithdrawer"),x.u8("commission")],n),Na=(n="voteAuthorizeWithSeedArgs")=>x.struct([x.u32("voteAuthorizationType"),nt("currentAuthorityDerivedKeyOwnerPubkey"),Le("currentAuthorityDerivedKeySeed"),nt("newAuthorized")],n);function ie(n){let e=0,r=0;for(;;){let t=n.shift();if(e|=(t&127)<<r*7,r+=1,(t&128)===0)break}return e}function se(n,e){let r=e;for(;;){let t=r&127;if(r>>=7,r==0){n.push(t);break}else t|=128,n.push(t)}}function Yt(n,e){if(!n)throw new Error(e||"Assertion failed")}class xn{constructor(e,r){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=r}static compile(e,r){const t=new Map,f=c=>{const b=c.toBase58();let g=t.get(b);return g===void 0&&(g={isSigner:!1,isWritable:!1,isInvoked:!1},t.set(b,g)),g},s=f(r);s.isSigner=!0,s.isWritable=!0;for(const c of e){f(c.programId).isInvoked=!0;for(const b of c.keys){const g=f(b.pubkey);g.isSigner||(g.isSigner=b.isSigner),g.isWritable||(g.isWritable=b.isWritable)}}return new xn(r,t)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Yt(e.length<=256,"Max static account keys length exceeded");const r=e.filter(([,g])=>g.isSigner&&g.isWritable),t=e.filter(([,g])=>g.isSigner&&!g.isWritable),f=e.filter(([,g])=>!g.isSigner&&g.isWritable),s=e.filter(([,g])=>!g.isSigner&&!g.isWritable),c={numRequiredSignatures:r.length+t.length,numReadonlySignedAccounts:t.length,numReadonlyUnsignedAccounts:s.length};{Yt(r.length>0,"Expected at least one writable signer key");const[g]=r[0];Yt(g===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const b=[...r.map(([g])=>new Q(g)),...t.map(([g])=>new Q(g)),...f.map(([g])=>new Q(g)),...s.map(([g])=>new Q(g))];return[c,b]}extractTableLookup(e){const[r,t]=this.drainKeysFoundInLookupTable(e.state.addresses,c=>!c.isSigner&&!c.isInvoked&&c.isWritable),[f,s]=this.drainKeysFoundInLookupTable(e.state.addresses,c=>!c.isSigner&&!c.isInvoked&&!c.isWritable);if(!(r.length===0&&f.length===0))return[{accountKey:e.key,writableIndexes:r,readonlyIndexes:f},{writable:t,readonly:s}]}drainKeysFoundInLookupTable(e,r){const t=new Array,f=new Array;for(const[s,c]of this.keyMetaMap.entries())if(r(c)){const b=new Q(s),g=e.findIndex(A=>A.equals(b));g>=0&&(Yt(g<256,"Max lookup table index exceeded"),t.push(g),f.push(b),this.keyMetaMap.delete(s))}return[t,f]}}const ns="Reached end of buffer unexpectedly";function ge(n){if(n.length===0)throw new Error(ns);return n.shift()}function oe(n,...e){const[r]=e;if(e.length===2?r+(e[1]??0)>n.length:r>=n.length)throw new Error(ns);return n.splice(...e)}class Ne{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(r=>new Q(r)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(r=>this.indexToProgramIds.set(r.programIdIndex,this.accountKeys[r.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:ee.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new hn(this.staticAccountKeys)}static compile(e){const r=xn.compile(e.instructions,e.payerKey),[t,f]=r.getMessageComponents(),c=new hn(f).compileInstructions(e.instructions).map(b=>({programIdIndex:b.programIdIndex,accounts:b.accountKeyIndexes,data:ee.encode(b.data)}));return new Ne({header:t,accountKeys:f,recentBlockhash:e.recentBlockhash,instructions:c})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const r=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const t=e-r,s=this.accountKeys.length-r-this.header.numReadonlyUnsignedAccounts;return t<s}else{const t=r-this.header.numReadonlySignedAccounts;return e<t}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,r)=>!this.isProgramId(r))}serialize(){const e=this.accountKeys.length;let r=[];se(r,e);const t=this.instructions.map(F=>{const{accounts:I,programIdIndex:_}=F,N=Array.from(ee.decode(F.data));let O=[];se(O,I.length);let z=[];return se(z,N.length),{programIdIndex:_,keyIndicesCount:et.Buffer.from(O),keyIndices:I,dataLength:et.Buffer.from(z),data:N}});let f=[];se(f,t.length);let s=et.Buffer.alloc(Te);et.Buffer.from(f).copy(s);let c=f.length;t.forEach(F=>{const _=x.struct([x.u8("programIdIndex"),x.blob(F.keyIndicesCount.length,"keyIndicesCount"),x.seq(x.u8("keyIndex"),F.keyIndices.length,"keyIndices"),x.blob(F.dataLength.length,"dataLength"),x.seq(x.u8("userdatum"),F.data.length,"data")]).encode(F,s,c);c+=_}),s=s.slice(0,c);const b=x.struct([x.blob(1,"numRequiredSignatures"),x.blob(1,"numReadonlySignedAccounts"),x.blob(1,"numReadonlyUnsignedAccounts"),x.blob(r.length,"keyCount"),x.seq(nt("key"),e,"keys"),nt("recentBlockhash")]),g={numRequiredSignatures:et.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:et.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:et.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:et.Buffer.from(r),keys:this.accountKeys.map(F=>Sr(F.toBytes())),recentBlockhash:ee.decode(this.recentBlockhash)};let A=et.Buffer.alloc(2048);const T=b.encode(g,A);return s.copy(A,T),A.slice(0,T+s.length)}static from(e){let r=[...e];const t=ge(r);if(t!==(t&Br))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const f=ge(r),s=ge(r),c=ie(r);let b=[];for(let I=0;I<c;I++){const _=oe(r,0,ve);b.push(new Q(et.Buffer.from(_)))}const g=oe(r,0,ve),A=ie(r);let T=[];for(let I=0;I<A;I++){const _=ge(r),N=ie(r),O=oe(r,0,N),z=ie(r),q=oe(r,0,z),V=ee.encode(et.Buffer.from(q));T.push({programIdIndex:_,accounts:O,data:V})}const F={header:{numRequiredSignatures:t,numReadonlySignedAccounts:f,numReadonlyUnsignedAccounts:s},recentBlockhash:ee.encode(et.Buffer.from(g)),accountKeys:b,instructions:T};return new Ne(F)}}class dn{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const r of this.addressTableLookups)e+=r.readonlyIndexes.length+r.writableIndexes.length;return e}getAccountKeys(e){let r;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");r=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)r=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new hn(this.staticAccountKeys,r)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const r=this.header.numRequiredSignatures,t=this.staticAccountKeys.length;if(e>=t){const f=e-t,s=this.addressTableLookups.reduce((c,b)=>c+b.writableIndexes.length,0);return f<s}else if(e>=this.header.numRequiredSignatures){const f=e-r,c=t-r-this.header.numReadonlyUnsignedAccounts;return f<c}else{const f=r-this.header.numReadonlySignedAccounts;return e<f}}resolveAddressTableLookups(e){const r={writable:[],readonly:[]};for(const t of this.addressTableLookups){const f=e.find(s=>s.key.equals(t.accountKey));if(!f)throw new Error(`Failed to find address lookup table account for table key ${t.accountKey.toBase58()}`);for(const s of t.writableIndexes)if(s<f.state.addresses.length)r.writable.push(f.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${t.accountKey.toBase58()}`);for(const s of t.readonlyIndexes)if(s<f.state.addresses.length)r.readonly.push(f.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${t.accountKey.toBase58()}`)}return r}static compile(e){const r=xn.compile(e.instructions,e.payerKey),t=new Array,f={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const T of s){const F=r.extractTableLookup(T);if(F!==void 0){const[I,{writable:_,readonly:N}]=F;t.push(I),f.writable.push(..._),f.readonly.push(...N)}}const[c,b]=r.getMessageComponents(),A=new hn(b,f).compileInstructions(e.instructions);return new dn({header:c,staticAccountKeys:b,recentBlockhash:e.recentBlockhash,compiledInstructions:A,addressTableLookups:t})}serialize(){const e=Array();se(e,this.staticAccountKeys.length);const r=this.serializeInstructions(),t=Array();se(t,this.compiledInstructions.length);const f=this.serializeAddressTableLookups(),s=Array();se(s,this.addressTableLookups.length);const c=x.struct([x.u8("prefix"),x.struct([x.u8("numRequiredSignatures"),x.u8("numReadonlySignedAccounts"),x.u8("numReadonlyUnsignedAccounts")],"header"),x.blob(e.length,"staticAccountKeysLength"),x.seq(nt(),this.staticAccountKeys.length,"staticAccountKeys"),nt("recentBlockhash"),x.blob(t.length,"instructionsLength"),x.blob(r.length,"serializedInstructions"),x.blob(s.length,"addressTableLookupsLength"),x.blob(f.length,"serializedAddressTableLookups")]),b=new Uint8Array(Te),A=c.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(T=>T.toBytes()),recentBlockhash:ee.decode(this.recentBlockhash),instructionsLength:new Uint8Array(t),serializedInstructions:r,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:f},b);return b.slice(0,A)}serializeInstructions(){let e=0;const r=new Uint8Array(Te);for(const t of this.compiledInstructions){const f=Array();se(f,t.accountKeyIndexes.length);const s=Array();se(s,t.data.length);const c=x.struct([x.u8("programIdIndex"),x.blob(f.length,"encodedAccountKeyIndexesLength"),x.seq(x.u8(),t.accountKeyIndexes.length,"accountKeyIndexes"),x.blob(s.length,"encodedDataLength"),x.blob(t.data.length,"data")]);e+=c.encode({programIdIndex:t.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(f),accountKeyIndexes:t.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:t.data},r,e)}return r.slice(0,e)}serializeAddressTableLookups(){let e=0;const r=new Uint8Array(Te);for(const t of this.addressTableLookups){const f=Array();se(f,t.writableIndexes.length);const s=Array();se(s,t.readonlyIndexes.length);const c=x.struct([nt("accountKey"),x.blob(f.length,"encodedWritableIndexesLength"),x.seq(x.u8(),t.writableIndexes.length,"writableIndexes"),x.blob(s.length,"encodedReadonlyIndexesLength"),x.seq(x.u8(),t.readonlyIndexes.length,"readonlyIndexes")]);e+=c.encode({accountKey:t.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(f),writableIndexes:t.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:t.readonlyIndexes},r,e)}return r.slice(0,e)}static deserialize(e){let r=[...e];const t=ge(r),f=t&Br;Yt(t!==f,"Expected versioned message but received legacy message");const s=f;Yt(s===0,`Expected versioned message with version 0 but found version ${s}`);const c={numRequiredSignatures:ge(r),numReadonlySignedAccounts:ge(r),numReadonlyUnsignedAccounts:ge(r)},b=[],g=ie(r);for(let N=0;N<g;N++)b.push(new Q(oe(r,0,ve)));const A=ee.encode(oe(r,0,ve)),T=ie(r),F=[];for(let N=0;N<T;N++){const O=ge(r),z=ie(r),q=oe(r,0,z),V=ie(r),D=new Uint8Array(oe(r,0,V));F.push({programIdIndex:O,accountKeyIndexes:q,data:D})}const I=ie(r),_=[];for(let N=0;N<I;N++){const O=new Q(oe(r,0,ve)),z=ie(r),q=oe(r,0,z),V=ie(r),D=oe(r,0,V);_.push({accountKey:O,writableIndexes:q,readonlyIndexes:D})}return new dn({header:c,staticAccountKeys:b,recentBlockhash:A,compiledInstructions:F,addressTableLookups:_})}}const rs={deserializeMessageVersion(n){const e=n[0],r=e&Br;return r===e?"legacy":r},deserialize:n=>{const e=rs.deserializeMessageVersion(n);if(e==="legacy")return Ne.from(n);if(e===0)return dn.deserialize(n);throw new Error(`Transaction message version ${e} deserialization is not supported`)}},za=et.Buffer.alloc(ln).fill(0);class yi{constructor(e){this.keys=void 0,this.programId=void 0,this.data=et.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:r,isWritable:t})=>({pubkey:e.toJSON(),isSigner:r,isWritable:t})),programId:this.programId.toJSON(),data:[...this.data]}}}class lr{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:r,nonceInfo:t}=e;this.minNonceContextSlot=r,this.nonceInfo=t}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:r,lastValidBlockHeight:t}=e;this.recentBlockhash=r,this.lastValidBlockHeight=t}else{const{recentBlockhash:r,nonceInfo:t}=e;t&&(this.nonceInfo=t),this.recentBlockhash=r}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(r=>{"instructions"in r?this.instructions=this.instructions.concat(r.instructions):"data"in r&&"programId"in r&&"keys"in r?this.instructions.push(r):this.instructions.push(new yi(r))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?r=[this.nonceInfo.nonceInstruction,...this.instructions]:r=this.instructions):(e=this.recentBlockhash,r=this.instructions),!e)throw new Error("Transaction recentBlockhash required");r.length<1&&console.warn("No instructions provided");let t;if(this.feePayer)t=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)t=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let O=0;O<r.length;O++)if(r[O].programId===void 0)throw new Error(`Transaction instruction index ${O} has undefined program id`);const f=[],s=[];r.forEach(O=>{O.keys.forEach(q=>{s.push({...q})});const z=O.programId.toString();f.includes(z)||f.push(z)}),f.forEach(O=>{s.push({pubkey:new Q(O),isSigner:!1,isWritable:!1})});const c=[];s.forEach(O=>{const z=O.pubkey.toString(),q=c.findIndex(V=>V.pubkey.toString()===z);q>-1?(c[q].isWritable=c[q].isWritable||O.isWritable,c[q].isSigner=c[q].isSigner||O.isSigner):c.push(O)}),c.sort(function(O,z){if(O.isSigner!==z.isSigner)return O.isSigner?-1:1;if(O.isWritable!==z.isWritable)return O.isWritable?-1:1;const q={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return O.pubkey.toBase58().localeCompare(z.pubkey.toBase58(),"en",q)});const b=c.findIndex(O=>O.pubkey.equals(t));if(b>-1){const[O]=c.splice(b,1);O.isSigner=!0,O.isWritable=!0,c.unshift(O)}else c.unshift({pubkey:t,isSigner:!0,isWritable:!0});for(const O of this.signatures){const z=c.findIndex(q=>q.pubkey.equals(O.publicKey));if(z>-1)c[z].isSigner||(c[z].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${O.publicKey.toString()}`)}let g=0,A=0,T=0;const F=[],I=[];c.forEach(({pubkey:O,isSigner:z,isWritable:q})=>{z?(F.push(O.toString()),g+=1,q||(A+=1)):(I.push(O.toString()),q||(T+=1))});const _=F.concat(I),N=r.map(O=>{const{data:z,programId:q}=O;return{programIdIndex:_.indexOf(q.toString()),accounts:O.keys.map(V=>_.indexOf(V.pubkey.toString())),data:ee.encode(z)}});return N.forEach(O=>{Yt(O.programIdIndex>=0),O.accounts.forEach(z=>Yt(z>=0))}),new Ne({header:{numRequiredSignatures:g,numReadonlySignedAccounts:A,numReadonlyUnsignedAccounts:T},accountKeys:_,recentBlockhash:e,instructions:N})}_compile(){const e=this.compileMessage(),r=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===r.length&&this.signatures.every((f,s)=>r[s].equals(f.publicKey))||(this.signatures=r.map(t=>({signature:null,publicKey:t}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const r=new Set;this.signatures=e.filter(t=>{const f=t.toString();return r.has(f)?!1:(r.add(f),!0)}).map(t=>({signature:null,publicKey:t}))}sign(...e){if(e.length===0)throw new Error("No signers");const r=new Set,t=[];for(const s of e){const c=s.publicKey.toString();r.has(c)||(r.add(c),t.push(s))}this.signatures=t.map(s=>({signature:null,publicKey:s.publicKey}));const f=this._compile();this._partialSign(f,...t)}partialSign(...e){if(e.length===0)throw new Error("No signers");const r=new Set,t=[];for(const s of e){const c=s.publicKey.toString();r.has(c)||(r.add(c),t.push(s))}const f=this._compile();this._partialSign(f,...t)}_partialSign(e,...r){const t=e.serialize();r.forEach(f=>{const s=ts(t,f.secretKey);this._addSignature(f.publicKey,Sr(s))})}addSignature(e,r){this._compile(),this._addSignature(e,r)}_addSignature(e,r){Yt(r.length===64);const t=this.signatures.findIndex(f=>e.equals(f.publicKey));if(t<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[t].signature=et.Buffer.from(r)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,r){const t={};for(const{signature:f,publicKey:s}of this.signatures)f===null?r&&(t.missing||(t.missing=[])).push(s):ka(f,e,s.toBytes())||(t.invalid||(t.invalid=[])).push(s);return t.invalid||t.missing?t:void 0}serialize(e){const{requireAllSignatures:r,verifySignatures:t}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),f=this.serializeMessage();if(t){const s=this._getMessageSignednessErrors(f,r);if(s){let c="Signature verification failed.";throw s.invalid&&(c+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(b=>b.toBase58()).join("`, `")}\`].`),s.missing&&(c+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(b=>b.toBase58()).join("`, `")}\`].`),new Error(c)}}return this._serialize(f)}_serialize(e){const{signatures:r}=this,t=[];se(t,r.length);const f=t.length+r.length*64+e.length,s=et.Buffer.alloc(f);return Yt(r.length<256),et.Buffer.from(t).copy(s,0),r.forEach(({signature:c},b)=>{c!==null&&(Yt(c.length===64,"signature has invalid length"),et.Buffer.from(c).copy(s,t.length+b*64))}),e.copy(s,t.length+r.length*64),Yt(s.length<=Te,`Transaction too large: ${s.length} > ${Te}`),s}get keys(){return Yt(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Yt(this.instructions.length===1),this.instructions[0].programId}get data(){return Yt(this.instructions.length===1),this.instructions[0].data}static from(e){let r=[...e];const t=ie(r);let f=[];for(let s=0;s<t;s++){const c=oe(r,0,ln);f.push(ee.encode(et.Buffer.from(c)))}return lr.populate(Ne.from(r),f)}static populate(e,r=[]){const t=new lr;return t.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(t.feePayer=e.accountKeys[0]),r.forEach((f,s)=>{const c={signature:f==ee.encode(za)?null:ee.decode(f),publicKey:e.accountKeys[s]};t.signatures.push(c)}),e.instructions.forEach(f=>{const s=f.accounts.map(c=>{const b=e.accountKeys[c];return{pubkey:b,isSigner:t.signatures.some(g=>g.publicKey.toString()===b.toString())||e.isAccountSigner(c),isWritable:e.isAccountWritable(c)}});t.instructions.push(new yi({keys:s,programId:e.accountKeys[f.programIdIndex],data:ee.decode(f.data)}))}),t._message=e,t._json=t.toJSON(),t}}class is{get version(){return this.message.version}constructor(e,r){if(this.signatures=void 0,this.message=void 0,r!==void 0)Yt(r.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=r;else{const t=[];for(let f=0;f<e.header.numRequiredSignatures;f++)t.push(new Uint8Array(ln));this.signatures=t}this.message=e}serialize(){const e=this.message.serialize(),r=Array();se(r,this.signatures.length);const t=x.struct([x.blob(r.length,"encodedSignaturesLength"),x.seq(Ua(),this.signatures.length,"signatures"),x.blob(e.length,"serializedMessage")]),f=new Uint8Array(2048),s=t.encode({encodedSignaturesLength:new Uint8Array(r),signatures:this.signatures,serializedMessage:e},f);return f.slice(0,s)}static deserialize(e){let r=[...e];const t=[],f=ie(r);for(let c=0;c<f;c++)t.push(new Uint8Array(oe(r,0,ln)));const s=rs.deserialize(new Uint8Array(r));return new is(s,t)}sign(e){const r=this.message.serialize(),t=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const f of e){const s=t.findIndex(c=>c.equals(f.publicKey));Yt(s>=0,`Cannot sign with non signer key ${f.publicKey.toBase58()}`),this.signatures[s]=ts(r,f.secretKey)}}addSignature(e,r){Yt(r.byteLength===64,"Signature must be 64 bytes long");const f=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));Yt(f>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[f]=r}}new Q("SysvarC1ock11111111111111111111111111111111");new Q("SysvarEpochSchedu1e111111111111111111111111");new Q("Sysvar1nstructions1111111111111111111111111");new Q("SysvarRecentB1ockHashes11111111111111111111");new Q("SysvarRent111111111111111111111111111111111");new Q("SysvarRewards111111111111111111111111111111");new Q("SysvarS1otHashes111111111111111111111111111");new Q("SysvarS1otHistory11111111111111111111111111");new Q("SysvarStakeHistory1111111111111111111111111");const Ka=x.nu64("lamportsPerSignature"),Fa=x.struct([x.u32("version"),x.u32("state"),nt("authorizedPubkey"),nt("nonce"),x.struct([Ka],"feeCalculator")]);Fa.span;function ze(n){const e=x.blob(8,n),r=e.decode.bind(e),t=e.encode.bind(e),f=e,s=Ko();return f.decode=(c,b)=>{const g=r(c,b);return s.decode(g)},f.encode=(c,b,g)=>{const A=s.encode(c);return t(A,b,g)},f}Object.freeze({Create:{index:0,layout:x.struct([x.u32("instruction"),x.ns64("lamports"),x.ns64("space"),nt("programId")])},Assign:{index:1,layout:x.struct([x.u32("instruction"),nt("programId")])},Transfer:{index:2,layout:x.struct([x.u32("instruction"),ze("lamports")])},CreateWithSeed:{index:3,layout:x.struct([x.u32("instruction"),nt("base"),Le("seed"),x.ns64("lamports"),x.ns64("space"),nt("programId")])},AdvanceNonceAccount:{index:4,layout:x.struct([x.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:x.struct([x.u32("instruction"),x.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:x.struct([x.u32("instruction"),nt("authorized")])},AuthorizeNonceAccount:{index:7,layout:x.struct([x.u32("instruction"),nt("authorized")])},Allocate:{index:8,layout:x.struct([x.u32("instruction"),x.ns64("space")])},AllocateWithSeed:{index:9,layout:x.struct([x.u32("instruction"),nt("base"),Le("seed"),x.ns64("space"),nt("programId")])},AssignWithSeed:{index:10,layout:x.struct([x.u32("instruction"),nt("base"),Le("seed"),nt("programId")])},TransferWithSeed:{index:11,layout:x.struct([x.u32("instruction"),ze("lamports"),Le("seed"),nt("programId")])},UpgradeNonceAccount:{index:12,layout:x.struct([x.u32("instruction")])}});new Q("11111111111111111111111111111111");new Q("BPFLoader2111111111111111111111111111111111");x.struct([x.u32("typeIndex"),ze("deactivationSlot"),x.nu64("lastExtendedSlot"),x.u8("lastExtendedStartIndex"),x.u8(),x.seq(nt(),x.offset(x.u8(),-1),"authority")]);const lt=Ge(xr(Q),P(),n=>new Q(n)),ss=Er([P(),ut("base64")]),Ar=Ge(xr(et.Buffer),ss,n=>et.Buffer.from(n[0],"base64"));function os(n){return ne([K({jsonrpc:ut("2.0"),id:P(),result:n}),K({jsonrpc:ut("2.0"),id:P(),error:K({code:Ke(),message:P(),data:W(jo())})})])}const Da=os(Ke());function ot(n){return Ge(os(n),Da,e=>"error"in e?e:{...e,result:Pe(e.result,n)})}function fe(n){return ot(K({context:K({slot:k()}),value:n}))}function En(n){return K({context:K({slot:k()}),value:n})}const Va=K({foundation:k(),foundationTerm:k(),initial:k(),taper:k(),terminal:k()});ot(Z(j(K({epoch:k(),effectiveSlot:k(),amount:k(),postBalance:k(),commission:W(j(k()))}))));const Pa=Z(K({slot:k(),prioritizationFee:k()})),$a=K({total:k(),validator:k(),foundation:k(),epoch:k()}),Za=K({epoch:k(),slotIndex:k(),slotsInEpoch:k(),absoluteSlot:k(),blockHeight:W(k()),transactionCount:W(k())}),ja=K({slotsPerEpoch:k(),leaderScheduleSlotOffset:k(),warmup:le(),firstNormalEpoch:k(),firstNormalSlot:k()}),Ya=Zi(P(),Z(k())),Ie=j(ne([K({}),P()])),Ha=K({err:Ie}),Ga=ut("receivedSignature");K({"solana-core":P(),"feature-set":W(k())});const Wa=K({program:P(),programId:lt,parsed:Ke()}),Xa=K({programId:lt,accounts:Z(lt),data:P()});fe(K({err:j(ne([K({}),P()])),logs:j(Z(P())),accounts:W(j(Z(j(K({executable:le(),owner:P(),lamports:k(),data:Z(P()),rentEpoch:W(k())}))))),unitsConsumed:W(k()),returnData:W(j(K({programId:P(),data:Er([P(),ut("base64")])}))),innerInstructions:W(j(Z(K({index:k(),instructions:Z(ne([Wa,Xa]))}))))}));fe(K({byIdentity:Zi(P(),Z(k())),range:K({firstSlot:k(),lastSlot:k()})}));ot(Va);ot($a);ot(Pa);ot(Za);ot(ja);ot(Ya);ot(k());fe(K({total:k(),circulating:k(),nonCirculating:k(),nonCirculatingAccounts:Z(lt)}));const Ja=K({amount:P(),uiAmount:j(k()),decimals:k(),uiAmountString:W(P())});fe(Z(K({address:lt,amount:P(),uiAmount:j(k()),decimals:k(),uiAmountString:W(P())})));fe(Z(K({pubkey:lt,account:K({executable:le(),owner:lt,lamports:k(),data:Ar,rentEpoch:k()})})));const hr=K({program:P(),parsed:Ke(),space:k()});fe(Z(K({pubkey:lt,account:K({executable:le(),owner:lt,lamports:k(),data:hr,rentEpoch:k()})})));fe(Z(K({lamports:k(),address:lt})));const Ir=K({executable:le(),owner:lt,lamports:k(),data:Ar,rentEpoch:k()});K({pubkey:lt,account:Ir});const Qa=Ge(ne([xr(et.Buffer),hr]),ne([ss,hr]),n=>Array.isArray(n)?Pe(n,Ar):n),tu=K({executable:le(),owner:lt,lamports:k(),data:Qa,rentEpoch:k()});K({pubkey:lt,account:tu});K({state:ne([ut("active"),ut("inactive"),ut("activating"),ut("deactivating")]),active:k(),inactive:k()});ot(Z(K({signature:P(),slot:k(),err:Ie,memo:j(P()),blockTime:W(j(k()))})));ot(Z(K({signature:P(),slot:k(),err:Ie,memo:j(P()),blockTime:W(j(k()))})));K({subscription:k(),result:En(Ir)});const eu=K({pubkey:lt,account:Ir});K({subscription:k(),result:En(eu)});const nu=K({parent:k(),slot:k(),root:k()});K({subscription:k(),result:nu});const ru=ne([K({type:ne([ut("firstShredReceived"),ut("completed"),ut("optimisticConfirmation"),ut("root")]),slot:k(),timestamp:k()}),K({type:ut("createdBank"),parent:k(),slot:k(),timestamp:k()}),K({type:ut("frozen"),slot:k(),timestamp:k(),stats:K({numTransactionEntries:k(),numSuccessfulTransactions:k(),numFailedTransactions:k(),maxTransactionsPerEntry:k()})}),K({type:ut("dead"),slot:k(),timestamp:k(),err:P()})]);K({subscription:k(),result:ru});K({subscription:k(),result:En(ne([Ha,Ga]))});K({subscription:k(),result:k()});K({pubkey:P(),gossip:j(P()),tpu:j(P()),rpc:j(P()),version:j(P())});const mi=K({votePubkey:P(),nodePubkey:P(),activatedStake:k(),epochVoteAccount:le(),epochCredits:Z(Er([k(),k(),k()])),commission:k(),lastVote:k(),rootSlot:j(k())});ot(K({current:Z(mi),delinquent:Z(mi)}));const iu=ne([ut("processed"),ut("confirmed"),ut("finalized")]),su=K({slot:k(),confirmations:j(k()),err:Ie,confirmationStatus:W(iu)});fe(Z(j(su)));ot(k());const as=K({accountKey:lt,writableIndexes:Z(k()),readonlyIndexes:Z(k())}),_r=K({signatures:Z(P()),message:K({accountKeys:Z(P()),header:K({numRequiredSignatures:k(),numReadonlySignedAccounts:k(),numReadonlyUnsignedAccounts:k()}),instructions:Z(K({accounts:Z(k()),data:P(),programIdIndex:k()})),recentBlockhash:P(),addressTableLookups:W(Z(as))})}),us=K({pubkey:lt,signer:le(),writable:le(),source:W(ne([ut("transaction"),ut("lookupTable")]))}),fs=K({accountKeys:Z(us),signatures:Z(P())}),cs=K({parsed:Ke(),program:P(),programId:lt}),ls=K({accounts:Z(lt),data:P(),programId:lt}),ou=ne([ls,cs]),au=ne([K({parsed:Ke(),program:P(),programId:P()}),K({accounts:Z(P()),data:P(),programId:P()})]),hs=Ge(ou,au,n=>"accounts"in n?Pe(n,ls):Pe(n,cs)),ds=K({signatures:Z(P()),message:K({accountKeys:Z(us),instructions:Z(hs),recentBlockhash:P(),addressTableLookups:W(j(Z(as)))})}),pn=K({accountIndex:k(),mint:P(),owner:W(P()),programId:W(P()),uiTokenAmount:Ja}),ps=K({writable:Z(lt),readonly:Z(lt)}),Mn=K({err:Ie,fee:k(),innerInstructions:W(j(Z(K({index:k(),instructions:Z(K({accounts:Z(k()),data:P(),programIdIndex:k()}))})))),preBalances:Z(k()),postBalances:Z(k()),logMessages:W(j(Z(P()))),preTokenBalances:W(j(Z(pn))),postTokenBalances:W(j(Z(pn))),loadedAddresses:W(ps),computeUnitsConsumed:W(k()),costUnits:W(k())}),kr=K({err:Ie,fee:k(),innerInstructions:W(j(Z(K({index:k(),instructions:Z(hs)})))),preBalances:Z(k()),postBalances:Z(k()),logMessages:W(j(Z(P()))),preTokenBalances:W(j(Z(pn))),postTokenBalances:W(j(Z(pn))),loadedAddresses:W(ps),computeUnitsConsumed:W(k()),costUnits:W(k())}),Fe=ne([ut(0),ut("legacy")]),_e=K({pubkey:P(),lamports:k(),postBalance:j(k()),rewardType:j(P()),commission:W(j(k()))});ot(j(K({blockhash:P(),previousBlockhash:P(),parentSlot:k(),transactions:Z(K({transaction:_r,meta:j(Mn),version:W(Fe)})),rewards:W(Z(_e)),blockTime:j(k()),blockHeight:j(k())})));ot(j(K({blockhash:P(),previousBlockhash:P(),parentSlot:k(),rewards:W(Z(_e)),blockTime:j(k()),blockHeight:j(k())})));ot(j(K({blockhash:P(),previousBlockhash:P(),parentSlot:k(),transactions:Z(K({transaction:fs,meta:j(Mn),version:W(Fe)})),rewards:W(Z(_e)),blockTime:j(k()),blockHeight:j(k())})));ot(j(K({blockhash:P(),previousBlockhash:P(),parentSlot:k(),transactions:Z(K({transaction:ds,meta:j(kr),version:W(Fe)})),rewards:W(Z(_e)),blockTime:j(k()),blockHeight:j(k())})));ot(j(K({blockhash:P(),previousBlockhash:P(),parentSlot:k(),transactions:Z(K({transaction:fs,meta:j(kr),version:W(Fe)})),rewards:W(Z(_e)),blockTime:j(k()),blockHeight:j(k())})));ot(j(K({blockhash:P(),previousBlockhash:P(),parentSlot:k(),rewards:W(Z(_e)),blockTime:j(k()),blockHeight:j(k())})));ot(j(K({blockhash:P(),previousBlockhash:P(),parentSlot:k(),transactions:Z(K({transaction:_r,meta:j(Mn)})),rewards:W(Z(_e)),blockTime:j(k())})));ot(j(K({blockhash:P(),previousBlockhash:P(),parentSlot:k(),signatures:Z(P()),blockTime:j(k())})));ot(j(K({slot:k(),meta:j(Mn),blockTime:W(j(k())),transaction:_r,version:W(Fe)})));ot(j(K({slot:k(),transaction:ds,meta:j(kr),blockTime:W(j(k())),version:W(Fe)})));fe(K({blockhash:P(),lastValidBlockHeight:k()}));fe(le());const uu=K({slot:k(),numTransactions:k(),numSlots:k(),samplePeriodSecs:k()});ot(Z(uu));fe(j(K({feeCalculator:K({lamportsPerSignature:k()})})));ot(P());ot(P());const fu=K({err:Ie,logs:Z(P()),signature:P()});K({result:En(fu),subscription:k()});Object.freeze({CreateLookupTable:{index:0,layout:x.struct([x.u32("instruction"),ze("recentSlot"),x.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:x.struct([x.u32("instruction")])},ExtendLookupTable:{index:2,layout:x.struct([x.u32("instruction"),ze(),x.seq(nt(),x.offset(x.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:x.struct([x.u32("instruction")])},CloseLookupTable:{index:4,layout:x.struct([x.u32("instruction")])}});new Q("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:x.struct([x.u8("instruction"),x.u32("units"),x.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:x.struct([x.u8("instruction"),x.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:x.struct([x.u8("instruction"),x.u32("units")])},SetComputeUnitPrice:{index:3,layout:x.struct([x.u8("instruction"),ze("microLamports")])}});new Q("ComputeBudget111111111111111111111111111111");x.struct([x.u8("numSignatures"),x.u8("padding"),x.u16("signatureOffset"),x.u16("signatureInstructionIndex"),x.u16("publicKeyOffset"),x.u16("publicKeyInstructionIndex"),x.u16("messageDataOffset"),x.u16("messageDataSize"),x.u16("messageInstructionIndex")]);new Q("Ed25519SigVerify111111111111111111111111111");_a.utils.isValidPrivateKey;x.struct([x.u8("numSignatures"),x.u16("signatureOffset"),x.u8("signatureInstructionIndex"),x.u16("ethAddressOffset"),x.u8("ethAddressInstructionIndex"),x.u16("messageDataOffset"),x.u16("messageDataSize"),x.u8("messageInstructionIndex"),x.blob(20,"ethAddress"),x.blob(64,"signature"),x.u8("recoveryId")]);new Q("KeccakSecp256k11111111111111111111111111111");var gs;new Q("StakeConfig11111111111111111111111111111111");class ys{constructor(e,r,t){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=r,this.custodian=t}}gs=ys;ys.default=new gs(0,0,Q.default);Object.freeze({Initialize:{index:0,layout:x.struct([x.u32("instruction"),Ta(),Ca()])},Authorize:{index:1,layout:x.struct([x.u32("instruction"),nt("newAuthorized"),x.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:x.struct([x.u32("instruction")])},Split:{index:3,layout:x.struct([x.u32("instruction"),x.ns64("lamports")])},Withdraw:{index:4,layout:x.struct([x.u32("instruction"),x.ns64("lamports")])},Deactivate:{index:5,layout:x.struct([x.u32("instruction")])},Merge:{index:7,layout:x.struct([x.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:x.struct([x.u32("instruction"),nt("newAuthorized"),x.u32("stakeAuthorizationType"),Le("authoritySeed"),nt("authorityOwner")])}});new Q("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:x.struct([x.u32("instruction"),qa()])},Authorize:{index:1,layout:x.struct([x.u32("instruction"),nt("newAuthorized"),x.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:x.struct([x.u32("instruction"),x.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:x.struct([x.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:x.struct([x.u32("instruction"),Na()])}});new Q("Vote111111111111111111111111111111111111111");new Q("Va1idator1nfo111111111111111111111111111111");K({name:P(),website:W(P()),details:W(P()),iconUrl:W(P()),keybaseUsername:W(P())});new Q("Vote111111111111111111111111111111111111111");x.struct([nt("nodePubkey"),nt("authorizedWithdrawer"),x.u8("commission"),x.nu64(),x.seq(x.struct([x.nu64("slot"),x.u32("confirmationCount")]),x.offset(x.u32(),-8),"votes"),x.u8("rootSlotValid"),x.nu64("rootSlot"),x.nu64(),x.seq(x.struct([x.nu64("epoch"),nt("authorizedVoter")]),x.offset(x.u32(),-8),"authorizedVoters"),x.struct([x.seq(x.struct([nt("authorizedPubkey"),x.nu64("epochOfLastAuthorizedSwitch"),x.nu64("targetEpoch")]),32,"buf"),x.nu64("idx"),x.u8("isEmpty")],"priorVoters"),x.nu64(),x.seq(x.struct([x.nu64("epoch"),x.nu64("credits"),x.nu64("prevCredits")]),x.offset(x.u32(),-8),"epochCredits"),x.struct([x.nu64("slot"),x.nu64("timestamp")],"lastTimestamp")]);export{pu as S,lr as T,rs as V,is as a,oo as b,Is as c,Fi as r};
