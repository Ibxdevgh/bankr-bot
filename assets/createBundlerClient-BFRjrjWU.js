import{K as M,L,M as O,J as Dt,N as ue,O as S,P as Et,Q as ce,S as A,T as Ut,U as Lt,V as At,W as y,X as Ct,Y as Ke,Z as kt,$ as St,a0 as Ft,a1 as It,a2 as K,a3 as je,a4 as Re,B as Bt,a5 as Tt,a6 as Mt,a7 as ut,a8 as Vt,a9 as jt,aa as Rt,ab as $t,ac as Nt,ad as Ht,ae as zt}from"./wagmi-DukDWchA.js";var ie,P,ct,B,Je,pt,de,$e,le,fe,R={},dt=[],Wt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ne=Array.isArray;function F(e,t){for(var a in t)e[a]=t[a];return e}function lt(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Zt(e,t,a){var n,r,i,o={};for(i in t)i=="key"?n=t[i]:i=="ref"?r=t[i]:o[i]=t[i];if(arguments.length>2&&(o.children=arguments.length>3?ie.call(arguments,2):a),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)o[i]===void 0&&(o[i]=e.defaultProps[i]);return z(e,o,n,r,null)}function z(e,t,a,n,r){var i={type:e,props:t,key:a,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++ct,__i:-1,__u:0};return r==null&&P.vnode!=null&&P.vnode(i),i}function se(e){return e.children}function W(e,t){this.props=e,this.context=t}function V(e,t){if(t==null)return e.__?V(e.__,e.__i+1):null;for(var a;t<e.__k.length;t++)if((a=e.__k[t])!=null&&a.__e!=null)return a.__e;return typeof e.type=="function"?V(e):null}function ft(e){var t,a;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((a=e.__k[t])!=null&&a.__e!=null){e.__e=e.__c.base=a.__e;break}return ft(e)}}function Qe(e){(!e.__d&&(e.__d=!0)&&B.push(e)&&!J.__r++||Je!==P.debounceRendering)&&((Je=P.debounceRendering)||pt)(J)}function J(){var e,t,a,n,r,i,o,u;for(B.sort(de);e=B.shift();)e.__d&&(t=B.length,n=void 0,i=(r=(a=e).__v).__e,o=[],u=[],a.__P&&((n=F({},r)).__v=r.__v+1,P.vnode&&P.vnode(n),He(a.__P,n,r,a.__n,a.__P.namespaceURI,32&r.__u?[i]:null,o,i??V(r),!!(32&r.__u),u),n.__v=r.__v,n.__.__k[n.__i]=n,_t(o,n,u),n.__e!=i&&ft(n)),B.length>t&&B.sort(de));J.__r=0}function yt(e,t,a,n,r,i,o,u,p,d,l){var s,m,c,h,v,b=n&&n.__k||dt,_=t.length;for(a.__d=p,Kt(a,t,b),p=a.__d,s=0;s<_;s++)(c=a.__k[s])!=null&&(m=c.__i===-1?R:b[c.__i]||R,c.__i=s,He(e,c,m,r,i,o,u,p,d,l),h=c.__e,c.ref&&m.ref!=c.ref&&(m.ref&&ze(m.ref,null,c),l.push(c.ref,c.__c||h,c)),v==null&&h!=null&&(v=h),65536&c.__u||m.__k===c.__k?p=mt(c,p,e):typeof c.type=="function"&&c.__d!==void 0?p=c.__d:h&&(p=h.nextSibling),c.__d=void 0,c.__u&=-196609);a.__d=p,a.__e=v}function Kt(e,t,a){var n,r,i,o,u,p=t.length,d=a.length,l=d,s=0;for(e.__k=[],n=0;n<p;n++)(r=t[n])!=null&&typeof r!="boolean"&&typeof r!="function"?(o=n+s,(r=e.__k[n]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?z(null,r,null,null,null):Ne(r)?z(se,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?z(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=e,r.__b=e.__b+1,i=null,(u=r.__i=Jt(r,a,o,l))!==-1&&(l--,(i=a[u])&&(i.__u|=131072)),i==null||i.__v===null?(u==-1&&s--,typeof r.type!="function"&&(r.__u|=65536)):u!==o&&(u==o-1?s--:u==o+1?s++:(u>o?s--:s++,r.__u|=65536))):r=e.__k[n]=null;if(l)for(n=0;n<d;n++)(i=a[n])!=null&&(131072&i.__u)==0&&(i.__e==e.__d&&(e.__d=V(i)),gt(i,i))}function mt(e,t,a){var n,r;if(typeof e.type=="function"){for(n=e.__k,r=0;n&&r<n.length;r++)n[r]&&(n[r].__=e,t=mt(n[r],t,a));return t}e.__e!=t&&(t&&e.type&&!a.contains(t)&&(t=V(e)),a.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function Jt(e,t,a,n){var r=e.key,i=e.type,o=a-1,u=a+1,p=t[a];if(p===null||p&&r==p.key&&i===p.type&&(131072&p.__u)==0)return a;if(n>(p!=null&&(131072&p.__u)==0?1:0))for(;o>=0||u<t.length;){if(o>=0){if((p=t[o])&&(131072&p.__u)==0&&r==p.key&&i===p.type)return o;o--}if(u<t.length){if((p=t[u])&&(131072&p.__u)==0&&r==p.key&&i===p.type)return u;u++}}return-1}function Xe(e,t,a){t[0]==="-"?e.setProperty(t,a??""):e[t]=a==null?"":typeof a!="number"||Wt.test(t)?a:a+"px"}function H(e,t,a,n,r){var i;e:if(t==="style")if(typeof a=="string")e.style.cssText=a;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)a&&t in a||Xe(e.style,t,"");if(a)for(t in a)n&&a[t]===n[t]||Xe(e.style,t,a[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=a,a?n?a.u=n.u:(a.u=$e,e.addEventListener(t,i?fe:le,i)):e.removeEventListener(t,i?fe:le,i);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=a??"";break e}catch{}typeof a=="function"||(a==null||a===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&a==1?"":a))}}function Ye(e){return function(t){if(this.l){var a=this.l[t.type+e];if(t.t==null)t.t=$e++;else if(t.t<a.u)return;return a(P.event?P.event(t):t)}}}function He(e,t,a,n,r,i,o,u,p,d){var l,s,m,c,h,v,b,_,f,E,D,I,C,g,w,k,U=t.type;if(t.constructor!==void 0)return null;128&a.__u&&(p=!!(32&a.__u),i=[u=t.__e=a.__e]),(l=P.__b)&&l(t);e:if(typeof U=="function")try{if(_=t.props,f="prototype"in U&&U.prototype.render,E=(l=U.contextType)&&n[l.__c],D=l?E?E.props.value:l.__:n,a.__c?b=(s=t.__c=a.__c).__=s.__E:(f?t.__c=s=new U(_,D):(t.__c=s=new W(_,D),s.constructor=U,s.render=Xt),E&&E.sub(s),s.props=_,s.state||(s.state={}),s.context=D,s.__n=n,m=s.__d=!0,s.__h=[],s._sb=[]),f&&s.__s==null&&(s.__s=s.state),f&&U.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=F({},s.__s)),F(s.__s,U.getDerivedStateFromProps(_,s.__s))),c=s.props,h=s.state,s.__v=t,m)f&&U.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),f&&s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(f&&U.getDerivedStateFromProps==null&&_!==c&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(_,D),!s.__e&&(s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(_,s.__s,D)===!1||t.__v===a.__v)){for(t.__v!==a.__v&&(s.props=_,s.state=s.__s,s.__d=!1),t.__e=a.__e,t.__k=a.__k,t.__k.some(function(N){N&&(N.__=t)}),I=0;I<s._sb.length;I++)s.__h.push(s._sb[I]);s._sb=[],s.__h.length&&o.push(s);break e}s.componentWillUpdate!=null&&s.componentWillUpdate(_,s.__s,D),f&&s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(c,h,v)})}if(s.context=D,s.props=_,s.__P=e,s.__e=!1,C=P.__r,g=0,f){for(s.state=s.__s,s.__d=!1,C&&C(t),l=s.render(s.props,s.state,s.context),w=0;w<s._sb.length;w++)s.__h.push(s._sb[w]);s._sb=[]}else do s.__d=!1,C&&C(t),l=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++g<25);s.state=s.__s,s.getChildContext!=null&&(n=F(F({},n),s.getChildContext())),f&&!m&&s.getSnapshotBeforeUpdate!=null&&(v=s.getSnapshotBeforeUpdate(c,h)),yt(e,Ne(k=l!=null&&l.type===se&&l.key==null?l.props.children:l)?k:[k],t,a,n,r,i,o,u,p,d),s.base=t.__e,t.__u&=-161,s.__h.length&&o.push(s),b&&(s.__E=s.__=null)}catch(N){if(t.__v=null,p||i!=null){for(t.__u|=p?160:32;u&&u.nodeType===8&&u.nextSibling;)u=u.nextSibling;i[i.indexOf(u)]=null,t.__e=u}else t.__e=a.__e,t.__k=a.__k;P.__e(N,t,a)}else i==null&&t.__v===a.__v?(t.__k=a.__k,t.__e=a.__e):t.__e=Qt(a.__e,t,a,n,r,i,o,p,d);(l=P.diffed)&&l(t)}function _t(e,t,a){t.__d=void 0;for(var n=0;n<a.length;n++)ze(a[n],a[++n],a[++n]);P.__c&&P.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(i){i.call(r)})}catch(i){P.__e(i,r.__v)}})}function Qt(e,t,a,n,r,i,o,u,p){var d,l,s,m,c,h,v,b=a.props,_=t.props,f=t.type;if(f==="svg"?r="http://www.w3.org/2000/svg":f==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),i!=null){for(d=0;d<i.length;d++)if((c=i[d])&&"setAttribute"in c==!!f&&(f?c.localName===f:c.nodeType===3)){e=c,i[d]=null;break}}if(e==null){if(f===null)return document.createTextNode(_);e=document.createElementNS(r,f,_.is&&_),u&&(P.__m&&P.__m(t,i),u=!1),i=null}if(f===null)b===_||u&&e.data===_||(e.data=_);else{if(i=i&&ie.call(e.childNodes),b=a.props||R,!u&&i!=null)for(b={},d=0;d<e.attributes.length;d++)b[(c=e.attributes[d]).name]=c.value;for(d in b)if(c=b[d],d!="children"){if(d=="dangerouslySetInnerHTML")s=c;else if(!(d in _)){if(d=="value"&&"defaultValue"in _||d=="checked"&&"defaultChecked"in _)continue;H(e,d,null,c,r)}}for(d in _)c=_[d],d=="children"?m=c:d=="dangerouslySetInnerHTML"?l=c:d=="value"?h=c:d=="checked"?v=c:u&&typeof c!="function"||b[d]===c||H(e,d,c,b[d],r);if(l)u||s&&(l.__html===s.__html||l.__html===e.innerHTML)||(e.innerHTML=l.__html),t.__k=[];else if(s&&(e.innerHTML=""),yt(e,Ne(m)?m:[m],t,a,n,f==="foreignObject"?"http://www.w3.org/1999/xhtml":r,i,o,i?i[0]:a.__k&&V(a,0),u,p),i!=null)for(d=i.length;d--;)lt(i[d]);u||(d="value",f==="progress"&&h==null?e.removeAttribute("value"):h!==void 0&&(h!==e[d]||f==="progress"&&!h||f==="option"&&h!==b[d])&&H(e,d,h,b[d],r),d="checked",v!==void 0&&v!==e[d]&&H(e,d,v,b[d],r))}return e}function ze(e,t,a){try{if(typeof e=="function"){var n=typeof e.__u=="function";n&&e.__u(),n&&t==null||(e.__u=e(t))}else e.current=t}catch(r){P.__e(r,a)}}function gt(e,t,a){var n,r;if(P.unmount&&P.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||ze(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){P.__e(i,t)}n.base=n.__P=null}if(n=e.__k)for(r=0;r<n.length;r++)n[r]&&gt(n[r],t,a||typeof e.type!="function");a||lt(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function Xt(e,t,a){return this.constructor(e,a)}function xa(e,t,a){var n,r,i,o;P.__&&P.__(e,t),r=(n=!1)?null:t.__k,i=[],o=[],He(t,e=t.__k=Zt(se,null,[e]),r||R,R,t.namespaceURI,r?null:t.firstChild?ie.call(t.childNodes):null,i,r?r.__e:t.firstChild,n,o),_t(i,e,o)}ie=dt.slice,P={__e:function(e,t,a,n){for(var r,i,o;t=t.__;)if((r=t.__c)&&!r.__)try{if((i=r.constructor)&&i.getDerivedStateFromError!=null&&(r.setState(i.getDerivedStateFromError(e)),o=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,n||{}),o=r.__d),o)return r.__E=r}catch(u){e=u}throw e}},ct=0,W.prototype.setState=function(e,t){var a;a=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=F({},this.state),typeof e=="function"&&(e=e(F({},a),this.props)),e&&F(a,e),e!=null&&this.__v&&(t&&this._sb.push(t),Qe(this))},W.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Qe(this))},W.prototype.render=se,B=[],pt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,de=function(e,t){return e.__v.__b-t.__v.__b},J.__r=0,$e=0,le=Ye(!1),fe=Ye(!0);var $,x,pe,qe,ye=0,ht=[],G=P,et=G.__b,tt=G.__r,at=G.diffed,nt=G.__c,rt=G.unmount,it=G.__;function We(e,t){G.__h&&G.__h(x,e,ye||t),ye=0;var a=x.__H||(x.__H={__:[],__h:[]});return e>=a.__.length&&a.__.push({}),a.__[e]}function Ga(e){return ye=1,Yt(vt,e)}function Yt(e,t,a){var n=We($++,2);if(n.t=e,!n.__c&&(n.__=[vt(void 0,t),function(u){var p=n.__N?n.__N[0]:n.__[0],d=n.t(p,u);p!==d&&(n.__N=[d,n.__[1]],n.__c.setState({}))}],n.__c=x,!x.u)){var r=function(u,p,d){if(!n.__c.__H)return!0;var l=n.__c.__H.__.filter(function(m){return!!m.__c});if(l.every(function(m){return!m.__N}))return!i||i.call(this,u,p,d);var s=!1;return l.forEach(function(m){if(m.__N){var c=m.__[0];m.__=m.__N,m.__N=void 0,c!==m.__[0]&&(s=!0)}}),!(!s&&n.__c.props===u)&&(!i||i.call(this,u,p,d))};x.u=!0;var i=x.shouldComponentUpdate,o=x.componentWillUpdate;x.componentWillUpdate=function(u,p,d){if(this.__e){var l=i;i=void 0,r(u,p,d),i=l}o&&o.call(this,u,p,d)},x.shouldComponentUpdate=r}return n.__N||n.__}function Da(e,t){var a=We($++,3);!G.__s&&bt(a.__H,t)&&(a.__=e,a.i=t,x.__H.__h.push(a))}function Ea(e,t){var a=We($++,7);return bt(a.__H,t)&&(a.__=e(),a.__H=t,a.__h=e),a.__}function qt(){for(var e;e=ht.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Z),e.__H.__h.forEach(me),e.__H.__h=[]}catch(t){e.__H.__h=[],G.__e(t,e.__v)}}G.__b=function(e){x=null,et&&et(e)},G.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),it&&it(e,t)},G.__r=function(e){tt&&tt(e),$=0;var t=(x=e.__c).__H;t&&(pe===x?(t.__h=[],x.__h=[],t.__.forEach(function(a){a.__N&&(a.__=a.__N),a.i=a.__N=void 0})):(t.__h.forEach(Z),t.__h.forEach(me),t.__h=[],$=0)),pe=x},G.diffed=function(e){at&&at(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(ht.push(t)!==1&&qe===G.requestAnimationFrame||((qe=G.requestAnimationFrame)||ea)(qt)),t.__H.__.forEach(function(a){a.i&&(a.__H=a.i),a.i=void 0})),pe=x=null},G.__c=function(e,t){t.some(function(a){try{a.__h.forEach(Z),a.__h=a.__h.filter(function(n){return!n.__||me(n)})}catch(n){t.some(function(r){r.__h&&(r.__h=[])}),t=[],G.__e(n,a.__v)}}),nt&&nt(e,t)},G.unmount=function(e){rt&&rt(e);var t,a=e.__c;a&&a.__H&&(a.__H.__.forEach(function(n){try{Z(n)}catch(r){t=r}}),a.__H=void 0,t&&G.__e(t,a.__v))};var st=typeof requestAnimationFrame=="function";function ea(e){var t,a=function(){clearTimeout(n),st&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(a,100);st&&(t=requestAnimationFrame(a))}function Z(e){var t=x,a=e.__c;typeof a=="function"&&(e.__c=void 0,a()),x=t}function me(e){var t=x;e.__c=e.__(),x=t}function bt(e,t){return!e||e.length!==t.length||t.some(function(a,n){return a!==e[n]})}function vt(e,t){return typeof t=="function"?t(e):t}const Ua=[{inputs:[{name:"preOpGas",type:"uint256"},{name:"paid",type:"uint256"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"targetSuccess",type:"bool"},{name:"targetResult",type:"bytes"}],name:"ExecutionResult",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"}],name:"FailedOp",type:"error"},{inputs:[{name:"sender",type:"address"}],name:"SenderAddressResult",type:"error"},{inputs:[{name:"aggregator",type:"address"}],name:"SignatureValidationFailed",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"}],name:"ValidationResult",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"},{components:[{name:"aggregator",type:"address"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"stakeInfo",type:"tuple"}],name:"aggregatorInfo",type:"tuple"}],name:"ValidationResultWithAggregation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"factory",type:"address"},{indexed:!1,name:"paymaster",type:"address"}],name:"AccountDeployed",type:"event"},{anonymous:!1,inputs:[],name:"BeforeExecution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalDeposit",type:"uint256"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"aggregator",type:"address"}],name:"SignatureAggregatorChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalStaked",type:"uint256"},{indexed:!1,name:"unstakeDelaySec",type:"uint256"}],name:"StakeLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawTime",type:"uint256"}],name:"StakeUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"StakeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"paymaster",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"success",type:"bool"},{indexed:!1,name:"actualGasCost",type:"uint256"},{indexed:!1,name:"actualGasUsed",type:"uint256"}],name:"UserOperationEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"UserOperationRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[],name:"SIG_VALIDATION_FAILED",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"},{name:"sender",type:"address"},{name:"paymasterAndData",type:"bytes"}],name:"_validateSenderAndPaymaster",outputs:[],stateMutability:"view",type:"function"},{inputs:[{name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"depositTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"getDepositInfo",outputs:[{components:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"}],name:"getSenderAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOps",type:"tuple[]"},{name:"aggregator",type:"address"},{name:"signature",type:"bytes"}],name:"opsPerAggregator",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleAggregatedOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"ops",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"key",type:"uint192"}],name:"incrementNonce",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"callData",type:"bytes"},{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"paymaster",type:"address"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"}],name:"mUserOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"prefund",type:"uint256"},{name:"contextOffset",type:"uint256"},{name:"preOpGas",type:"uint256"}],name:"opInfo",type:"tuple"},{name:"context",type:"bytes"}],name:"innerHandleOp",outputs:[{name:"actualGasCost",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"",type:"address"},{name:"",type:"uint192"}],name:"nonceSequenceNumber",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"op",type:"tuple"},{name:"target",type:"address"},{name:"targetCallData",type:"bytes"}],name:"simulateHandleOp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"simulateValidation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"},{name:"withdrawAmount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],La="0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789";function wt(e){const{authorization:t,factory:a,factoryData:n}=e;if(a==="0x7702"||a==="0x7702000000000000000000000000000000000000"){if(!t)return"0x7702000000000000000000000000000000000000";const r=t.address;return M([r,n??"0x"])}return a?M([a,n??"0x"]):"0x"}function Pt(e){const{callGasLimit:t,callData:a,maxPriorityFeePerGas:n,maxFeePerGas:r,paymaster:i,paymasterData:o,paymasterPostOpGasLimit:u,paymasterSignature:p,paymasterVerificationGasLimit:d,sender:l,signature:s="0x",verificationGasLimit:m}=e,c=M([L(O(m||0n),{size:16}),L(O(t||0n),{size:16})]),h=wt(e),v=M([L(O(n||0n),{size:16}),L(O(r||0n),{size:16})]),b=e.nonce??0n,_=i?M([i,L(O(d||0n),{size:16}),L(O(u||0n),{size:16}),o||"0x",...p?[p]:[]]):"0x",f=e.preVerificationGas??0n;return{accountGasLimits:c,callData:a,initCode:h,gasFees:v,nonce:b,paymasterAndData:_,preVerificationGas:f,sender:l,signature:s}}const ta={PackedUserOperation:[{type:"address",name:"sender"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"bytes32",name:"accountGasLimits"},{type:"uint256",name:"preVerificationGas"},{type:"bytes32",name:"gasFees"},{type:"bytes",name:"paymasterAndData"}]};function aa(e){const{chainId:t,entryPointAddress:a,userOperation:n}=e,r=Pt(n);return{types:ta,primaryType:"PackedUserOperation",domain:{name:"ERC4337",version:"1",chainId:t,verifyingContract:a},message:r}}function Aa(e){const{chainId:t,entryPointAddress:a,entryPointVersion:n}=e,r=e.userOperation,{authorization:i,callData:o="0x",callGasLimit:u,maxFeePerGas:p,maxPriorityFeePerGas:d,nonce:l,paymasterAndData:s="0x",preVerificationGas:m,sender:c,verificationGasLimit:h}=r;if(n==="0.8"||n==="0.9")return Dt(aa({chainId:t,entryPointAddress:a,userOperation:r}));const v=(()=>{var b,_;if(n==="0.6"){const f=(b=r.initCode)==null?void 0:b.slice(0,42),E=(_=r.initCode)==null?void 0:_.slice(42),D=wt({authorization:i,factory:f,factoryData:E});return ue([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"bytes32"}],[c,l,S(D),S(o),u,h,m,p,d,S(s)])}if(n==="0.7"){const f=Pt(r);return ue([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"}],[f.sender,f.nonce,S(f.initCode),S(f.callData),f.accountGasLimits,f.preVerificationGas,f.gasFees,S(f.paymasterAndData)])}throw new Error(`entryPointVersion "${n}" not supported.`)})();return S(ue([{type:"bytes32"},{type:"address"},{type:"uint256"}],[S(v),a,BigInt(t)]))}async function Ca(e){const{extend:t,nonceKeyManager:a=Et({source:{get(){return Date.now()},set(){}}}),...n}=e;let r=!1;const i=await e.getAddress();return{...t,...n,address:i,async getFactoryArgs(){return"isDeployed"in this&&await this.isDeployed()?{factory:void 0,factoryData:void 0}:e.getFactoryArgs()},async getNonce(o){const u=(o==null?void 0:o.key)??BigInt(await a.consume({address:i,chainId:e.client.chain.id,client:e.client}));return e.getNonce?await e.getNonce({...o,key:u}):await Lt(e.client,{abi:At(["function getNonce(address, uint192) pure returns (uint256)"]),address:e.entryPoint.address,functionName:"getNonce",args:[i,u]})},async isDeployed(){return r?!0:(r=!!await A(e.client,Ut,"getCode")({address:i}),r)},...e.sign?{async sign(o){const[{factory:u,factoryData:p},d]=await Promise.all([this.getFactoryArgs(),e.sign(o)]);return u&&p?ce({address:u,data:p,signature:d}):d}}:{},async signMessage(o){const[{factory:u,factoryData:p},d]=await Promise.all([this.getFactoryArgs(),e.signMessage(o)]);return u&&p&&u!=="0x7702"?ce({address:u,data:p,signature:d}):d},async signTypedData(o){const[{factory:u,factoryData:p},d]=await Promise.all([this.getFactoryArgs(),e.signTypedData(o)]);return u&&p&&u!=="0x7702"?ce({address:u,data:p,signature:d}):d},type:"smart"}}class _e extends y{constructor({cause:t}){super("Smart Account is not deployed.",{cause:t,metaMessages:["This could arise when:","- No `factory`/`factoryData` or `initCode` properties are provided for Smart Account deployment.","- An incorrect `sender` address is provided."],name:"AccountNotDeployedError"})}}Object.defineProperty(_e,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa20/});class j extends y{constructor({cause:t,data:a,message:n}={}){var i;const r=(i=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:i.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=a}}Object.defineProperty(j,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32521});Object.defineProperty(j,"message",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class ge extends y{constructor({cause:t}){super("Failed to send funds to beneficiary.",{cause:t,name:"FailedToSendToBeneficiaryError"})}}Object.defineProperty(ge,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa91/});class he extends y{constructor({cause:t}){super("Gas value overflowed.",{cause:t,metaMessages:["This could arise when:","- one of the gas values exceeded 2**120 (uint120)"].filter(Boolean),name:"GasValuesOverflowError"})}}Object.defineProperty(he,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa94/});class be extends y{constructor({cause:t}){super("The `handleOps` function was called by the Bundler with a gas limit too low.",{cause:t,name:"HandleOpsOutOfGasError"})}}Object.defineProperty(be,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa95/});class ve extends y{constructor({cause:t,factory:a,factoryData:n,initCode:r}){super("Failed to simulate deployment for Smart Account.",{cause:t,metaMessages:["This could arise when:","- Invalid `factory`/`factoryData` or `initCode` properties are present","- Smart Account deployment execution ran out of gas (low `verificationGasLimit` value)",`- Smart Account deployment execution reverted with an error
`,a&&`factory: ${a}`,n&&`factoryData: ${n}`,r&&`initCode: ${r}`].filter(Boolean),name:"InitCodeFailedError"})}}Object.defineProperty(ve,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa13/});class we extends y{constructor({cause:t,factory:a,factoryData:n,initCode:r}){super("Smart Account initialization implementation did not create an account.",{cause:t,metaMessages:["This could arise when:","- `factory`/`factoryData` or `initCode` properties are invalid",`- Smart Account initialization implementation is incorrect
`,a&&`factory: ${a}`,n&&`factoryData: ${n}`,r&&`initCode: ${r}`].filter(Boolean),name:"InitCodeMustCreateSenderError"})}}Object.defineProperty(we,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa15/});class Pe extends y{constructor({cause:t,factory:a,factoryData:n,initCode:r,sender:i}){super("Smart Account initialization implementation does not return the expected sender.",{cause:t,metaMessages:["This could arise when:",`Smart Account initialization implementation does not return a sender address
`,a&&`factory: ${a}`,n&&`factoryData: ${n}`,r&&`initCode: ${r}`,i&&`sender: ${i}`].filter(Boolean),name:"InitCodeMustReturnSenderError"})}}Object.defineProperty(Pe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa14/});class Oe extends y{constructor({cause:t}){super("Smart Account does not have sufficient funds to execute the User Operation.",{cause:t,metaMessages:["This could arise when:","- the Smart Account does not have sufficient funds to cover the required prefund, or","- a Paymaster was not provided"].filter(Boolean),name:"InsufficientPrefundError"})}}Object.defineProperty(Oe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa21/});class xe extends y{constructor({cause:t}){super("Bundler attempted to call an invalid function on the EntryPoint.",{cause:t,name:"InternalCallOnlyError"})}}Object.defineProperty(xe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa92/});class Ge extends y{constructor({cause:t}){super("Bundler used an invalid aggregator for handling aggregated User Operations.",{cause:t,name:"InvalidAggregatorError"})}}Object.defineProperty(Ge,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa96/});class De extends y{constructor({cause:t,nonce:a}){super("Invalid Smart Account nonce used for User Operation.",{cause:t,metaMessages:[a&&`nonce: ${a}`].filter(Boolean),name:"InvalidAccountNonceError"})}}Object.defineProperty(De,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa25/});class Ee extends y{constructor({cause:t}){super("Bundler has not set a beneficiary address.",{cause:t,name:"InvalidBeneficiaryError"})}}Object.defineProperty(Ee,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa90/});class Q extends y{constructor({cause:t}){super("Invalid fields set on User Operation.",{cause:t,name:"InvalidFieldsError"})}}Object.defineProperty(Q,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Ue extends y{constructor({cause:t,paymasterAndData:a}){super("Paymaster properties provided are invalid.",{cause:t,metaMessages:["This could arise when:","- the `paymasterAndData` property is of an incorrect length\n",a&&`paymasterAndData: ${a}`].filter(Boolean),name:"InvalidPaymasterAndDataError"})}}Object.defineProperty(Ue,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa93/});class T extends y{constructor({cause:t}){super("Paymaster deposit for the User Operation is too low.",{cause:t,metaMessages:["This could arise when:","- the Paymaster has deposited less than the expected amount via the `deposit` function"].filter(Boolean),name:"PaymasterDepositTooLowError"})}}Object.defineProperty(T,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32508});Object.defineProperty(T,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa31/});class Le extends y{constructor({cause:t}){super("The `validatePaymasterUserOp` function on the Paymaster reverted.",{cause:t,name:"PaymasterFunctionRevertedError"})}}Object.defineProperty(Le,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa33/});class Ae extends y{constructor({cause:t}){super("The Paymaster contract has not been deployed.",{cause:t,name:"PaymasterNotDeployedError"})}}Object.defineProperty(Ae,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa30/});class X extends y{constructor({cause:t}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:t,name:"PaymasterRateLimitError"})}}Object.defineProperty(X,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32504});class Y extends y{constructor({cause:t}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:t,name:"PaymasterStakeTooLowError"})}}Object.defineProperty(Y,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32505});class Ce extends y{constructor({cause:t}){super("Paymaster `postOp` function reverted.",{cause:t,name:"PaymasterPostOpFunctionRevertedError"})}}Object.defineProperty(Ce,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa50/});class ke extends y{constructor({cause:t,factory:a,factoryData:n,initCode:r}){super("Smart Account has already been deployed.",{cause:t,metaMessages:["Remove the following properties and try again:",a&&"`factory`",n&&"`factoryData`",r&&"`initCode`"].filter(Boolean),name:"SenderAlreadyConstructedError"})}}Object.defineProperty(ke,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa10/});class q extends y{constructor({cause:t}){super("UserOperation rejected because account signature check failed (or paymaster signature, if the paymaster uses its data as signature).",{cause:t,name:"SignatureCheckFailedError"})}}Object.defineProperty(q,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32507});class Se extends y{constructor({cause:t}){super("The `validateUserOp` function on the Smart Account reverted.",{cause:t,name:"SmartAccountFunctionRevertedError"})}}Object.defineProperty(Se,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa23/});class ee extends y{constructor({cause:t}){super("UserOperation rejected because account specified unsupported signature aggregator.",{cause:t,name:"UnsupportedSignatureAggregatorError"})}}Object.defineProperty(ee,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32506});class Fe extends y{constructor({cause:t}){super("User Operation expired.",{cause:t,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validateUserOp` on the Smart Account are not satisfied"].filter(Boolean),name:"UserOperationExpiredError"})}}Object.defineProperty(Fe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa22/});class Ie extends y{constructor({cause:t}){super("Paymaster for User Operation expired.",{cause:t,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validatePaymasterUserOp` on the Paymaster are not satisfied"].filter(Boolean),name:"UserOperationPaymasterExpiredError"})}}Object.defineProperty(Ie,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa32/});class Be extends y{constructor({cause:t}){super("Signature provided for the User Operation is invalid.",{cause:t,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Smart Account"].filter(Boolean),name:"UserOperationSignatureError"})}}Object.defineProperty(Be,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa24/});class Te extends y{constructor({cause:t}){super("Signature provided for the User Operation is invalid.",{cause:t,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Paymaster"].filter(Boolean),name:"UserOperationPaymasterSignatureError"})}}Object.defineProperty(Te,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa34/});class te extends y{constructor({cause:t}){super("User Operation rejected by EntryPoint's `simulateValidation` during account creation or validation.",{cause:t,name:"UserOperationRejectedByEntryPointError"})}}Object.defineProperty(te,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32500});class ae extends y{constructor({cause:t}){super("User Operation rejected by Paymaster's `validatePaymasterUserOp`.",{cause:t,name:"UserOperationRejectedByPaymasterError"})}}Object.defineProperty(ae,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32501});class ne extends y{constructor({cause:t}){super("User Operation rejected with op code validation error.",{cause:t,name:"UserOperationRejectedByOpCodeError"})}}Object.defineProperty(ne,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32502});class re extends y{constructor({cause:t}){super("UserOperation out of time-range: either wallet or paymaster returned a time-range, and it is already expired (or will expire soon).",{cause:t,name:"UserOperationOutOfTimeRangeError"})}}Object.defineProperty(re,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32503});class na extends y{constructor({cause:t}){super(`An error occurred while executing user operation: ${t==null?void 0:t.shortMessage}`,{cause:t,name:"UnknownBundlerError"})}}class Me extends y{constructor({cause:t}){super("User Operation verification gas limit exceeded.",{cause:t,metaMessages:["This could arise when:","- the gas used for verification exceeded the `verificationGasLimit`"].filter(Boolean),name:"VerificationGasLimitExceededError"})}}Object.defineProperty(Me,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa40/});class Ve extends y{constructor({cause:t}){super("User Operation verification gas limit is too low.",{cause:t,metaMessages:["This could arise when:","- the `verificationGasLimit` is too low to verify the User Operation"].filter(Boolean),name:"VerificationGasLimitTooLowError"})}}Object.defineProperty(Ve,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa41/});class ra extends y{constructor(t,{callData:a,callGasLimit:n,docsPath:r,factory:i,factoryData:o,initCode:u,maxFeePerGas:p,maxPriorityFeePerGas:d,nonce:l,paymaster:s,paymasterAndData:m,paymasterData:c,paymasterPostOpGasLimit:h,paymasterVerificationGasLimit:v,preVerificationGas:b,sender:_,signature:f,verificationGasLimit:E}){const D=Ct({callData:a,callGasLimit:n,factory:i,factoryData:o,initCode:u,maxFeePerGas:typeof p<"u"&&`${Ke(p)} gwei`,maxPriorityFeePerGas:typeof d<"u"&&`${Ke(d)} gwei`,nonce:l,paymaster:s,paymasterAndData:m,paymasterData:c,paymasterPostOpGasLimit:h,paymasterVerificationGasLimit:v,preVerificationGas:b,sender:_,signature:f,verificationGasLimit:E});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",D].filter(Boolean),name:"UserOperationExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class ia extends y{constructor({hash:t}){super(`User Operation receipt with hash "${t}" could not be found. The User Operation may not have been processed yet.`,{name:"UserOperationReceiptNotFoundError"})}}class sa extends y{constructor({hash:t}){super(`User Operation with hash "${t}" could not be found.`,{name:"UserOperationNotFoundError"})}}class ot extends y{constructor({hash:t}){super(`Timed out while waiting for User Operation with hash "${t}" to be confirmed.`,{name:"WaitForUserOperationReceiptTimeoutError"})}}const oa=[j,Q,T,X,Y,q,ee,re,te,ae,ne];function ua(e,t){const a=(e.details||"").toLowerCase();if(_e.message.test(a))return new _e({cause:e});if(ge.message.test(a))return new ge({cause:e});if(he.message.test(a))return new he({cause:e});if(be.message.test(a))return new be({cause:e});if(ve.message.test(a))return new ve({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(we.message.test(a))return new we({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(Pe.message.test(a))return new Pe({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode,sender:t.sender});if(Oe.message.test(a))return new Oe({cause:e});if(xe.message.test(a))return new xe({cause:e});if(De.message.test(a))return new De({cause:e,nonce:t.nonce});if(Ge.message.test(a))return new Ge({cause:e});if(Ee.message.test(a))return new Ee({cause:e});if(Ue.message.test(a))return new Ue({cause:e});if(T.message.test(a))return new T({cause:e});if(Le.message.test(a))return new Le({cause:e});if(Ae.message.test(a))return new Ae({cause:e});if(Ce.message.test(a))return new Ce({cause:e});if(Se.message.test(a))return new Se({cause:e});if(ke.message.test(a))return new ke({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(Fe.message.test(a))return new Fe({cause:e});if(Ie.message.test(a))return new Ie({cause:e});if(Te.message.test(a))return new Te({cause:e});if(Be.message.test(a))return new Be({cause:e});if(Me.message.test(a))return new Me({cause:e});if(Ve.message.test(a))return new Ve({cause:e});const n=e.walk(r=>oa.some(i=>i.code===r.code));if(n){if(n.code===j.code)return new j({cause:e,data:n.data,message:n.details});if(n.code===Q.code)return new Q({cause:e});if(n.code===T.code)return new T({cause:e});if(n.code===X.code)return new X({cause:e});if(n.code===Y.code)return new Y({cause:e});if(n.code===q.code)return new q({cause:e});if(n.code===ee.code)return new ee({cause:e});if(n.code===re.code)return new re({cause:e});if(n.code===te.code)return new te({cause:e});if(n.code===ae.code)return new ae({cause:e});if(n.code===ne.code)return new ne({cause:e})}return new na({cause:e})}function Ot(e,{calls:t,docsPath:a,...n}){const r=(()=>{const i=ua(e,n);if(t&&i instanceof j){const o=ca(i),u=t==null?void 0:t.filter(p=>p.abi);if(o&&u.length>0)return pa({calls:u,revertData:o})}return i})();return new ra(r,{docsPath:a,...n})}function ca(e){let t;return e.walk(a=>{var r,i,o,u;const n=a;if(typeof n.data=="string"||typeof((r=n.data)==null?void 0:r.revertData)=="string"||!(n instanceof y)&&typeof n.message=="string"){const p=(u=(o=((i=n.data)==null?void 0:i.revertData)||n.data||n.message).match)==null?void 0:u.call(o,/(0x[A-Za-z0-9]*)/);if(p)return t=p[1],!0}return!1}),t}function pa(e){const{calls:t,revertData:a}=e,{abi:n,functionName:r,args:i,to:o}=(()=>{const p=t==null?void 0:t.filter(l=>!!l.abi);if(p.length===1)return p[0];const d=p.filter(l=>{try{return!!kt({abi:l.abi,data:a})}catch{return!1}});return d.length===1?d[0]:{abi:[],functionName:p.reduce((l,s)=>`${l?`${l} | `:""}${s.functionName}`,""),args:void 0,to:void 0}})(),u=a==="0x"?new St({functionName:r}):new Ft({abi:n,data:a,functionName:r});return new It(u,{abi:n,args:i,contractAddress:o,functionName:r})}function da(e){const t={};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),t}function oe(e){const t={};return typeof e.callData<"u"&&(t.callData=e.callData),typeof e.callGasLimit<"u"&&(t.callGasLimit=O(e.callGasLimit)),typeof e.factory<"u"&&(t.factory=e.factory),typeof e.factoryData<"u"&&(t.factoryData=e.factoryData),typeof e.initCode<"u"&&(t.initCode=e.initCode),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=O(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=O(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=O(e.nonce)),typeof e.paymaster<"u"&&(t.paymaster=e.paymaster),typeof e.paymasterAndData<"u"&&(t.paymasterAndData=e.paymasterAndData||"0x"),typeof e.paymasterData<"u"&&(t.paymasterData=e.paymasterData),typeof e.paymasterPostOpGasLimit<"u"&&(t.paymasterPostOpGasLimit=O(e.paymasterPostOpGasLimit)),typeof e.paymasterSignature<"u"&&(t.paymasterSignature=e.paymasterSignature),typeof e.paymasterVerificationGasLimit<"u"&&(t.paymasterVerificationGasLimit=O(e.paymasterVerificationGasLimit)),typeof e.preVerificationGas<"u"&&(t.preVerificationGas=O(e.preVerificationGas)),typeof e.sender<"u"&&(t.sender=e.sender),typeof e.signature<"u"&&(t.signature=e.signature),typeof e.verificationGasLimit<"u"&&(t.verificationGasLimit=O(e.verificationGasLimit)),typeof e.authorization<"u"&&(t.eip7702Auth=la(e.authorization)),t}function la(e){return{address:e.address,chainId:O(e.chainId),nonce:O(e.nonce),r:e.r?O(BigInt(e.r),{size:32}):L("0x",{size:32}),s:e.s?O(BigInt(e.s),{size:32}):L("0x",{size:32}),yParity:e.yParity?O(e.yParity,{size:1}):L("0x",{size:32})}}async function fa(e,t){const{chainId:a,entryPointAddress:n,context:r,...i}=t,o=oe(i),{paymasterPostOpGasLimit:u,paymasterVerificationGasLimit:p,...d}=await e.request({method:"pm_getPaymasterData",params:[{...o,callGasLimit:o.callGasLimit??"0x0",verificationGasLimit:o.verificationGasLimit??"0x0",preVerificationGas:o.preVerificationGas??"0x0"},n,O(a),r]});return{...d,...u&&{paymasterPostOpGasLimit:K(u)},...p&&{paymasterVerificationGasLimit:K(p)}}}async function ya(e,t){const{chainId:a,entryPointAddress:n,context:r,...i}=t,o=oe(i),{paymasterPostOpGasLimit:u,paymasterVerificationGasLimit:p,...d}=await e.request({method:"pm_getPaymasterStubData",params:[{...o,callGasLimit:o.callGasLimit??"0x0",verificationGasLimit:o.verificationGasLimit??"0x0",preVerificationGas:o.preVerificationGas??"0x0"},n,O(a),r]});return{...d,...u&&{paymasterPostOpGasLimit:K(u)},...p&&{paymasterVerificationGasLimit:K(p)}}}const ma=["factory","fees","gas","paymaster","nonce","signature","authorization"];async function Ze(e,t){var C;const a=t,{account:n=e.account,parameters:r=ma,stateOverride:i}=a;if(!n)throw new je;const o=Re(n),u=e,p=a.paymaster??(u==null?void 0:u.paymaster),d=typeof p=="string"?p:void 0,{getPaymasterStubData:l,getPaymasterData:s}=(()=>{if(p===!0)return{getPaymasterStubData:g=>A(u,ya,"getPaymasterStubData")(g),getPaymasterData:g=>A(u,fa,"getPaymasterData")(g)};if(typeof p=="object"){const{getPaymasterStubData:g,getPaymasterData:w}=p;return{getPaymasterStubData:w&&g?g:w,getPaymasterData:w&&g?w:void 0}}return{getPaymasterStubData:void 0,getPaymasterData:void 0}})(),m=a.paymasterContext?a.paymasterContext:u==null?void 0:u.paymasterContext;let c={...a,paymaster:d,sender:o.address};const[h,v,b,_,f]=await Promise.all([(async()=>a.calls?o.encodeCalls(a.calls.map(g=>{const w=g;return w.abi?{data:Bt(w),to:w.to,value:w.value}:w})):a.callData)(),(async()=>{if(!r.includes("factory"))return;if(a.initCode)return{initCode:a.initCode};if(a.factory&&a.factoryData)return{factory:a.factory,factoryData:a.factoryData};const{factory:g,factoryData:w}=await o.getFactoryArgs();return o.entryPoint.version==="0.6"?{initCode:g&&w?M([g,w]):void 0}:{factory:g,factoryData:w}})(),(async()=>{var g;if(r.includes("fees")){if(typeof a.maxFeePerGas=="bigint"&&typeof a.maxPriorityFeePerGas=="bigint")return c;if((g=u==null?void 0:u.userOperation)!=null&&g.estimateFeesPerGas){const w=await u.userOperation.estimateFeesPerGas({account:o,bundlerClient:u,userOperation:c});return{...c,...w}}try{const w=u.client??e,k=await A(w,Tt,"estimateFeesPerGas")({chain:w.chain,type:"eip1559"});return{maxFeePerGas:typeof a.maxFeePerGas=="bigint"?a.maxFeePerGas:BigInt(2n*k.maxFeePerGas),maxPriorityFeePerGas:typeof a.maxPriorityFeePerGas=="bigint"?a.maxPriorityFeePerGas:BigInt(2n*k.maxPriorityFeePerGas)}}catch{return}}})(),(async()=>{if(r.includes("nonce"))return typeof a.nonce=="bigint"?a.nonce:o.getNonce()})(),(async()=>{if(r.includes("authorization")){if(typeof a.authorization=="object")return a.authorization;if(o.authorization&&!await o.isDeployed())return{...await Mt(o.client,o.authorization),r:"0xfffffffffffffffffffffffffffffff000000000000000000000000000000000",s:"0x7aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",yParity:1}}})()]);typeof h<"u"&&(c.callData=h),typeof v<"u"&&(c={...c,...v}),typeof b<"u"&&(c={...c,...b}),typeof _<"u"&&(c.nonce=_),typeof f<"u"&&(c.authorization=f),r.includes("signature")&&(typeof a.signature<"u"?c.signature=a.signature:c.signature=await o.getStubSignature(c)),o.entryPoint.version==="0.6"&&!c.initCode&&(c.initCode="0x");let E;async function D(){return E||(e.chain?e.chain.id:(E=await A(e,ut,"getChainId")({}),E))}let I=!1;if(r.includes("paymaster")&&l&&!d&&!a.paymasterAndData){const{isFinal:g=!1,sponsor:w,...k}=await l({chainId:await D(),entryPointAddress:o.entryPoint.address,context:m,...c});I=g,c={...c,...k}}if(o.entryPoint.version==="0.6"&&!c.paymasterAndData&&(c.paymasterAndData="0x"),r.includes("gas")){if((C=o.userOperation)!=null&&C.estimateGas){const g=await o.userOperation.estimateGas(c);c={...c,...g}}if(typeof c.callGasLimit>"u"||typeof c.preVerificationGas>"u"||typeof c.verificationGasLimit>"u"||c.paymaster&&typeof c.paymasterPostOpGasLimit>"u"||c.paymaster&&typeof c.paymasterVerificationGasLimit>"u"){const g=await A(u,xt,"estimateUserOperationGas")({account:o,callGasLimit:0n,preVerificationGas:0n,verificationGasLimit:0n,stateOverride:i,...c.paymaster?{paymasterPostOpGasLimit:0n,paymasterVerificationGasLimit:0n}:{},...c});c={...c,callGasLimit:c.callGasLimit??g.callGasLimit,preVerificationGas:c.preVerificationGas??g.preVerificationGas,verificationGasLimit:c.verificationGasLimit??g.verificationGasLimit,paymasterPostOpGasLimit:c.paymasterPostOpGasLimit??g.paymasterPostOpGasLimit,paymasterVerificationGasLimit:c.paymasterVerificationGasLimit??g.paymasterVerificationGasLimit}}}if(r.includes("paymaster")&&s&&!d&&!a.paymasterAndData&&!I){const g=await s({chainId:await D(),entryPointAddress:o.entryPoint.address,context:m,...c});c={...c,...g}}return delete c.calls,delete c.parameters,delete c.paymasterContext,typeof c.paymaster!="string"&&delete c.paymaster,c}async function xt(e,t){var p;const{account:a=e.account,entryPointAddress:n,stateOverride:r}=t;if(!a&&!t.sender)throw new je;const i=a?Re(a):void 0,o=Vt(r),u=i?await A(e,Ze,"prepareUserOperation")({...t,parameters:["authorization","factory","nonce","paymaster","signature"]}):t;try{const d=[oe(u),n??((p=i==null?void 0:i.entryPoint)==null?void 0:p.address)],l=await e.request({method:"eth_estimateUserOperationGas",params:o?[...d,o]:[...d]});return da(l)}catch(d){const l=t.calls;throw Ot(d,{...u,...l?{calls:l}:{}})}}function _a(e){return e.request({method:"eth_supportedEntryPoints"})}function ga(e){const t={...e};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.maxFeePerGas&&(t.maxFeePerGas=BigInt(e.maxFeePerGas)),e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=BigInt(e.maxPriorityFeePerGas)),e.nonce&&(t.nonce=BigInt(e.nonce)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),t}async function ha(e,{hash:t}){const a=await e.request({method:"eth_getUserOperationByHash",params:[t]},{dedupe:!0});if(!a)throw new sa({hash:t});const{blockHash:n,blockNumber:r,entryPoint:i,transactionHash:o,userOperation:u}=a;return{blockHash:n,blockNumber:BigInt(r),entryPoint:i,transactionHash:o,userOperation:ga(u)}}function ba(e){const t={...e};return e.actualGasCost&&(t.actualGasCost=BigInt(e.actualGasCost)),e.actualGasUsed&&(t.actualGasUsed=BigInt(e.actualGasUsed)),e.logs&&(t.logs=e.logs.map(a=>jt(a))),e.receipt&&(t.receipt=Rt(t.receipt)),t}async function Gt(e,{hash:t}){const a=await e.request({method:"eth_getUserOperationReceipt",params:[t]},{dedupe:!0});if(!a)throw new ia({hash:t});return ba(a)}async function va(e,t){var p,d;const{account:a=e.account,entryPointAddress:n}=t;if(!a&&!t.sender)throw new je;const r=a?Re(a):void 0,i=r?await A(e,Ze,"prepareUserOperation")(t):t,o=t.signature||await((p=r==null?void 0:r.signUserOperation)==null?void 0:p.call(r,i)),u=oe({...i,signature:o});try{return await e.request({method:"eth_sendUserOperation",params:[u,n??((d=r==null?void 0:r.entryPoint)==null?void 0:d.address)]},{retryCount:0})}catch(l){const s=t.calls;throw Ot(l,{...i,...s?{calls:s}:{},signature:o})}}function wa(e,t){const{hash:a,pollingInterval:n=e.pollingInterval,retryCount:r,timeout:i=12e4}=t;let o=0;const u=$t(["waitForUserOperationReceipt",e.uid,a]);return new Promise((p,d)=>{const l=Nt(u,{resolve:p,reject:d},s=>{const m=v=>{h(),v(),l()},c=i?setTimeout(()=>m(()=>s.reject(new ot({hash:a}))),i):void 0,h=Ht(async()=>{r&&o>=r&&(clearTimeout(c),m(()=>s.reject(new ot({hash:a}))));try{const v=await A(e,Gt,"getUserOperationReceipt")({hash:a});clearTimeout(c),m(()=>s.resolve(v))}catch(v){const b=v;b.name!=="UserOperationReceiptNotFoundError"&&(clearTimeout(c),m(()=>s.reject(b)))}o++},{emitOnBegin:!0,interval:n});return h})})}function Pa(e){return{estimateUserOperationGas:t=>xt(e,t),getChainId:()=>ut(e),getSupportedEntryPoints:()=>_a(e),getUserOperation:t=>ha(e,t),getUserOperationReceipt:t=>Gt(e,t),prepareUserOperation:t=>Ze(e,t),sendUserOperation:t=>va(e,t),waitForUserOperationReceipt:t=>wa(e,t)}}function ka(e){const{client:t,key:a="bundler",name:n="Bundler Client",paymaster:r,paymasterContext:i,transport:o,userOperation:u}=e;return Object.assign(zt({...e,chain:e.chain??(t==null?void 0:t.chain),key:a,name:n,transport:o,type:"bundlerClient"}),{client:t,paymaster:r,paymasterContext:i,userOperation:u}).extend(Pa)}export{xa as B,Ea as T,Zt as _,Ua as a,ka as c,La as e,Aa as g,Ga as h,P as l,Ca as t,Da as y};
